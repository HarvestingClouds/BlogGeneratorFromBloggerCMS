[
	{
		"author": "@20aman",
		"title": "Azure Awareness Month - Webinar #1 Video - Getting Started with Azure \u2013 Basics, Tips, and Tricks",
		"postDate": "03-03-2019",
		"tags": [
			"awareness",
			"azure",
			"azureawareness",
			"march",
			"microsoft",
			"microsoftazure",
			"session",
			"tips",
			"tricks",
			"webinar"
		],
		"category": "Azure",
		"body": "We started the Azure Awareness month with the first webinar in the series last Friday. This session was about \"Getting Started with Azure \u2013 Basics, Tips, and Tricks\". If you missed this session then you can watch this recorded webinar below on YouTube.\r\n\r\nIn this session we talked about:\r\n\r\n 1. **Cloud Computing and Azure** - to understand the place of Microsoft Azure in the Cloud Computing world and how we fit in\r\n 2. **Basic Concepts in Azure** - to lay the right foundation on which all concepts will be built\r\n 3. **General Services in Azure** - to provide you with the most essential services in Microsoft Azure\r\n 4. **Tips & Tricks** - to give you that edge and make you more efficient in usage of Microsoft Azure\r\n\r\n<iframe width=\"560\" height=\"315\" src=\"https:\/\/www.youtube.com\/embed\/5X1UxHmdyUA\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen><\/iframe>",
		"addpost": "addpost",
		"dated": "Mar 03, 2019",
		"slug": "azure-awareness-month-webinar-1-video-getting-started-with-azure-basics-tips-and-tricks",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>We started the Azure Awareness month with the first webinar in the series last Friday. This session was about \"Getting Started with Azure &ndash; Basics, Tips, and Tricks\". If you missed this session then you can watch this recorded webinar below on YouTube.<\/p>\n<p>In this session we ta...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Tips & Tricks -  Series Index",
		"postDate": "25-02-2019",
		"tags": [
			"azure",
			"microsoft",
			"microsoftazure",
			"series",
			"tips",
			"tricks"
		],
		"category": "Azure",
		"body": "Microsoft Azure has lots of services to offer. Sometimes you can feel overwhelmed and lost. These tips and tricks will be your guiding star to make your tasks a bit easier. These will increase your efficiency. Even if you save a few seconds on the task at hand it can accumulate to huge time savings over a larger period of time. \r\n\r\nThis blog is an **Index** of various blogs in the series \"Azure Tips & Tricks\":\r\n\r\n 1. <a href=\"http:\/\/harvestingclouds.com\/post\/azure-tips-tricks-quickly-run-commands-or-script-on-an-azure-virtual-machine-vm-without-logging-into-the-vm\/\" target=\"_blank\">Quickly run commands or script on an Azure Virtual Machine (VM) without logging into the VM<\/a>\r\n 2. <a href=\"http:\/\/harvestingclouds.com\/post\/azure-tips-tricks-bootstrap-automation-for-new-resources-for-repeated-deployments-in-multiple-environments\/\" target=\"_blank\">Bootstrap Automation for **New** resources for repeated deployments in multiple environments<\/a>\r\n 3. <a href=\"http:\/\/harvestingclouds.com\/post\/azure-tips-tricks-bootstrap-automation-for-existing-resources-for-repeated-deployments-in-multiple-environments\/\" target=\"_blank\">Bootstrap Automation for **Existing** resources for repeated deployments in multiple environments<\/a>\r\n 4. <a href=\"http:\/\/harvestingclouds.com\/post\/azure-tips-tricks-find-solutions-to-most-common-problems-for-any-resource\/\" target=\"_blank\">Find solutions to most common problems for any resource<\/a>\r\n 5. <a href=\"http:\/\/harvestingclouds.com\/post\/azure-tips-tricks-quickly-navigate-azure-portal-and-search-documentation-with-ease\/\" target=\"_blank\">Quickly navigate Azure Portal and search documentation with ease<\/a>\r\n 6. <a href=\"http:\/\/harvestingclouds.com\/post\/azure-tips-tricks-quickly-assign-and-check-the-azure-policy-and-initiative-compliance-status-of-your-resources-with-new-azure-feature\/\" target=\"_blank\">Quickly assign and check the Azure Policy and Initiative Compliance status of your resources with new Azure feature<\/a>",
		"addpost": "addpost",
		"dated": "Feb 25, 2019",
		"slug": "azure-tips-tricks-series-index",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Microsoft Azure has lots of services to offer. Sometimes you can feel overwhelmed and lost. These tips and tricks will be your guiding star to make your tasks a bit easier. These will increase your efficiency. Even if you save a few seconds on the task at hand it can accumulate to huge time savin...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Tips & Tricks - Quickly assign and check the Azure Policy and Initiative Compliance status of your resources with new Azure feature",
		"postDate": "21-02-2019",
		"tags": [
			"azure",
			"azurepolicies",
			"azuresecurity",
			"initiative",
			"microsoft",
			"microsoftazure",
			"policies",
			"policy",
			"security",
			"tips",
			"tricks"
		],
		"category": "Azure Security",
		"body": "Now you can assign policies, initiatives directly from the resource blade. You can also check the compliance status of the policies and take corrective actions on them. \r\nYou can now access this feature, not just from the **Subscriptions** blade but also from the **Resource Group** and **individual resources** blade.\r\n\r\nTo access this information from the Resource Group level, just navigate to your resource group and search for \"**Policies**\" option under Settings of the blade. \r\n\r\n<img src=\"\/images\/15513074625c7712c6bf854.png\" alt=\"Policies Setting at Resource Group level\">\r\n\r\nTo access this from a resource e.g. a Virtual Machine, navigate to the VM and search for \"Policies\" setting. This is under \"Operations\" section of the VM. \r\n\r\n<img src=\"\/images\/15513075245c7713047de46.png\" alt=\"Policies Setting at Resource level\">\r\n\r\nIn the above example, the policy to apply tag is not compliant. You can click on individual policy names and investigate further.  \r\n\r\nAs soon as I apply the tags and the policies compliance is checked next time, it will change the status to Compliant (as shown below). As a best practice, you should be reviewing the compliance status of your environment at periodic intervals. \r\n\r\n<img src=\"\/images\/15513126205c7726ec59bc7.png\" alt=\"Policies Compliance status after taking corrective action\">",
		"addpost": "addpost",
		"dated": "Feb 21, 2019",
		"slug": "azure-tips-tricks-quickly-assign-and-check-the-azure-policy-and-initiative-compliance-status-of-your-resources-with-new-azure-feature",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>Now you can assign policies, initiatives directly from the resource blade. You can also check the compliance status of the policies and take corrective actions on them.\nYou can now access this feature, not just from the <strong>Subscriptions<\/strong> blade but also from the <strong>Resource Group...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure SQL - Understanding the new vCore Purchasing Model",
		"postDate": "15-02-2019",
		"tags": [
			"azue",
			"azuresql",
			"microsoft",
			"microsoftazure",
			"sql",
			"sqldatabase"
		],
		"category": "Azure SQL",
		"body": "hh",
		"addpost": "addpost",
		"dated": "Feb 15, 2019",
		"slug": "azure-sql-understanding-the-new-vcore-purchasing-model",
		"categoryslug": "azure-sql",
		"status": "draft",
		"summary": "\n<p>hh<\/p>...\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Tips & Tricks - Quickly navigate Azure Portal and search documentation with ease",
		"postDate": "01-02-2019",
		"tags": [
			"azure",
			"azureportal",
			"document",
			"documentation",
			"microsoft",
			"microsoftazure",
			"navigate",
			"portal",
			"search",
			"tips",
			"tricks"
		],
		"category": "Azure",
		"body": "Navigating Azure Portal can become challenging. You want to navigate to different Azure Resources or Resource Groups or want to check a particular Service in Azure. Instead of going to \"All Services\" and searching for your resource, if you can save a little time by searching more efficiently, it can add up over time and make you more efficient as well. So here are few tips on how you can navigate with ease in Azure.\r\n\r\n### 1. Pin\/Favorite most common Services and re-ordering them ###\r\n\r\nFor a recent project, I was working with Azure Route Table a lot. I was navigating to these multiple times and making a lot of changes. Instead of going to \"All Services\" and searching for Route Table service every time, you search for it only once and Star it to mark it as Favorite. It will start showing up in the Services list to the left under Favorites.  \r\n\r\n<img src=\"\/images\/15513414255c779771e2940.png\" alt=\"Marking a Service as Favorite\">\r\n\r\nNext, you want to re-order the Services under Favorites, so you don't have to scroll to navigate to most common services. You can do so by hovering the cursor on the service name under Favorites, and then click and drag on the ellipse (i.e. 3 dots to the right of the service name) as shown below. \r\n\r\n<img src=\"\/images\/15513414435c7797839cd64.png\" alt=\"Re-ordering the service in Favorites\">\r\n\r\nNow you will have the most commonly visited service at the tip of your hands. \r\n\r\n### 2. Pin most common Resources to your dashboard ###\r\n\r\nAnother scenario I faced in one of the projects was that every time I logged in, I had to make some changes to a VM and connect to the same using it's dynamically assigned Public IP. That meant navigating to this VM, every day and starting the VM and connecting to it. I had to start the VM as auto-shutdown was configured on the VM to save cost. Instead of navigating to the Virtual Machines and then searching for the VM and then navigating to it, you can simply Pin the VM to your dashboard. Next time you open the portal, the VM will be right there on the Dashboard. \r\n \r\n<img src=\"\/images\/15513414555c77978fbf2b8.png\" alt=\"Pinning a resource to a dashboard\">\r\n\r\nYou can similarly Pin other resources like SQL Databases, etc.\r\n\r\n### 3. Searching for Resources, Resource Groups, Services and Documentation using the new Search bar ###\r\n\r\nOne of the cool features I stumbled upon is the new search bar in the Azure portal. It had made navigating Azure portal so much easier. You just start searching for the resource or Resource Group or Service name in the text box at the top of the portal. You don't even have to type the whole thing. Just start typing and the results will start popping up. Look for different sections in the suggestions box the pops up under the text box. Click on your desired resource or Resource Group or Service. \r\n\r\n<img src=\"\/images\/15513414665c77979a37437.png\" alt=\"Navigating the smart way\">\r\n\r\nOne advantage of this search box is that you can not just search for resources or resource groups or services, you can also search for Marketplace solutions and Documentation. I have leveraged this feature to search for documentation a lot. You can't remember everything and you have to reference documentation every now and then. Instead of googling the documentation, you can quickly search for it, without leaving the Azure portal and access it. You don't have to worry about navigating away from the Azure portal. The documentation will open up in a separate tab automatically. \r\n\r\nI hope that these tips will help you increase your efficiency. Let us know which tip helped you and which you already knew about, in the comments below. ",
		"addpost": "addpost",
		"dated": "Feb 01, 2019",
		"slug": "azure-tips-tricks-quickly-navigate-azure-portal-and-search-documentation-with-ease",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Navigating Azure Portal can become challenging. You want to navigate to different Azure Resources or Resource Groups or want to check a particular Service in Azure. Instead of going to \"All Services\" and searching for your resource, if you can save a little time by searching more effici...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Tips & Tricks - Find solutions to most common problems for any resource",
		"postDate": "25-01-2019",
		"tags": [
			"azure",
			"microsoft",
			"microsoftazure",
			"tips",
			"tricks",
			"troubleshooting",
			"diagnose"
		],
		"category": "Azure",
		"body": "When working with Azure resources, you will be faced with the challenge of diagnosing, troubleshooting and solving issues related to your resources. Opening a Microsoft Support case should be the last resort. \r\n\r\nThis tip is generic in nature that shows you where to look for various solutions to the most common problems related to a resource. You can find this option under any resource as \"**Diagnose and solve problems**\"\r\n\r\n<img src=\"\/images\/15513430465c779dc6376de.png\" alt=\"Diagnose and solve problems\">\r\n\r\n### Troubleshooting Workflow ###\r\n\r\nUsing this a common troubleshooting workflow will look like this:\r\n\r\n 1. Click on the \"*Diagnose and solve problems*\" option under your resource's blade.\r\n 2. Look for Resource Health. I have had a scenario where after a lot of troubleshooting around Azure Automation, we came to know that the service was experiencing issues in our intended region (US South Central). A quick check from this will rule out the obvious.\r\n 3. Next, you want to check the \"**Activity logs**\". You can check those right from this screen. You can find if anybody changed the configurations which might have resulted in errors you are observing. \r\n 4. Next section shows you some of the **most common issues** and how to resolve these. Scroll through these. Sometimes these include step by step guides to help you. Follow these and ensure you did not miss a step.\r\n 5. If nothing works, you can finally open a **Microsoft Support request** right from this screen. **Note**: If you can't find your issue under common problems, I highly recommend that you search for it in forums like StackOverflow etc. before you open the Microsoft Support request. If it is a business critical issue, then I would recommend that you open the support ticket first and then search for the issue in the interest of time. ",
		"addpost": "addpost",
		"dated": "Jan 25, 2019",
		"slug": "azure-tips-tricks-find-solutions-to-most-common-problems-for-any-resource",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>When working with Azure resources, you will be faced with the challenge of diagnosing, troubleshooting and solving issues related to your resources. Opening a Microsoft Support case should be the last resort. <\/p>\n<p>This tip is generic in nature that shows you where to look for various solutions...<\/p>\n"
	},
	{
		"author": "@20aman",
		"title": "Azure Tips & Tricks - Bootstrap Automation for Existing resources for repeated deployments in multiple environments",
		"postDate": "24-01-2019",
		"tags": [
			"arm",
			"armtemplates",
			"automation",
			"azure",
			"bootstrap",
			"microsoft",
			"microsoftazure",
			"tips",
			"tricks"
		],
		"category": "Azure",
		"body": "When you want to automate resource deployment you will either create the automation templates for an existing set of resources or you will create templates for resources that have not been created yet. For former situation, e.g. you have performed a Proof of Concept and now you want to automate the deployment of these set of resources. \r\n\r\nYou want to automate this because you want to deploy these resources multiple times at different times. You want to deploy these in a predictive fashion without any errors due to manual mistakes creeping in. The number of resources can be fairly large and you will actually end up saving time on the creation of these automation templates instead of manually creating everything.\r\n\r\n### Generating Automation for an existing set of resources ###\r\n\r\nTo generate automation for an existing set of resources, either go to the resource group or to any of the resource. Under **Settings** look for the option for \"**Automation script**\". Depending upon number of resources and type of resources, it may take some time to generate the template.\r\n\r\n**Note**: Even though the option says \"Automation script\" it still generates an ARM Template for the automation. \r\n\r\n<img src=\"\/images\/15513440755c77a1cb534d8.png\" alt=\"Automation Template generation for the resources\">\r\n\r\nOnce the template is ready you can do the following:\r\n \r\n 1. You can inspect the template right there on the screen.\r\n 2. You can download the template or directly add it to your library. Once in the library, you can modify it and share it with your team. Or you can directly Deploy it by clicking on the deploy button.\r\n 3. Look out for the errors regarding the resources that can't be exported. E.g. Key vault policies can't be exported by this wizard.\r\n 4. Next, the Template and Parameters are shown. You can also view, Azure CLI, PowerShell, .Net or Ruby code samples to deploy the template.\r\n 5. Make sure that you inspect the template thoroughly. Remove the resources that you don't need. \r\n 6. Also, there will be a lot of hard-coded values in this auto-generated template. It will still be better than starting everything from scratch and doing everything manually. ",
		"addpost": "addpost",
		"dated": "Jan 24, 2019",
		"slug": "azure-tips-tricks-bootstrap-automation-for-existing-resources-for-repeated-deployments-in-multiple-environments",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>When you want to automate resource deployment you will either create the automation templates for an existing set of resources or you will create templates for resources that have not been created yet. For former situation, e.g. you have performed a Proof of Concept and now you want to automate t...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Tips & Tricks - Bootstrap Automation for New resources for repeated deployments in multiple environments",
		"postDate": "15-01-2019",
		"tags": [
			"arm",
			"armtemplates",
			"automation",
			"azure",
			"bootstrap",
			"microsoft",
			"microsoftazure",
			"tips",
			"tricks"
		],
		"category": "Azure",
		"body": "When you want to automate resource deployment you will either create the automation templates for an existing set of resources or you will create templates for resources that have not been created yet. For the latter situation, e.g. automating the deployment of a new set of resources, you will have to start the automation from scratch. Instead of starting from scratch, you can bootstrap your automation via ARM Templates.\r\n\r\n### Reuse Existing ###\r\n\r\nYou can first search for your resources or scenarios in the Microsoft Quick Start templates. Note that these are sample templates from Microsoft and community members. These templates can be found here: <a href=\"https:\/\/github.com\/Azure\/azure-quickstart-templates\" target=\"_blank\">Azure Quickstart Templates<\/a>. \r\n\r\nWhen you click on a template name you will see multiple files as shown below. Actual template file will always be named as \"***azuredeploy.json***\". The related parameters file will be named as \"***azuredeploy.parameters.json***\". All other files are optional and are the supporting files for the template.\r\n\r\n<img src=\"\/images\/15513749945c781a929e78b.png\" alt=\"Sample Template in Quickstart Repo on GitHub\">\r\n\r\nYou can download these files and edit them. You can fork them directly in GitHub and start editing in a source control environment, but your changes will be public (unless you change your repository to Private). If you do not want to make changes and want to directly deploy one of the template, simply click on the \"**Deploy to Azure**\" button. This will open Azure portal and you will need to sign into your subscription. Then the template deployment blade will open with the template information already populated. You will just need to select right Subscription, Resource Group and provide various parameters. \r\n\r\nIt is really simple and saves you lot of time instead of authoring the template from scratch. Why re-invent the wheel. Reuse instead!\r\n\r\n### Generating template for new resource creation in Azure ###\r\n\r\nIf you are creating new resource from the Azure portal and you have to perform this same action multiple times, you should consider using an ARM Template. If you want to create an ARM Template for a resource for which you can't find a template, even then you can use Azure portal to bootstrap the template creation, rather than starting from scratch. \r\n\r\nSimple go ahead and start creating your resource from Azure portal. At the last screen, instead of actually creating the resource, look for a link with the name as \"**Download a template for automation**\". This will open another blade which will show you the template. You can download the template from here. It will also include the related parameters file and a script to perform the deployment of your template. The below screenshot shows you the option for Storage Account creation.\r\n\r\n<img src=\"\/images\/15513748915c781a2b8fa9a.png\" alt=\"Option for Download a template for automation\">\r\n\r\n**Note**: This option will not be available for all resource types. Microsoft is adding this option to more and more resources everyday. ",
		"addpost": "addpost",
		"dated": "Jan 15, 2019",
		"slug": "azure-tips-tricks-bootstrap-automation-for-new-resources-for-repeated-deployments-in-multiple-environments",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>When you want to automate resource deployment you will either create the automation templates for an existing set of resources or you will create templates for resources that have not been created yet. For the latter situation, e.g. automating the deployment of a new set of resources, you will ha...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Tips & Tricks - Quickly run commands or script on an Azure Virtual Machine (VM) without logging into the VM",
		"postDate": "10-01-2019",
		"tags": [
			"azure",
			"command",
			"microsoft",
			"microsoftazure",
			"powershell",
			"tips",
			"tricks",
			"virtualmachine",
			"vm"
		],
		"category": "Azure",
		"body": "When you are working with Azure Virtual Machines (VM), multiple times you will need to run some command on the VM. For this, you will need to connect to the VM, login and then open the console to run the command and then actually execute it. Instead of going through the trouble of connecting to the VM and logging in during the connection process, you can simple Run the command on the VM directly from the Azure portal. \r\n\r\n**Note 1**: This feature uses the Azure VM Agent on the VM and will not work if the agent is missing. \r\n\r\nTo leverage this option navigate to your VM in the portal and select the option to \"**Run Command**\" under \"Operations\" section of the VM.\r\n\r\n<img src=\"\/images\/15513791435c782ac72f69d.png\" alt=\"Run Command Option\">\r\n\r\n As shown above, you can Run Complete PowerShell script right from this screen. There are various options for common scenarios like checking IP Config which simply executes \"*ipconfig \/all*\". You can check these common scenarios and the underlying script by clicking on them. If you want to execute then simply click \"Run\" in the popup blade. \r\n\r\n\r\n<img src=\"\/images\/15513791525c782ad04aff0.png\" alt=\"Running common scenarios\">\r\n\r\n**Note 2**: You will need to wait for the Output to appear. It takes some time and you just have to be patient. Once you click run, it gets disabled and the operation is running. Once the operation is complete you will see the output in the window. Do not navigate away from this popup blade\/window. \r\n\r\n### Example of Running PowerShell Script ###\r\n\r\nLet us say that you want to install IIS on the VM for quick testing. This can be done easily by running the below PowerShell:\r\n\r\n    Install-WindowsFeature -name Web-Server -IncludeManagementTools\r\n\r\nClick on the \"**RunPowerShellScript**\" option. In the popup blade, type the script and hit Run. Wait for the output to appear. Do not navigate away from the window. You can check the status as indicated below.\r\n\r\n<img src=\"\/images\/15513791605c782ad85f19e.png\" alt=\"Running any PowerShell Script\">\r\n\r\nThat's all there is to it. For more information you can check the official documentation that can be found here: <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/virtual-machines\/windows\/run-command\" target=\"_blank\">Run PowerShell scripts in your Windows VM with Run Command<\/a>",
		"addpost": "addpost",
		"dated": "Jan 10, 2019",
		"slug": "azure-tips-tricks-quickly-run-commands-or-script-on-an-azure-virtual-machine-vm-without-logging-into-the-vm",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>When you are working with Azure Virtual Machines (VM), multiple times you will need to run some command on the VM. For this, you will need to connect to the VM, login and then open the console to run the command and then actually execute it. Instead of going through the trouble of connecting to t...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Set Tags on Azure Resources",
		"postDate": "07-11-2018",
		"tags": [
			"automation",
			"azure",
			"microsoft",
			"microsoftazure",
			"powershell",
			"tags",
			"tag"
		],
		"category": "Azure Script Sample",
		"body": "Earlier we fetches the Azure resources report with the Tagging related information. You can review that script to fetch the report here: <a href=\"http:\/\/harvestingclouds.com\/post\/script-sample-generate-azure-resources-report-by-tags-v30\/\" target=\"_blank\">Script Sample - Generate Azure Resources Report by Tags v3.0<\/a>\r\n\r\nThe output CSV generate by that script can be updated. It can be corrected for missing tag values or incorrect tag values, etc. The updated csv then can become an Input to the script sample discussed in this blog. This script will read from the updated CSV file and will apply the tags back to the Azure.\r\n\r\n**Note**: This script takes lot of time because the underlying cmdlet takes lot of time to set the tags (i.e. \"***Set-AzureRmResource***\" cmdlet). So it is advised that you filter to only the resources for which you want to update the tags.\r\n\r\n### Script Workings ###\r\n\r\nAs mentioned earlier, this script inputs the CSV file generated earlier. The schema for this input file can be checked from the output of Get script from the link mentioned above. \r\n\r\nThe script then connects to Azure and updates the Tags. If the Tags were not present already then it adds the tagging information. It uses the below command to update the tags.\r\n\r\n    Set-AzureRmResource -Tag $r.Tags -ResourceId $r.ResourceId -Force\r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Tagging%20Reports\" target=\"_blank\">Set-AzureRmTags.ps1<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Nov 07, 2018",
		"slug": "script-sample-set-tags-on-azure-resources",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>Earlier we fetches the Azure resources report with the Tagging related information. You can review that script to fetch the report here: <a href=\"http:\/\/harvestingclouds.com\/post\/script-sample-generate-azure-resources-report-by-tags-v30\/\" target=\"_blank\">Script Sample - Generate Azure Resources R...<\/a><\/p>\n"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Generate Azure Resources Report by Tags v3.0",
		"postDate": "03-11-2018",
		"tags": [
			"automation",
			"azure",
			"powershell",
			"report",
			"tags"
		],
		"category": "Azure Script Sample",
		"body": "This is version 3.0 of an older script which generates the report for Azure resources by Tags. This is one of the most important script that ensures that you are compliant in your environment. You can pull reports on the CSV generated by this script to see which resources are missing tags or which resources do not have the correct tags applied.\r\n\r\n**What is updated in this version**: This version now can parse the Tags. It even factors for the spacing between the tag names. You will need to tweak the script to parse your own tags. Sample is provided in the script. You will need to modify the lines between 87 and 145 in the lined script. \r\n\r\nYou can still refer the older script here along with the details mentioned in that post: <a href=\"http:\/\/harvestingclouds.com\/post\/script-sample-generate-azure-resources-report-by-tags\/\" target=\"_blank\">Script Sample - Generate Azure Resources Report by Tags<\/a>\r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Tagging%20Reports\" target=\"_blank\">Get-AzureRmTagsReport - v3.0.ps1<\/a>\r\n\r\n### Next Steps - Setting the updated Tags ###\r\n\r\nNow, what do you do witht he output CSV report that you got from running this script. You will update this csv file by making the corrections. If any resources will be missing any tags then you will add the same. After that this CSV file will become an input to another script, which will Set the changes for the Tags back to Azure resources. This script can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/script-sample-set-tags-on-azure-resources\/\" target=\"_blank\">Script Sample - Set Tags on Azure Resources<\/a>.",
		"addpost": "addpost",
		"dated": "Nov 03, 2018",
		"slug": "script-sample-generate-azure-resources-report-by-tags-v30",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>This is version 3.0 of an older script which generates the report for Azure resources by Tags. This is one of the most important script that ensures that you are compliant in your environment. You can pull reports on the CSV generated by this script to see which resources are missing tags or whic...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Getting Azure Resource Reports",
		"postDate": "25-10-2018",
		"tags": [
			"automation",
			"azure",
			"microsoft",
			"microsoftazure",
			"powershell",
			"report"
		],
		"category": "Azure Script Sample",
		"body": "This post is for two script samples in one. You can fetch reports on Azure resources with the script sample in this post. The two scripts in this post are:\r\n\r\n 1. **Get-AzureRmAllResourceReport** - which fetches the report for all Azure resources in all subscriptions\r\n 2. **Get-AzureRmResourceReportForOneResourceGroup** - which fetches the report for Azure resources in a particular Resource Group\r\n\r\n### Script Inputs ###\r\n\r\nAll you need to do is to provide the path for the output csv file. In the second script you also need to provide the name of the Resource Group.\r\n\r\nThe script will iterate all Azure resources and will provide an output csv file. For Azure VM and SQL the script will also provide additional information. \r\n\r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Get-AzureRmResourceReport\" target=\"_blank\">Scripts to Fetch Azure Resource Reports<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Oct 25, 2018",
		"slug": "script-sample-getting-azure-resource-reports",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>This post is for two script samples in one. You can fetch reports on Azure resources with the script sample in this post. The two scripts in this post are:<\/p>\n<ol><li><strong>Get-AzureRmAllResourceReport<\/strong> - which fetches the report for all Azure resources in all subscriptions<\/li>\n<li><...><\/...><\/li><\/ol>\n"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Apply RBAC Role to Users on Resources",
		"postDate": "22-10-2018",
		"tags": [
			"automation",
			"azure",
			"powershell",
			"roles",
			"virtualmachine",
			"rbac"
		],
		"category": "Azure Script Sample",
		"body": "If you have to assign a role to users onto multiple resources, this script can reduce your workload and can do the heavy lifting for you. Simply provide the inputs and you can provide access to the users at any scope i.e. Subscriptions, Resource Group or individual resource. \r\n\r\nCurrently, the script factors in Virtual Machines as individual resources, but these can be replaced by any resource type. \r\n\r\n### Inputs and Script Requirements ###\r\n\r\nThe script takes in the following inputs:\r\n\r\n 1. csvLocation - this is the CSV containing the name of the resources on which you want to provide the role-based access. An example CSV is also provided with the script. It is simply two column CSV. The first column being the VM Name (or resource name if you want to generalize) and the second column is the Resource Group containing that resource.\r\n 2. role - This is the role that you want to assign. E.g. \"Virtual Machine Operator\"\r\n 3. Scope - this can be one of the 3 values viz. \"VirtualMachine\", \"Subscription\" or \"ResourceGroup\"\r\n 4. Usernames - this can be an array of the user names who will be assigned the access on the resources\r\n 5. Groupnames - if groups need to be assigned access then they can be mentioned here\r\n 6. RBACOperatorFlag - a boolean value with the default value of true. You set this to false when you are making changes and do not want the script to perform any actions. You do not need to worry about this parameter for most scenarios and can ignore this. \r\n\r\n### Example Execution ###\r\n\r\nExample execution of the script will look like below. \r\n\r\n    Apply-RBACRoleToResources -csvLocation \"C:\\Users\\aman\\Documents\\AzureVM.csv\" -role \"Virtual Machine Operator\" -Scope \"VirtualMachine\" -UserNames \"user1,user2\" -GroupNames \"abac\" \r\n\r\nThe above command will read the VM names and their related REsource Groups form the AzureVM.csv file. This will assign \"Virtual machine operator\" role at the Virtual Macine level. This role will be assigned to the user1 and user2 users along with abac Group name. \r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Apply-RBACRoleToResources\" target=\"_blank\">Apply-RBACRoleToResources.ps1<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Oct 22, 2018",
		"slug": "script-sample-apply-rbac-role-to-users-on-resources",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>If you have to assign a role to users onto multiple resources, this script can reduce your workload and can do the heavy lifting for you. Simply provide the inputs and you can provide access to the users at any scope i.e. Subscriptions, Resource Group or individual resource. <\/p>\n<p>Currently, th...<\/p>\n"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Check for Pending Reboots on various VMs in your environment",
		"postDate": "15-10-2018",
		"tags": [
			"automation",
			"azure",
			"microsoft",
			"microsoftazure",
			"powershell",
			"sample"
		],
		"category": "Azure Script Sample",
		"body": "Often times you will need to check if there are any VMs\/Servers in your environment which have Pending Reboot on them. You will want to schedule and perform a planned reboot on these VMs after going through proper processes.\r\n\r\nThe script sample in this post is about checking multiple Vms in your environment and check if there is any Pending Reboot on any of the VMs. The script uses WMI queries to check if there is any pending reboot on the machine. \r\n\r\nThis script was not authored by me. I received it from one of my colleagues and I couldn't track the original author of this script. Nevertheless, this is a very useful script for system administrators. \r\n\r\n### Script Usage ###\r\n\r\nThe script can be used as shown below:\r\n\r\n    C:\\Users\\aman\\Downloads> import-module .\\Get-PendingReboot.ps1\r\n    C:\\Users\\aman\\Downloads> $Servers = Get-Content C:\\Users\\aman\\Downloads\\Servers.txt\r\n    C:\\Users\\aman\\Downloads> Get-PendingReboot -Computer $Servers | Export-Csv C:\\Users\\aman\\Downloads\\PendingRebootReport.csv -NoTypeInformation\r\n\r\nIn the 2nd command above, the Server.txt file should simply have the list of names of the computers in your environment with one computer name per line. \r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Get-PendingReboot\" target=\"_blank\">Get-PendingReboot.ps1<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Oct 15, 2018",
		"slug": "script-sample-check-for-pending-reboots-on-various-vms-in-your-environment",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>Often times you will need to check if there are any VMs\/Servers in your environment which have Pending Reboot on them. You will want to schedule and perform a planned reboot on these VMs after going through proper processes.<\/p>\n<p>The script sample in this post is about checking multiple Vms in ...<\/p>\n"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Apply Locks on Various Azure Resources",
		"postDate": "11-10-2018",
		"tags": [
			"arm",
			"automation",
			"azure",
			"lock",
			"locks",
			"microsoft",
			"microsoftazure",
			"powershell"
		],
		"category": "Azure Script Sample",
		"body": "Locks is a very important but very less known feature in Azure. This feature is available for all resources in Azure. This prevents unintended operation on a particular resource. \r\n\r\nYou have two types of locks in Azure:\r\n\r\n 1. **ReadOnly** - You won't' be able to alter any configuration of the resource\r\n 2. **DoNotDelete** - You will be able to add configurations but will not be able to remove configurations or even delete the resource\r\n\r\n**Do Not Delete** is the lock, that as a best practice, you should apply on all critical resources in the environment. Once this lock is there on the resources, even the global administrator will not be able to delete the resources. The only way to delete the resources will be to delete the lock first and then delete the resources. \r\n\r\n### The Script Sample Details ###\r\n\r\nThis script sample leverages this concept of locks and uses the below cmdlet to apply the locks on various critical resources in the environment. \r\n\r\n    New-AzureRmResourceLock -LockLevel CanNotDelete -LockName DoNotDelete -ResourceName $vNet.Name -ResourceType $vNet.Type -ResourceGroupName $vNet.ResourceGroupName -LockNotes \"Do Not Delete Lock\" -Confirm -Force\r\n\r\nThe above command uses ***New-AzureRmResourceLock*** cmdlet to create the Do Not Delete lock on a Virtual Network. \r\n\r\nThis script iterates through all subscriptions that your account has access to and then applies the lock to all resources of type:\r\n\r\n 1. Virtual Network\r\n 2. Route Tables\r\n 3. Express Routes\r\n 4. Virtual Network Gateways\r\n 5. Virtual Network Gateway Connections\r\n 6. Recovery Services Vaults (i.e. ASR Vaults)\r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Apply-LocksOnVariousAzureResources\" target=\"_blank\">Apply-LocksOnVariousAzureResources.ps1<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Oct 11, 2018",
		"slug": "script-sample-apply-locks-on-various-azure-resources",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>Locks is a very important but very less known feature in Azure. This feature is available for all resources in Azure. This prevents unintended operation on a particular resource. <\/p>\n<p>You have two types of locks in Azure:<\/p>\n<ol><li><strong>ReadOnly<\/strong> - You won't' be able to alter any...<\/li><\/ol>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Azure Automation - Check VM Availability",
		"postDate": "05-10-2018",
		"tags": [
			"azure",
			"azureautomation",
			"microsoft",
			"microsoftazure",
			"powershell",
			"sample",
			"virtualmachine",
			"vm"
		],
		"category": "Azure Script Sample",
		"body": "One of the most common scenarios is to check if a VM is available or not. If you want to connect to a VM and take some actions, it is a best practice to first check if the VM is available and responsive or not. This script sample performs multiple checks. You can tweak these checks to include only the ones that you need. \r\n\r\nAlso, there are some pieces of information that you can get only from inside the VM. E.g. the domain to which a VM is connected. This scripts ensures that the script is available. If it is available then it can also fetch such pieces of information for you. \r\n\r\n### What does the Script check ###\r\n\r\nThe script makes multiple checks which include:\r\n\r\n 1. Ping check using the ***Test-Connection*** cmdlet\r\n 2. PS Remoting checking by trying to open a PS Session using ***New-PSSession*** cmdlet\r\n 3. The script also tries to connect to the WMI and list various object using ***Get-Wmiobject*** cmdlet\r\n 4. Similar to the PS Remoting check it also checks for WS Man by using the ***Test-WSMan*** cmdlet\r\n\r\nIt can then fetch VM related information by either remoting into it or by using WMI. E.g. it can fetch domain of the VM by using below WMI cmdlet.\r\n\r\n    $Domain = $wmi.GetStringValue($HKLM, $MachineKey, \"NV Domain\").sValue\r\n\r\n### Script Inputs and Requirements ###\r\n\r\nThe script only takes below two input parameters:\r\n\r\n 1. NameOfTheVM\r\n 2. IPOfVM\r\n\r\nThe script requires a credential object with the name as \"***AutomationCredentialName***\". These credential should have login and remoting access into the VM. \r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Azure%20Automation%20-%20Check%20VM%20Availability\" target=\"_blank\">Check-VMAvailability.ps1<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Oct 05, 2018",
		"slug": "script-sample-azure-automation-check-vm-availability",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>One of the most common scenarios is to check if a VM is available or not. If you want to connect to a VM and take some actions, it is a best practice to first check if the VM is available and responsive or not. This script sample performs multiple checks. You can tweak these checks to include onl...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Azure Automation - Get VM Information from actual Azure Virtual Machine",
		"postDate": "22-09-2018",
		"tags": [
			"automation",
			"azure",
			"azureautomation",
			"microsoft",
			"microsoftazure",
			"virtualmachine",
			"virtualnetwork",
			"vm"
		],
		"category": "Azure Script Sample",
		"body": "Many times, when automating your infrastructure, you will need to work with Azure Virtual Machines. Based on just the name of the VM and it's Resource Group, you will need to know about it's Network Interfaces and it's IP address. \r\n\r\nThis Runbook sample connects to Azure using Service Principal and fetches various VM properties. The Runbook can be tweaked to fetch more or less information as per the requirements. \r\n\r\n### Script Input and Requirements ###\r\n\r\nThe script takes the below inputs:\r\n\r\n 1. VM Name - name of the VM \r\n 2. ResourceGroupNameofVM - name fo the Resource Group in which the VM exists\r\n 3. Azure Tenant Id - Id of the Tenant. This is the Azure Active Directory's Id which can be found in Azure AD properties in the portal\r\n 4. Subscription Id - Id of the Subscription in which the VM exists\r\n\r\nThe VM also requires a credential Object i.e. a Service Pricipal, which will have access to the Virtual machine. \r\n\r\n### Working of the Script ###\r\n\r\nThe script uses the below command to log into the Azure using the Service Principal.\r\n\r\n    $AzureRMConn = Login-AzureRmAccount -ServicePrincipal -Credential $Cred -TenantId $AzureTenantId -ErrorAction SilentlyContinue -ErrorVariable LoginError\r\n\r\nIf the connection is successful then the Subscription is selected using below cmdlet.\r\n\r\n    $ConnSubs = Select-AzureRmSubscription -SubscriptionId $SubscriptionID\r\n\r\nThen the actual VM information is fetched using below cmdlet.\r\n\r\n    $VM = Get-AzureRmVM -ResourceGroupName $VMResourceGroup -Name $VMName\r\n\r\nThis fetches basic VM information. To fetch detailed information regarding the network interface of the VM, below cmdlets are used.\r\n\r\n    $nicId = $VM.NetworkProfile.NetworkInterfaces[0].Id\r\n    $VMNetowrkInterface = Get-AzureRmNetworkInterface -ResourceGroupName $VMResourceGroup -Name $nicId.Split('\/')[8]\r\n    $VMMainIPConfig = $VMNetowrkInterface | Get-AzureRmNetworkInterfaceIpConfig\r\n    $strVMMainNicName = $VMMainIPConfig.Name\r\n    $strVMMainNicIPAddress = $VMMainIPConfig.PrivateIpAddress\r\n\r\nThe first cmdlet above fetches the Id of the first Network Interface on the VM. Then the second cmdlet uses this Id to fetch the actual network interface. The third cmdlet uses Get-AzureRmNetwrokInterfaceIpConfig to fetch the IP configuration on this network interface. Then last two lines use this Ip configuration to fetch the Private IP address on the VM. \r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Azure%20Automation%20-%20Get%20VM%20Information%20From%20Azure\" target=\"_blank\">Get-VMInfoFromAzure.ps1<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Sep 24, 2018",
		"slug": "script-sample-azure-automation-get-vm-information-from-actual-azure-virtual-machine",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>Many times, when automating your infrastructure, you will need to work with Azure Virtual Machines. Based on just the name of the VM and it's Resource Group, you will need to know about it's Network Interfaces and it's IP address. <\/p>\n<p>This Runbook sample connects to Azure using Service Princi...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Azure Automation - Sending Email Notification",
		"postDate": "22-09-2018",
		"tags": [
			"automation",
			"azure",
			"azureautomation",
			"microsoft",
			"microsoftazure",
			"powershell",
			"email",
			"notification"
		],
		"category": "Azure Script Sample",
		"body": "Sending email notifications from Azure Automation is a requirement that you will encounter a lot when working with any automation scenario. You may want to send an email notification on the completion of the job or on the failure of the job. \r\n\r\nThis script sample helps you bootstrap the Runbook for you. \r\n\r\n### Script Inputs and Requirements ###\r\n\r\nThe script takes the following **input parameters**:\r\n\r\n 1. SMTP Server URL\r\n 2. SMTP Server Port\r\n 3. User Credentials - Boolean value to check if user credentials are required or not\r\n 4. Credential Name - Credential name for the credential asset in your Azure Automation Account\r\n 5. EnableSsl - Boolean value to select if you want to enable SSL or not\r\n 6. Email From - From address for the email\r\n 7. Email To - Receipient of the email\r\n 8. Email Subject - Subject of the email\r\n 9 Message Body - This can be html. So you can compose your email to make it look more professional\r\n\r\nThe script also requires you to have a Credential asset in your Azure Automation Account. It's name is specified in the 4rth parameter above. This credential is used to connect to the SMTP server. In the sample this smtp server is an O365 email account. \r\n\r\n### Script Working ###\r\n\r\nThe script uses a SMTP Client to send the email. This client is created using the below cmdlet.\r\n\r\n    $SmtpClient = New-Object System.Net.Mail.SmtpClient $SMTPServerUrl, $SMTPServerPort\r\n\r\nwhere $SMTPServerUrl is the URL of the SMTP server and $SMTPServerPort is the port number used by the SMTP server.\r\n\r\nLater, this client is used to send the email by using it's ***send*** function as below. \r\n\r\n    $SmtpClient.Send($Message)\r\n\r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Azure%20Automation%20-%20Send%20Email%20Notification\" target=\"_blank\">Send-EmailNotificationFromAzureAutomationRunbook.ps1<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Sep 22, 2018",
		"slug": "script-sample-azure-automation-sending-email-notification",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>Sending email notifications from Azure Automation is a requirement that you will encounter a lot when working with any automation scenario. You may want to send an email notification on the completion of the job or on the failure of the job. <\/p>\n<p>This script sample helps you bootstrap the Runb...<\/p>\n"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Azure Automation - Get VM Information from ASR Recovery Plan Context",
		"postDate": "12-09-2018",
		"tags": [
			"asr",
			"automation",
			"azure",
			"azureautomation",
			"azuresiterecovery",
			"microsoft",
			"microsoftazure",
			"recovery"
		],
		"category": "Azure Script Sample",
		"body": "This script sample is to parse the Recovery Plan Context from Azure Site Recovery. When an Azure Automation Runbook is invoked directly from Azure Site Recovery, it passes an object called **Recovery Plan Context**.  This has all the crucial information regarding the failover operation like:\r\n\r\n 1. Recovery Plan Name\r\n 2. Failover Type\r\n 3. Failover DIrection\r\n 4. Subscription Name\r\n 5. Resource Group Name\r\n 6. VM Name\r\n\r\n### Sample Recovery Plan Context ###\r\n\r\nA sample Recovery Plan Context looks like below. Please note that this is formatted appropriately here. In the Runbook it will look flattened i.e. instead of multiple lines, the context will be contiguous and will be presented in a single long line. Its data type is Object when coming from ASR Recovery Plan.\r\n\r\n    {\r\n       \"RecoveryPlanName\":\"RecoveryPlan-Test\",\r\n       \"FailoverType\":\"Test\",\r\n       \"FailoverDirection\":\"PrimaryToSecondary\",\r\n       \"GroupId\":\"Group1\",\r\n       \"VmMap\":{\r\n          \"aaaaaa-1111-1111-1111-aaaaaaaaaaa\":{\r\n             \"SubscriptionId\":\"bbbbbbbb-2222-2222-2222-bbbbbbbbbbb\",\r\n             \"ResourceGroupName\":\"rg-dr-test-asr\",\r\n             \"CloudServiceName\":null,\r\n             \"RoleName\":\"VMName-test\",\r\n             \"RecoveryPointId\":\"cccccccccc-3333-3333-3333-cccccccccccc\",\r\n             \"RecoveryPointTime\":\"\\\/Date(1550773609103)\\\/\"\r\n          }\r\n       }\r\n    }\r\n\r\n### How does this Script work ###\r\n\r\nThe script first uses \"***ConvertFrom-Json***\" cmdlet to parses the object to valid PowerShell object. It then uses the VMMap property of the Recovery Plan Context object to get various pieces of the information. \r\n\r\nThe script also uses a ***foreach*** look to factor for multiple Vms in the Recovery Plan. It will **output** an array of the VMs with the required information, which can then be consumed in your logic to perform actual functions on the VMs. E.g. You can then connect to the VM and install some extensions on it. \r\n\r\n### How to Invoke This Runbook\/Script ###\r\n\r\nThis script can be directly invoked from Azure Site Recovery (ASR)'s Recovery Plan or can be invoked from a master Runbook. It is a best practice to invoke this Runbook from a master Runbook. A sample for this Runbook is provided and discussed here: <a href=\"http:\/\/harvestingclouds.com\/post\/script-sample-azure-automation-runbook-for-asr-recovery-plan\/\" target=\"_blank\">Script Sample - Azure Automation - Runbook for ASR Recovery Plan<\/a>\r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Azure%20Automation%20-%20ASR%20Recovery%20Plan\" target=\"_blank\">ASR-Get-VMSInfoFromASRContext.ps1<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Sep 12, 2018",
		"slug": "script-sample-azure-automation-get-vm-information-from-asr-recovery-plan-context",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>This script sample is to parse the Recovery Plan Context from Azure Site Recovery. When an Azure Automation Runbook is invoked directly from Azure Site Recovery, it passes an object called <strong>Recovery Plan Context<\/strong>.  This has all the crucial information regarding the failover operati...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Azure Automation - Runbook for ASR Recovery Plan",
		"postDate": "05-09-2019",
		"tags": [
			"asr",
			"automation",
			"azure",
			"azureautomation",
			"azuresiterecovery",
			"microsoft",
			"microsoftazure",
			"recovery",
			"runbook"
		],
		"category": "Azure Script Sample",
		"body": "When you are automating Azure Site Recovery, you will be working with **Azure Automation Runbooks**. You will invoke these from within the **Azure Site Recovery Plan**.  The input parameter to this Runbook will be a **Recovery Plan Context**, that will automatically be passed by the ASR Recovery Plan. This Recovery plan context will contain information like: \r\n\r\n 1. Recovery Plan Name\r\n 2. Failover Type\r\n 3. Failover DIrection\r\n 4. Subscription Name\r\n 5. Resource Group Name\r\n 6. VM Name\r\n\r\nThe Azure Automation Runbook should be able to receive this information and parse it. \r\n\r\n### Best Practice and this Script Sample ###\r\n\r\nAs a best practice, you should leverage the main Runbook to perform operational functions. E.g. If the automation that you want to trigger on Failover, requires connection to the company's internal network, then you would want it to run on a Hybrid worker (which will be connected to your internal network). As such, I recommend that the parsing of the recovery plan context should be done in another Runbook, which should be invoked by the main Runbook. \r\n\r\nThis sample PowerShell Runbook accepts the Recovery Plan context and passes it to the second Runbook. That Runbook may or may not run on a Hybrid worker. \r\n\r\n### Sample Recovery Plan Context ###\r\n\r\nA sample Recovery Plan Context looks like below. Please note that this is formatted appropriately here. In the Runbook it will look flattened i.e. instead of multiple lines, the context will be contiguous and will be presented in a single long line. Its data type is Object when coming from ASR Recovery Plan. \r\n\r\n    {\r\n       \"RecoveryPlanName\":\"RecoveryPlan-Test\",\r\n       \"FailoverType\":\"Test\",\r\n       \"FailoverDirection\":\"PrimaryToSecondary\",\r\n       \"GroupId\":\"Group1\",\r\n       \"VmMap\":{\r\n          \"aaaaaa-1111-1111-1111-aaaaaaaaaaa\":{\r\n             \"SubscriptionId\":\"bbbbbbbb-2222-2222-2222-bbbbbbbbbbb\",\r\n             \"ResourceGroupName\":\"rg-dr-test-asr\",\r\n             \"CloudServiceName\":null,\r\n             \"RoleName\":\"VMName-test\",\r\n             \"RecoveryPointId\":\"cccccccccc-3333-3333-3333-cccccccccccc\",\r\n             \"RecoveryPointTime\":\"\\\/Date(1550773609103)\\\/\"\r\n          }\r\n       }\r\n    }\r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Azure%20Automation%20-%20ASR%20Recovery%20Plan\" target=\"_blank\">ASR-RunbookForRecoveryPlans.ps1<\/a>\r\n\r\n### Runbook for Parsing the Recovery Plan Context ###\r\n\r\nThe Runbook for parsing the Recovery Plan Context is discussed here: <a href=\"http:\/\/harvestingclouds.com\/post\/script-sample-azure-automation-get-vm-information-from-asr-recovery-plan-context\/\" target=\"_blank\">Script Sample - Get VM's Information from ASR Context<\/a>. The Runbook\/script in that link is the one that is being invoked by the Runbook discussed in this blog post. \r\n\r\n\r\n",
		"addpost": "addpost",
		"dated": "Sep 05, 2018",
		"slug": "script-sample-azure-automation-runbook-for-asr-recovery-plan",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>When you are automating Azure Site Recovery, you will be working with <strong>Azure Automation Runbooks<\/strong>. You will invoke these from within the <strong>Azure Site Recovery Plan<\/strong>.  The input parameter to this Runbook will be a <strong>Recovery Plan Context<\/strong>, that will autom...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Updating a Custom RBAC Role in Azure",
		"postDate": "29-08-2018",
		"tags": [
			"azure",
			"custom",
			"customroles",
			"microsoft",
			"microsoftazure",
			"roles",
			"sample"
		],
		"category": "Azure Script Sample",
		"body": "In one of the earlier blog, we saw how to add a custom role in Azure to manage Role Based Access Control (RBAC) at more granular level. You can review the earlier post here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-custom-rbac-roles\/\" target=\"_blank\">Demystifying Azure Security - Custom RBAC Roles<\/a>.\r\n\r\nIn this post, we will see how to make quick changes to this custom role leveraging Azure PowerShell script.\r\n\r\n### Making the updates ###\r\n\r\nJust like any other Azure PowerShell script, you will connect to Azure and select the right subscription by using the following cmdlets.\r\n\r\n    Add-AzureRmAccount\r\n    Select-AzureRmSubscription -SubscriptionName $SubscriptionName\r\n\r\nThen you will fetch the current custom role by using the below cmdlet.\r\n\r\n    $role = Get-AzureRmRoleDefinition $roleName\r\n\r\nOptionally, if you want to **inspect the current role**, then you can use below cmdlet to generate JSON file for the current custom role.\r\n\r\n    Get-AzureRMRoleDefinition -Name $roleName | ConvertTo-Json\r\n\r\nThen you can make updates to the \"$role\" object. One such sample could be as outlined below which adds the action to allow stopping of the VMs and then updates the description of the custom role.\r\n\r\n    $role.Actions.Add(\"Microsoft.Compute\/virtualMachines\/deallocate\/action\")\r\n    $role.Description = \"Can monitor, Start, Stop and restart virtual machines.\"\r\n\r\nFinally, the role is updated back to the Azure portal by using the below cmdlet.\r\n\r\n    Set-AzureRmRoleDefinition -Role $role\r\n\r\n### Location of the Complete Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Update-CustomRoleSample\" target=\"_blank\">Update-CustomRoleSample.ps1<\/a>",
		"addpost": "addpost",
		"dated": "Aug 29, 2018",
		"slug": "updating-a-custom-rbac-role-in-azure",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>In one of the earlier blog, we saw how to add a custom role in Azure to manage Role Based Access Control (RBAC) at more granular level. You can review the earlier post here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-custom-rbac-roles\/\" target=\"_blank\">Demystifying Azur...<\/a><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Set Azure Site Recovery (ASR) Prerequisite Services",
		"postDate": "20-08-2018",
		"tags": [
			"asr",
			"azure",
			"azuresiterecovery",
			"microsoft",
			"microsoftazure",
			"powershell",
			"sample"
		],
		"category": "Azure Script Sample",
		"body": "When you want to use Azure Site Recovery (ASR) either for Migration or for Disaster Recovery (DR), you will need to enable replication. Under the hood, this involves installation of the Mobility Services agent. This has few pre-requisites for some services to be enabled and set up appropriately. \r\n\r\nIn the last script sample, we saw how to check remote computers if these services are set correctly or not. That sample can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/script-sample-check-azure-site-recovery-asr-prerequisite-services\/\" target=\"_blank\">Script Sample - Check Azure Site Recovery (ASR) Pre-requisites<\/a>.\r\n\r\nIn this sample, we will see how to set these services correctly on the remote computers.\r\n\r\n### How it works ###\r\n\r\nThis script will query the remote computers and set the service status for the 3 ASR Required services. These 3 services are:\r\n\r\n 1. Volume Shadow Copy(VSS) \r\n 2. COM+ System Application(COMSysApp)\r\n 3. Microsoft Distributed Transaction Coordinator Service (MSDTC)\r\n\r\nThe script will set the startup type of the services to \"***automatic***\" and will then \"***start***\" the service. It uses the below cmdlets to perform these actions.\r\n\r\n    Set-Service -name 'msdtc' -ComputerName $Computer -StartupType Automatic\r\n    Start-Sleep -s 5\r\n    Get-Service -Name 'msdtc' -ComputerName $computer| Start-Service\r\n\r\nThe cmdlets to configure other two services is similar. \r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/ASR%20Pre-Requisites\" target=\"_blank\">Set-ASRPrerequisiteServivces.ps1 on GitHub<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Aug 23, 2018",
		"slug": "script-sample-set-azure-site-recovery-asr-prerequisite-services",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>When you want to use Azure Site Recovery (ASR) either for Migration or for Disaster Recovery (DR), you will need to enable replication. Under the hood, this involves installation of the Mobility Services agent. This has few pre-requisites for some services to be enabled and set up appropriately. ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Check Azure Site Recovery (ASR) Prerequisite Services",
		"postDate": "24-08-2018",
		"tags": [
			"asr",
			"azure",
			"azuresiterecovery",
			"microsoft",
			"microsoftazure",
			"powershell",
			"sample"
		],
		"category": "Azure Script Sample",
		"body": "When you want to use Azure Site Recovery (ASR) either for Migration or for Disaster Recovery (DR), you will need to enable replication. Under the hood, this involves installation of the Mobility Services agent. This has few pre-requisites for some services to be enabled and set up appropriately. \r\n\r\nIf you have a large environment then you can do this in an automated fashion by leveraging this script sample. You can learn more about these services related requirements by checking the \"***Checking Services***\" section in here: <a href=\"http:\/\/harvestingclouds.com\/post\/troubleshooting-azure-site-recovery-asr-data-replication-initiation-issues-part-2\/\" target=\"_blank\">Troubleshooting Azure Site Recovery (ASR) - Data Replication Initiation Issues - Part 2<\/a>\r\n\r\n### How it works ###\r\n\r\nThis script will query the remote computers and check for service status for the 3 ASR Required services, and export to CSV. These 3 services are:\r\n\r\n 1. Volume Shadow Copy(VSS) \r\n 2. COM+ System Application(COMSysApp)\r\n 3. Microsoft Distributed Transaction Coordinator Service (MSDTC)\r\n\r\nThe script uses WMI to fetch the data from the remote computer(s) and checks if these services are in the \"***running***\" state and whether or not the startup type is set to \"***automatic***\". If both conditions are not met then the state is reported as \"*Set Incorrectly*\". If both conditions are met then the result is reported as \"*Set Correctly*\"\r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/ASR%20Pre-Requisites\" target=\"_blank\">Check-ASRPrerequisiteServices.ps1 on GitHub<\/a>\r\n\r\n\r\n### Next Script  - Setting these services automatically###\r\n\r\nNext, we will check the script sample to set these services appropriately. This sample can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/script-sample-set-azure-site-recovery-asr-prerequisite-services\/\" target=\"_blank\">Script Sample - Set Azure Site Recovery (ASR) Pre-requisite Services<\/a>",
		"addpost": "addpost",
		"dated": "Aug 20, 2018",
		"slug": "script-sample-check-azure-site-recovery-asr-prerequisite-services",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>When you want to use Azure Site Recovery (ASR) either for Migration or for Disaster Recovery (DR), you will need to enable replication. Under the hood, this involves installation of the Mobility Services agent. This has few pre-requisites for some services to be enabled and set up appropriately. ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Format EA Billing Usage Csv for Tags",
		"postDate": "08-08-2018",
		"tags": [
			"azure",
			"microsoft",
			"microsoftazure",
			"powershell",
			"format",
			"script",
			"sample"
		],
		"category": "Azure Script Sample",
		"body": "As a system administrator, you will need to work with Enterprise Agreement (EA) related billing data a lot. As such you will need to pull lots of reports based on this consumption and usage related csv file that you get from the EA portal i.e. at address: <a href=\"https:\/\/ea.azure.com\" target=\"_blank\">https:\/\/ea.azure.com<\/a>. Tagging is one of the important components. But it comes as a composite JSON in one column. You will want to split this into multiple columns, with one column for each tag. \r\n\r\nThe script sample in this blog performs exactly this parsing for you. You will need to tweak the script to include the tags as per your environment. \r\n\r\n> **Note**: The EA portal is only available to the EA customer. If you are not an EA customer, then if you try to login, you will get the following error:Invalid User: The account provided is not a valid user of the Microsoft Azure Enterprise Portal. Please sign in with a valid account. If you believe you have received this message in error, please contact Support.\r\n\r\n### Sample Input EA Azure Billing CSV ###\r\n\r\n\r\n\r\nThe tags section in the CSV will look similar to below **JSON format key-value pairs** under the column for \"**Tags**\":\r\n\r\n    {  \"ApplicationOwner\": \"aman@domain.com\",  \"BusinessUnit\": \"Infrastructure\",  \"ApplicationType\": \"Test\",  \"Department\": \"Infrastructure\"}\r\n\r\nNow as a requirement, you will want to split this to separate columns for the Tags for \"Application Owner\", \"Business Unit\", \"ApplicationType\" and \"Department\". \r\n\r\n### How does the script parse this JSON ###\r\n\r\nThe script parses the JSON by splitting it into multiple values and then saving the new object as an output CSV. Right now these tag values are hard coded into the script and needs to be tweaked as per your requirements. Look out for the names of the variables and output member names with same name as that of the Tags mentioned above. These are the ones that you will need to alter. \r\n\r\nThe script also takes into factor if the tag was added incorrectly with space in the name instead of pascal casing (i.e. name with no space between two words and first letter capital for each word).\r\n\r\n\r\n### Location of the Script ###\r\n\r\nThe script is located in the GitHub along with samples for Input and Output CSV files at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Format-EABillingUsageCsvForTags\" target=\"_blank\">GitHub location for Format Billing CSV Script<\/a>\r\n\r\n\r\n\r\n> **Note**: An alternative to using the billing related csv file is to leverage **PowerBI** and build dashboards by consuming the EA related billing APIs which are available out of the box. These are in preview at the time of the writing of this blog. Parsing tags is still an issue with these. We will cover these in one of the future blog post. ",
		"addpost": "addpost",
		"dated": "Aug 08, 2018",
		"slug": "script-sample-format-ea-billing-usage-csv-for-tags",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>As a system administrator, you will need to work with Enterprise Agreement (EA) related billing data a lot. As such you will need to pull lots of reports based on this consumption and usage related csv file that you get from the EA portal i.e. at address: <a href=\"https:\/\/ea.azure.com\" target=\"_b...\"><\/a><\/p>\n"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Export All OMS Log Analytics Saved Searches",
		"postDate": "25-07-2018",
		"tags": [
			"azure",
			"microsoft",
			"microsoftazure",
			"powershell",
			"sample",
			"script"
		],
		"category": "Azure Script Sample",
		"body": "If you work with OMS Log Analytics then you end up working with lots of queries. To manage the most used queries specific to your environment you save these as Saved Searches. These can be reusable in other projects as well. Therefore, you will want to export these saved searches. \r\n\r\n\r\n### How it works ###\r\n\r\nThis is the most simple but very useful script sample. It exports by simply using the below cmdlet. You can use the below cmdlet alone as well instead of using the whole script, if you are already logged into Azure and have the right subscription selected.\r\n\r\n    (Get-AzureRmOperationalInsightsSavedSearch -ResourceGroupName $ResourceGroupName -WorkspaceName $WorkspaceName).Value.Properties | ConvertTo-Json\r\n\r\nNote that it uses \"***ConvertTo-Json***\" cmdlet to export the Saved Searches to JSON output. You can later reuse this JSON to import these saved searches into a different environment as well. \r\n\r\n### Location of the Script ###\r\n\r\nYou can find this script in GitHub at this location: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Export-OMSLogAnalyticsSavedSearches\" target=\"_blank\">Export Log Analytics Saved Searches<\/a>",
		"savedraft": "savedraft",
		"dated": "Jul 25, 2018",
		"slug": "script-sample-export-all-oms-log-analytics-saved-searches",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>If you work with OMS Log Analytics then you end up working with lots of queries. To manage the most used queries specific to your environment you save these as Saved Searches. These can be reusable in other projects as well. Therefore, you will want to export these saved searches. <\/p>\n<h3>How it...<\/h3>\n",
		"addpost": "addpost",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Export All Azure Automation Account Runbooks and Variables",
		"postDate": "16-07-2018",
		"tags": [
			"azure",
			"microsoft",
			"microsoftazure",
			"powershell",
			"sample",
			"script"
		],
		"category": "Azure Script Sample",
		"body": "When you work with Azure Automation, you build lots of Runbooks over time. When the volume grows, you can't just export each and every Runbook one by one. Add to it the fact, if you have multiple Azure Automation accounts. It becomes a nightmare to download all the Runbooks one by one. \r\n\r\nThere are two ways to export all the Runbooks all at once. \r\n\r\n### First method - Using Azure Automation PowerShell ISE Add-On ###\r\n\r\nYou can install the Azure Automation PowerShell ISE Add-on and connect to your Azure Automation Account. Then you can download all the Runbooks locally and copy the same. This Add-On can be downloaded from GitHub or PowerShell gallery as per the instructions provided here: <a href=\"https:\/\/github.com\/azureautomation\/azure-automation-ise-addon\" target=\"_blank\">Azure Automation PowerShell ISE Add-On<\/a>\r\n\r\n### Second method - Using this script sample ###\r\n\r\nThis script sample requires you to update the input variables for your environment i.e. related to your subscription, Azure Automation account name etc. Then it connects to the Azure using below cmdlet.\r\n\r\n    Add-AzureRmAccount\r\n    Select-AzureRmSubscription -SubscriptionName $SubscriptionName\r\n\r\nThen it exports the Azure Automation Runbooks using below cmdlets. Here it first fetches all the Runbooks and then uses \"*Export-AzureRmAutomationRunbook*\" cmdlet to export these to a local folder.\r\n\r\n    $AllRunbooks = Get-AzureRmAutomationRunbook -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName\r\n    $AllRunbooks | Export-AzureRmAutomationRunbook -OutputFolder $OutputFolder\r\n\r\nFinally, it exports the variables in the environment by using the below cmdlets. Here it first fetches the variables and then uses \"Export-Csv\" cmdlet to export the variables to a csv file. \r\n\r\n    $variables = Get-AzureRmAutomationVariable -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName\r\n    $variablesFilePath = $OutputFolder + \"\\variables.csv\"\r\n    $variables | Export-Csv -Path $variablesFilePath -NoTypeInformation\r\n\r\n\r\n### Location of the script ###\r\n\r\nThis script is located in the Github here: <a href=\"https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/tree\/master\/Scripts\/Export-AllAutomationRunbooksAndVariables\" target=\"_blank\">Export Azure Automation Runbooks and Variables<\/a>",
		"addpost": "addpost",
		"dated": "Jul 16, 2018",
		"slug": "script-sample-export-all-azure-automation-account-runbooks-and-variables",
		"categoryslug": "azure-script-sample",
		"status": "publised",
		"summary": "\n<p>When you work with Azure Automation, you build lots of Runbooks over time. When the volume grows, you can't just export each and every Runbook one by one. Add to it the fact, if you have multiple Azure Automation accounts. It becomes a nightmare to download all the Runbooks one by one. <\/p>\n<p>Th...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Book published on Amazon - Quick and Practical Guide to ARM Templates",
		"postDate": "23-03-2018",
		"tags": [
			"arm",
			"armtemplates",
			"azure",
			"book",
			"ebook",
			"microsoft",
			"microsoftazure",
			"templates"
		],
		"category": "Azure",
		"body": "**Quick and Practical Guide to ARM Templates** is a very non-conventional book. The objective of the book is to help you \"Become Experts in Developing ARM Templates for Microsoft Azure without any prior knowledge\". This book is for both a beginner and intermediate users. \r\n\r\n**Update [03-27-2018]**: This book is available for **FREE** for a limited time only (on 27, 28 and 29th March, 2018 till midnight Pacific Time). <a href=\"https:\/\/www.amazon.com\/dp\/B07C8LSBSN\" target=\"_blank\">**Download Now!!!**<\/a>\r\n\r\nThis is a quick and practical approach to learning ARM Templates for Azure. It covers only the most essential topics that you will need 95% of the time while working with ARM Templates. The goal is to have you working faster and quicker on ARM Templates without compromising any of the best practices. \r\n\r\nThe book assumes that you do not have prior knowledge of ARM Templates. If you have no development background then this book is for you. It starts by building the fundamentals on which ARM Templates are built.  The more practical approach means less theory and more focus on the practical aspects that can help you start working and delivering on ARM Templates.\r\n\r\nYou can view the book on Amazon.com here: https:\/\/www.amazon.com\/dp\/B07C8LSBSN\r\n\r\nYou can also search for the book in your local Amazon marketplace.\r\n\r\n<img src=\"\/images\/15217860175ab49ca149064.png\" alt=\"Quick and Practical Guide to ARM Templates\">",
		"addpost": "addpost",
		"dated": "Mar 27, 2018",
		"slug": "book-published-on-amazon-quick-and-practical-guide-to-arm-templates",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Quick and Practical Guide to ARM Templates<\/strong> is a very non-conventional book. The objective of the book is to help you \"Become Experts in Developing ARM Templates for Microsoft Azure without any prior knowledge\". This book is for both a beginner and intermediate users. <\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Getting Started with Virtual Machine Serial Console access",
		"postDate": "26-03-2018",
		"tags": [
			"azue",
			"compute",
			"console",
			"microsoft",
			"microsoftazure",
			"serial",
			"virtualmachine",
			"vm",
			"preview"
		],
		"category": "Azure",
		"body": "This is the feature we all have been waiting for. This gives power back to administrators in the cloud. **Virtual Machine Console Access** is now available in Preview in Azure. The console is called **Special Administrative Console** (SAC). With this you can perform advanced troubleshooting like correcting firewall rules by fixing iptables, recovering filesystems, locking down the network, interacting and modifying the bootloader etc. \r\n\r\n**Note**: Windows images on Azure do not have **Special Administrative Console** (SAC) enabled by default. SAC is supported on server versions of Windows but is not available on client versions (e.g. Windows 10, Windows 8 or Windows 7).\r\n\r\n### How to Enable SAC on Windows VM ###\r\n\r\nOn a Linux VM, the serial access will be available but for Windows VM you need to perform additional steps in the VM to enable this. The steps to enable are:\r\n\r\n - Login to your VM via Remote Desktop\r\n - From an Administrative command prompt run the following commands \r\n\r\n     `bcdedit \/ems {current} on`\r\n    \r\n `bcdedit \/emssettings EMSPORT:1 EMSBAUDRATE:115200`\r\n\r\n- Reboot the system for the SAC console to be enabled\r\n\r\n### How to Access ###\r\n\r\nCurrently, this option (in Preview at the time of writing this blog) is available only via the portal. To access the Serial Console go to:\r\n\r\n 1. The Virtual Machine (VM) for which you want to access the Serial Console\r\n 2. Ensure that the VM is up and running\r\n 3. Navigate to the  \"**Serial console (Preview)**\" option under \"Support + Troubleshooting\" section in VM settings\r\n\r\nIf the VM is not up and running then you will view the below error.\r\n\r\n    The serial console connection to the VM encountered an error: 'Bad Request'\r\n     (400) - The VM is in a stopped deallocated state.  Please start the VM and retry the serial console connection.\r\n\r\nWhen the VM is starting you will see the below message, which you are connected to the Serial Console.\r\n\r\n<img src=\"\/images\/15222511335abbb57d69110.png\" alt=\"Connecting to SAC\">\r\n\r\n\r\nOnce connected you can run commands like `ch -?` for information on using channels and simply type `?` for general help.\r\n<img src=\"\/images\/15222511405abbb5841a716.png\" alt=\"Connected SAC and Help options\">\r\n\r\n**Note**: The console automatically will disconnect after a period of inactivity.\r\n\r\nThe access is being opened to more and more subscriptions and regions. If you don't see the access today, you just need to wait and it should be coming soon.\r\n",
		"addpost": "addpost",
		"dated": "Mar 26, 2018",
		"slug": "getting-started-with-virtual-machine-serial-console-access",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>This is the feature we all have been waiting for. This gives power back to administrators in the cloud. <strong>Virtual Machine Console Access<\/strong> is now available in Preview in Azure. The console is called <strong>Special Administrative Console<\/strong> (SAC). With this you can perform adva...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Series Index",
		"postDate": "11-03-2018",
		"tags": [
			"azure",
			"azuresecurity",
			"microsoft",
			"microsoftazure",
			"security"
		],
		"category": "Azure Security",
		"body": "Understanding the security is of utmost importance in designing any application architecture. When bringing your applications or infrastructure to Azure or even designing new applications in Azure, you need to be aware of all the ways you can make your application\/design more secure by leveraging various features Azure has to offer.\r\n\r\nThis series talks about various aspects of **security** as related to different aspects of Azure.\r\n\r\nThis blog is an **Index** of various blogs in the series \"Demystifying Azure Security\":\r\n\r\n 1. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-rbac-roles\/\" target=\"_blank\">Understanding RBAC Roles<\/a>\r\n 2. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-custom-rbac-roles\/\" target=\"_blank\">Custom RBAC Roles<\/a>\r\n 3. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-just-in-time-vm-access\/\" target=\"_blank\">Just In Time VM access<\/a>\r\n 4. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-policies-1-basics\/\" target=\"_blank\">Azure Policies - Basics<\/a>\r\n 5. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-policies-2-assigning-a-policy\/\" target=\"_blank\">Azure Policies - Assigning a Policy<\/a>\r\n 6. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-creating-a-custom-policy-part-1-viewing-definition-of-an-existing-policy\/\" target=\"_blank\">Creating a Custom Policy - Part 1 - Viewing Definition of an existing Policy<\/a>\r\n 7. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-creating-a-custom-policy-part-2-understanding-the-policy-structure\/\" target=\"_blank\">Creating a Custom Policy - Part 2 - Understanding the Policy Structure<\/a>\r\n 8. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-creating-a-custom-policy-part-3-defining-your-custom-policy\/\" target=\"_blank\">Creating a Custom Policy - Part 3 - Defining your Custom Policy<\/a>\r\n 9. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-policies-initiative-definitions\/\" target=\"_blank\">Azure Policies - Initiative Definitions<\/a>\r\n 10. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-transparent-data-encryption\/\" target=\"_blank\">Azure SQL Database - Transparent Data Encryption<\/a>\r\n 11. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-auditing-threat-detection\/\" target=\"_blank\">Azure SQL Database - Auditing & Threat Detection<\/a>\r\n 12. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-set-server-firewall\/\" target=\"_blank\">Azure SQL Database - Set Server Firewall<\/a>\r\n 13. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-firewall-rule-for-virtual-networks\/\" target=\"_blank\">Azure SQL Database - Firewall Rule for Virtual Networks<\/a>\r\n 14. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-and-azure-storage-service-endpoints-on-virtual-network\/\" target=\"_blank\">Azure SQL Database and Azure Storage - Service Endpoints on Virtual Network<\/a>\r\n 15. <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-dynamic-data-masking\/\" target=\"_blank\">Azure SQL Database - Dynamic Data Masking<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Mar 20, 2018",
		"slug": "demystifying-azure-security-series-index",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>Understanding the security is of utmost importance in designing any application architecture. When bringing your applications or infrastructure to Azure or even designing new applications in Azure, you need to be aware of all the ways you can make your application\/design more secure by leveraging...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Site Recovery (ASR) - Series Index",
		"postDate": "19-02-2018",
		"tags": [
			"asr",
			"azure",
			"azuresiterecovery",
			"microsoft",
			"microsoftazure"
		],
		"category": "Azure",
		"body": "Outages can happen anytime. There can be different reasons that you may encounter disruptions in the service. It is always good to be prepared. Azure Site Recovery (ASR) ensure business continuity by providing you with a backup plan in case of an outage or a disaster level event. \r\n\r\nThis series talks about various aspects of working with **Azure Site Recovery** or **ASR**. \r\n\r\nThis blog is an **Index** of various blogs in the series:\r\n\r\n - <a href=\"http:\/\/harvestingclouds.com\/post\/troubleshooting-azure-site-recovery-asr-data-replication-not-working\/\" target=\"_blank\">Troubleshooting Azure Site Recovery (ASR) - Data Replication Not Working<\/a>\r\n - <a href=\"http:\/\/harvestingclouds.com\/post\/troubleshooting-azure-site-recovery-asr-data-replication-initiation-issues-part-2\/\" target=\"_blank\">Troubleshooting Azure Site Recovery (ASR) - Data Replication Initiation Issues<\/a>\r\n - <a href=\"http:\/\/harvestingclouds.com\/post\/azure-site-recovery-asr-new-feature-added-to-target-resource-groups\/\" target=\"_blank\">Azure Site Recovery (ASR) - New feature added to target Resource Groups<\/a>\r\n - <a href=\"http:\/\/harvestingclouds.com\/post\/suspending-and-resuming-azure-site-recovery-asr-replication-on-a-single-or-multiple-servers\/\" target=\"_blank\">Suspending and Resuming Azure Site Recovery (ASR) Replication on a single or multiple servers<\/a>\r\n - <a href=\"http:\/\/harvestingclouds.com\/post\/asr-setup-for-vms-running-in-vmware-without-vmware-level-user-access\/\" target=\"_blank\">ASR Setup for VMs running in VMWare without VMware level User Access<\/a>\r\n - <a href=\"http:\/\/harvestingclouds.com\/post\/getting-started-azure-site-recovery-asr-in-new-azure-portal\/\" target=\"_blank\">Getting Started - Azure Site Recovery (ASR) In New Azure Portal<\/a>",
		"addpost": "addpost",
		"dated": "Mar 19, 2018",
		"slug": "azure-site-recovery-asr-series-index",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Outages can happen anytime. There can be different reasons that you may encounter disruptions in the service. It is always good to be prepared. Azure Site Recovery (ASR) ensure business continuity by providing you with a backup plan in case of an outage or a disaster level event. <\/p>\n<p>This ser...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Azure SQL Database - Dynamic Data Masking",
		"postDate": "11-03-2018",
		"tags": [
			"azue",
			"azuresecurity",
			"azuresql",
			"data",
			"database",
			"datamask",
			"datasecurity",
			"dnamicdatamask",
			"dynamic",
			"dynamicdatamasking",
			"mask",
			"masking",
			"microsoft",
			"microsoftazure",
			"security",
			"sql",
			"sqldatabase"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\n\r\n**Dynamic Data Masking** is a feature of Azure SQL Databases, that allows you to hide the sensitive data. E.g. your database contains information regarding the Credit Cards of your customers. When exposing the database you want to ensure that the credit cards are not exposed. They should automatically be presented in the format \"xxxx-xxxx-xxxx-1234\" i.e. only exposing the last 4 digits. \r\n\r\n\r\n### Feature Basics ###\r\n\r\nThis feature can be accessed by navigating to your database and then clicking on the \"**Dynamic Data Masking**\" option under settings. By default, there are no masks applied. Click on \"**+ Add mask**\" to add a new mask.\r\n\r\n**Note** that whatever masks you apply are not applied to the administrators. Additionally, you can provide the SQL users who should be excluded from masking. \r\n\r\nAzure SQL Database will also automatically try to recommend the fields that should be masked.\r\n\r\n<img src=\"\/images\/15224833815abf40b536b22.png\" alt=\"Navigating to the Dynamic Data Masking Option\">\r\n\r\n### Adding Masking Rules ###\r\n\r\nWhen adding Masking Rules you provide below information:\r\n\r\n 1. Name for the mask is auto-populated (based on your selections)\r\n 2. Schema\r\n 3. Table in that schema\r\n 4. Column in the table, where mask should be applied\r\n 5. Masking Criteria\r\n\r\n**Note** that the Masking criteria vary based on the type of the column. E.g. If a column does not have numerical value then the masking criteria for \"Number (random number range)\" will show as disabled.\r\n\r\n<img src=\"\/images\/15224833865abf40bad27e8.png\" alt=\"Adding Masking Rule\">\r\n\r\nThe different masking criteria that you can apply are:\r\n\r\n 1. Default value  (0, xxxx, 01-01-1900)\r\n 2. Credit Card value (xxxx-xxxx-xxxx-1234)\r\n 3. Email (aXXX@XXXX.com)\r\n 4. Number (random number range)\r\n 5. Custom string (prefix [padding] suffix)",
		"addpost": "addpost",
		"dated": "Mar 11, 2018",
		"slug": "demystifying-azure-security-azure-sql-database-dynamic-data-masking",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p><strong>Dynamic ...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Azure SQL Database and Azure Storage - Service Endpoints on Virtual Network",
		"postDate": "10-03-2018",
		"tags": [
			"azue",
			"azuresecurity",
			"azuresql",
			"data",
			"database",
			"endpoint",
			"endpoints",
			"microsoft",
			"microsoftazure",
			"network",
			"security",
			"service",
			"sql",
			"sqldatabase",
			"virtual",
			"virtualnetwork"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\nAzure **Service Endpoints** allow access to SQL or Storage services over the network, without going out of the network. \r\n\r\nTo configure this feature, you can navigate to your Virtual Network and then under the settings, select the \"**Service endpoints**\". Click on \"+Add\" to add a Service Endpoint.\r\n\r\n<img src=\"\/images\/15224831715abf3fe37c1c1.png\" alt=\"Navigating to Service Endpoints\">\r\n\r\nIn the popup, select the provider for which you want to configure the Service Endpoint. \r\n\r\nService Endpoints on the Virtual Networks are available for:\r\n\r\n 1. Microsoft.Sql provider\r\n 2. Microsoft.Storage provider\r\n\r\nAlso, select the subnet on which you want to configure the Service Endpoint and then hit \"**Add**\".\r\n\r\n<img src=\"\/images\/15224831785abf3fea2a4a8.png\" alt=\"Adding Service Endpoint\">\r\n\r\nIt will take some time (approximately 15 minutes) to configure the Service Endpoints at the backend. Once configured, you will see the configured endpoints in the portal as shown below.\r\n<img src=\"\/images\/15224831835abf3fef3682d.png\" alt=\"Deployed Service Endpoint\">\r\n\r\n**Note** that even after you configure service endpoint for SQL you will need to allow access at the SQL Server level as well. Service Endpoint ensures that the communication will happen at the network level. The Firewall configuration for the network is needed to allow that communication via Firewall on the SQL Server. This is explained in detail here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-firewall-rule-for-virtual-networks\/\" target=\"_blank\">Azure SQL Database - Firewall Rule for Virtual Networks<\/a>\r\n\r\nOverall, this is a very powerful feature that is easy to configure and provides you with lots of flexibility. ",
		"addpost": "addpost",
		"dated": "Mar 10, 2018",
		"slug": "demystifying-azure-security-azure-sql-database-and-azure-storage-service-endpoints-on-virtual-network",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p>Azure <strong>Se...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Azure SQL Database - Firewall Rule for Virtual Networks",
		"postDate": "04-03-2018",
		"tags": [
			"azue",
			"azuresecurity",
			"azuresql",
			"data",
			"database",
			"datasecurity",
			"firewall",
			"microsoft",
			"microsoftazure",
			"network",
			"security",
			"sql",
			"sqldatabase",
			"virtual"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\nBefore going through this blog, please make sure you have covered these:\r\n\r\n - <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-set-server-firewall\/\" target=\"_blank\">Set Server Firewall for Azure SQL Databases<\/a>\r\n - <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-and-azure-storage-service-endpoints-on-virtual-network\/\" target=\"_blank\">Service Endpoints for Azure SQL on Virtual Network<\/a>. **Note** that this is pre-requisite for the firewall rules to be configured on the Virtual Network level.\r\n\r\nSetting up the **Firewall Rule for Virtual Networks**, at the SQL Server level, enables you to allow access to a subnet in a Virtual Network in Azure on all the SQL Databases on the SQL Server. The firewall rules are always set at the server level, hence any rule you put will allow access on all the databases on the SQL Server.\r\n\r\nSetting up the Rules is very simple. You navigate to the firewall settings for the SQL Database\/SQL Server (as discussed in the previous blog). Then you focus on the lower section on the blade for Virtual Network Firewall rules as shown below.\r\n\r\n<img src=\"\/images\/15225265255abfe93da6c61.png\" alt=\"Virtual Network Firewall Rules section\">\r\n\r\nNote that you can:\r\n\r\n 1. Add existing virtual network\r\n 2. Create a new virtual network (and provide access)\r\n\r\nAs a best practice, you should plan the virtual network and subnets before the configurations on the SQL Server Firewall. \r\n\r\nWhen you click on \"Add existing virtual network\" you are presented with the below wizard. Here you select:\r\n\r\n 1. The name for the rule. This could be any descriptive name for the rule.\r\n 2. The Subscription where the virtual network exists\r\n 3. Virtual network where you want to allow the access\r\n 4. Subnet name within the Virtual network where you want to allow the access\r\n\r\n<img src=\"\/images\/15224829335abf3ef529038.png\" alt=\"Create\/Update Virtual Network Firewall Rule\">\r\n\r\nBelow, is the screenshot of the rule with values populated. If the Service Endpoint is not enabled for the \"Microsoft.Sql\" provider then you will view a message for the same and the wizard will attempt to enable the same.\r\n\r\n<img src=\"\/images\/15224829395abf3efbae000.png\" alt=\"Virtual Network Firewall Rule Populated\">\r\n\r\nThats all there is to it. Just hit Ok and then hit Save to apply the rule.",
		"addpost": "addpost",
		"dated": "Mar 04, 2018",
		"slug": "demystifying-azure-security-azure-sql-database-firewall-rule-for-virtual-networks",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p>Before going thr...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Azure SQL Database - Set Server Firewall",
		"postDate": "02-03-2018",
		"tags": [
			"azure",
			"azuresecurity",
			"azuresql",
			"database",
			"datasecurity",
			"firewall",
			"microsoft",
			"microsoftazure",
			"security",
			"server",
			"sql",
			"sqldatabase"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\nAzure SQL Databases have a powerful layer of security at the SQL Server level. This layer is provided by the SQL Server **Firewall**. Azure provides you granular control to configure this firewall and to manage who gets access to your Azure SQL Database. By default, everything is blocked by the firewall. If you want to get access to Azure SQL Database then you will have to configure the Firewall at the SQL Server level. Only the IP addresses you configure have access to the SQL Databases on the Server.\r\n\r\nAnother key point to understand is that once you configure a rule then because that rule is applied at the server level, it is applied to all the SQL Databases on that Server. So it is important to ensure that you segregate your databases on different SQL Servers if you don't want to share the access to those databases.\r\n\r\n### Accessing the Firewall Settings ###\r\n\r\nYou can access the firewall settings by navigating to your Azure SQL **Database**. Then at the top of the blade, you will find the option for \"**Set server firewall**\". Click on this button to access the firewall settings.\r\n\r\n<img src=\"\/images\/15224826395abf3dcf84ca9.png\" alt=\"Set Server Firewall option on Azure SQL Database\">\r\n\r\nAnother way to access the settings is on Azure SQL **Servers**. Navigate to the related Azure SQL Server for your database. Under the settings, find the option for \"**Firewalls and virtual networks**\". Clicking on this will also take you to the same firewall settings as the settings are set at the server level in both ways.\r\n\r\n<img src=\"\/images\/15224826455abf3dd50a424.png\" alt=\"Firewall option on Azure SQL Server\">\r\n\r\n\r\n### Firewall Rule Settings ###\r\n\r\nLet us look at the firewall rule settings in more details. \r\n\r\n 1. First, you have the option to enable or disable the **access to Azure services** as the toggle for \"Allow access to Azure services\". This is set to On by default when creating the Database and SQL server. You can disable it here. This option allows Azure services to provide monitoring data and recommend changes at the database level.\r\n 2. Second, you have the option to **configure a Rule**. This is where you configure which IP Addresses have access to the SQL Server.\r\n 3. One commonly used Rule is to open the access for **Client IP**. This is the IP address of the machine from where you are connected to the Azure Portal. This is provided for the common scenario where you want to connect and access the SQL database via SSMS (i.e. SQL Server Management Studio) or by any other way from your development box. There is a button to simply add the rule for allowing Client IP by clicking on \"**+Add client IP**\". The client IP is also authomatically displayed under the \"Allow access to Azure services\" section\r\n 4. Lastly, there is an option to allow access to the SQL databases from a particular Subnet in a Virtual Network in Azure, without having to manually configure their IP addresses. This feature requires **Service Endpoints** to be configured at the Virtual Network level. We will discuss this feature in a later blog. \r\n\r\n<img src=\"\/images\/15224826505abf3ddaaf183.png\" alt=\"Firewall Settings\">\r\n\r\nA typical Rule contains:\r\n\r\n 1. A **Rule Name** - which could be any descriptive name for the rule. E.g. it could be name of the single VM for which you want to configure the access or it could be name of the network for which you are opening the access\r\n 2. **Start IP** - Start of the IP address range for which you want to open the access. E.g. if you want to open access for 10.20.1.0\/24 then the Start IP will be 10.20.1.0\r\n 3. **End IP** - End of the IP address range for which you want to open the access. E.g. if you want to open access for 10.20.1.0\/24 then the End IP will be 10.20.1.255\r\n\r\nNote: If you want to provide access to only one IP address then provide that IP address for both Start and End IP fields.\r\n\r\nNote in the image below that:\r\n\r\n 1. The client IP rule was added by clicking on the \"+Client IP\" button. Note that the Start and End IP are same for this rule\r\n 2. Second is a custom rule which allows access to the SQL Server from a specific VM hosting Website (which will need access to the database)\r\n\r\n<img src=\"\/images\/15224826565abf3de09ea3f.png\" alt=\"Setting Firewall Rules\">\r\n\r\nOnce you are done configuring, just hit Save to apply the firewall rules.\r\n\r\nNext, we will learn about setting up the <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-firewall-rule-for-virtual-networks\/\" target=\"_blank\">Firewall Rule for Virtual Networks<\/a> and also <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-azure-sql-database-and-azure-storage-service-endpoints-on-virtual-network\/\" target=\"_blank\">Service Endpoints for Azure SQL on Virtual Network<\/a>",
		"addpost": "addpost",
		"dated": "Mar 02, 2018",
		"slug": "demystifying-azure-security-azure-sql-database-set-server-firewall",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p>Azure SQL Databa...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Resources - New Azure Log Analytics Language Cheat Sheets",
		"postDate": "19-02-2018",
		"tags": [
			"analytics",
			"azue",
			"language",
			"log",
			"loganalytics",
			"microsoft",
			"microsoftazure",
			"oms",
			"query",
			"querylanguage"
		],
		"category": "Azure",
		"body": "Azure Log Analytics (part of the OMS suite) has a very versatile query language. To investigate and report on the data you need to know the query language at least at the basic level. Recently the language had a complete overhaul with new syntax coming in and various new features being incorporated into the new language. This blog post talks about the resources to quickly learn the new syntax. Specifically, if you know the older syntax or you know T-SQL syntax then how to translate that knowledge. \r\n\r\n### Older to new Query Language syntax ###\r\n\r\nIf you have been working with the older Log Analytics query syntax, then you have two options to convert that knowledge to newer query language syntax:\r\n\r\n 1. Use the in portal legacy syntax converter and learn as you convert\r\n 2. Use the Microsoft provided Cheat Sheet\r\n\r\nWhen you navigate to OMS log analytics portal and go to the Log search section, there you will see a link above the query text window for \"**Show legacy language converter**\". When you click on this link a new text box will appear above the query text box. Type your legacy query and then click on \"**Convert**\" button. The query will be converted into the new language syntax. Click Run to execute the query. If there will be any errors in the query you will be notified of the same. \r\n\r\n<img src=\"\/images\/15212342425aac314289ed9.png\" alt=\"OMS Language Converter\">\r\n\r\nIn the above example, \"Event\" type is being fetched and then only Source, EventLog, EventID properties are selected. In the older format the query syntax used to be:\r\n\r\n    Type=Event | select Source, EventLog, EventID\r\n\r\nIn the newer format the same query looks as below:\r\n\r\n    Event | project Source, EventLog, EventID\r\n\r\nPointers for key query syntax can be found in the complete cheat sheet which can be found here: <a href=\"https:\/\/docs.loganalytics.io\/docs\/Learn\/References\/Legacy-to-new-to-Azure-Log-Analytics-Language\" target=\"_blank\">Legacy to new Azure Log Analytics Query Language cheat sheet<\/a>\r\n\r\n### T-SQL to new Query Language syntax ###\r\n\r\nIf you are well versed in the T-SQL query syntax and are new to OMS Azure Log Analytics, then you can easily translate that to the Log Analytics query language with the help of the cheat sheet provided by Microsoft for the key syntax.\r\n\r\nE.g. if we want to select records for only columns name and resultCode from a table named dependencies then the query syntax in T-SQL will look like:\r\n\r\n    SELECT name, resultCode FROM dependencies\r\n\r\nSyntax for the same query in newer Log Analytics language will look like:\r\n\r\n    dependencies \r\n    | project name, resultCode\r\n\r\nAs you might have guessed already, \"project\" is a key word in newer language to select specific columns. Selecting a table is as simple as typing the name of the table.\r\n\r\nThe complete cheat sheet can be found here: <a href=\"https:\/\/docs.loganalytics.io\/docs\/Learn\/References\/SQL-to-Azure-Log-Analytics\" target=\"_blank\">SQL to Azure Log Analytics query language cheat sheet<\/a>",
		"addpost": "addpost",
		"dated": "Feb 19, 2018",
		"slug": "resources-new-azure-log-analytics-language-cheat-sheets",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Azure Log Analytics (part of the OMS suite) has a very versatile query language. To investigate and report on the data you need to know the query language at least at the basic level. Recently the language had a complete overhaul with new syntax coming in and various new features being incorporat...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Azure SQL Database - Transparent Data Encryption",
		"postDate": "10-02-2018",
		"tags": [
			"azue",
			"azuresecurity",
			"azuresql",
			"data",
			"datasecurity",
			"encryption",
			"microsoft",
			"microsoftazure",
			"security",
			"sql",
			"sqldatabase",
			"transparent",
			"transparentdataencryption",
			"tde"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\n\r\n**Transparent Data Encryption** (**TDE**) is the automated encryption of your data at rest. If configured it encrypts your database, backups of the database and transactional log files at rest. Normally this is configured by default to provide you with an additional layer of security. If this is not configured then you will get a recommendation to configure it in the Azure Security Center. \r\n\r\nTuring Off Transparent data encryption will result in decryption of the complete database and will leave your data vulnerable. When you turn it back On then the database will be encrypted again. Depending upon the size of your database, it may take some time to turn the TDE on or off due to the underlying encryption\/decryption process.\r\n\r\nThis service does not require any changes at the application level. Behind the scene, transparent data encryption performs real-time I\/O encryption and decryption of the data at the page level. Each page is decrypted when it's read into memory and then encrypted before being written to disk.\r\n\r\n**Note**: Even if the database is encrypted with TDE, when you take an export of the database (e.g. creation of BACPAK file) then the backup file is created without encryption. You need to ensure that you safeguard\/encrypt the backup files before sharing these on an open network.\r\n\r\n### Configuring TDE at the Database level ###\r\n\r\n**Transparent Data Encryption** (**TDE**) can be enabled or disabled at every individual Database level. The configuration is a very simple toggle between on and off. To configure this, navigate to your Azure SQL Database. In the settings, select \"Transparent Data Encryption\". The set the value for \"Data Encryption\" On or Off. \r\n\r\nNotice the Encryption status. If you want your data to be encrypted, then the encryption status should say \"Encrypted\" with a green tick mark. \r\n\r\n<img src=\"\/images\/15221022915ab9701353492.png\" alt=\"Configuring Transparent Data Encryption\">\r\n\r\n### Configuring to use your own Key with TDE ###\r\n\r\nYou can **use your own Key for encryption** with Transparent Data Encryption. If you do not configure to use your own key, then a service managed certificate is used for encryption and decryption.\r\n\r\nTo do this you will need to upload your key to an Azure Key Vault or generate a new key within the Key Vault, which is very easy to configure. Once you have a key in an Azure Key Vault, you will be able to use the same with Transparent Data Encryption (TDE). \r\n\r\nThis setting can't be configured at a Database level. Instead, this has to be configured at the server level. Navigate to the underlying Azure SQL Server (where the SQL Database is hosted). Then follow the below steps:\r\n\r\n 1. In the settings, click on the Transparent Data Encryption\r\n 2. Select \"Yes\" to Use your own key. \r\n 3. Then click on \"Select a Key\" and then select the key from your Azure Key Vault. Alternatively, you can select to \"Enter Key Identifier\". \r\n 4. Once the key is configured, select \"Save\" to save the settings.\r\n\r\n<img src=\"\/images\/15221022965ab9701842974.png\" alt=\"Using own Key for encryption with Transparent Data Encryption\">\r\n\r\nThis option provides you with all the security at the data level (at rest) while ensuring you have complete control over the process.\r\n",
		"addpost": "addpost",
		"dated": "Feb 17, 2018",
		"slug": "demystifying-azure-security-azure-sql-database-transparent-data-encryption",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p><strong>Transpar...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Azure SQL Database - Auditing & Threat Detection",
		"postDate": "17-02-2018",
		"tags": [
			"audit",
			"auditing",
			"azue",
			"azuresecurity",
			"azuresql",
			"database",
			"detection",
			"microsoft",
			"microsoftazure",
			"security",
			"sql",
			"sqldatabase",
			"threat"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\n**Auditing & Threat Detection** in Azure SQL Database is a very simple to configure yet very powerful security feature. **Auditing** feature audits all activity on your database to a Storage Account. You can determine the number of days for which you want to retain the data. It helps you remain compliant. In an event of any failure or compliance breach, you can go to the audit logs and can pinpoint the exact cause of the issue if this feature is enabled. \r\n\r\n**Threat Detection** is an advanced feature, where Microsoft runs various algorithms under the hood and determines the pattern and identifies any potential attacks on your data. E.g. SQL Injection or patterns like SQL Injection can be detected when this feature is enabled. Please note that the Threat Detection feature has additional cost linked to it. It costs $15\/server\/month. It will be free for the first 60 days. Note that you can enable Auditing without enabling Threat Detection. But you can't enable Threat Detection without enabling Auditing on the data first. \r\n\r\nSQL Threat Detection integrates alerts with Azure Security Center. If any anomalous activity is detected an alert is raised, you can get notification via email and can also review the same within the portal. You get real-time actionable alerts. Each alert also contains the information regarding how to mitigate the alert.\r\n\r\n### Configurations ###\r\n\r\nTo configure Auditing and Threat Detection at the database level, navigate to the database. Then follow the below steps:\r\n\r\n 1. In the database settings, click on \"Auditing and Threat Detection\"\r\n 2. You can optionally configure the settings at the Server level by click on the link \"View server settings\"\r\n 3. Next, toggle the \"Auditing\" setting on or off. Select the storage account and retention in the number of days. \r\n 4. Next, you can configure the \"Threat Detection\" on or off. If you toggle it on, then you have the option of selecting which type of Threats you want to detect.\r\n 5. You also have the option of configuring Email notifications which work with the Threat Detection.\r\n\r\n<img src=\"\/images\/15220454795ab89227d4b60.png\" alt=\"Auditing and Threat Detection Configuration\">\r\n\r\nWhen configuring Audit Logs Storage, you can select any subscription under the tenant and a storage account in that subscription. You can then select Retention in number of Days. When this number is set to Zero then that means unlimited retention. You can select a maximum of 3285 number of days for this value. You can also select whether to use a Primary or Secondary key while accessing the Storage Account for writing the logs.\r\n\r\n<img src=\"\/images\/15220454845ab8922cbf5d7.png\" alt=\"Audit Logs Storage Configurations\">\r\n\r\nUnder Threat Detection types, you can select any one or all of the following types:\r\n\r\n 1. SQL injection\r\n 2. SQL injection vulnerability\r\n 3. Anomalous client login\r\n\r\n<img src=\"\/images\/15220454895ab8923166b5d.png\" alt=\"Threat Detection Types\">\r\n\r\n\r\n\r\n### Enabling at Database level vs Server level ###\r\n\r\nIf Blob Auditing or Threat Detection are enabled on the server, they will always apply to the database, regardless of the database settings.\r\n\r\nAt the server level, the configuration is almost identical. You need to navigate to the related Azure SQL Server first (instead of the SQL Database). Notice at the top of the below screenshot, it says \"SQL server\" instead of \"SQL database\". Then navigate to it's \"Auditing and Threat Detection\" section and perform the configurations similar to above sections. \r\n\r\n<img src=\"\/images\/15220454945ab8923632728.png\" alt=\"Audit and Threat Detection at the server level\">\r\n\r\n\r\n\r\n",
		"addpost": "addpost",
		"dated": "Feb 10, 2018",
		"slug": "demystifying-azure-security-azure-sql-database-auditing-threat-detection",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p><strong>Auditing...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Custom RBAC Roles",
		"postDate": "04-02-2018",
		"tags": [
			"azure",
			"azureresourcemanager",
			"azuresecurity",
			"custom",
			"customroles",
			"microsoft",
			"microsoftazure",
			"roles",
			"security"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\nBefore going through this blog, please ensure that you have visited the basics of RBAC Roles in general, explained in a primer here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-rbac-roles\/\" target=\"_blank\">Demystifying Azure Security - RBAC Roles<\/a>.\r\n\r\nThis blog explains an easy approach to understand and create your own Custom RBAC Roles in Azure (ARM model). We will inspect an existing simple role and will reverse engineer the way to create Custom RBAC Roles. \r\n\r\n### Inspecting Existing Role's Definition ###\r\n\r\nStart by inspecting any existing Role's Definition. To do this run the cmdlet **Get-AzureRMRoleDefinition** and provide the name of any built-in RBAC Role. For this blog, run the below script to inspect the \"Reader\" and \"Virtual Machine Contributor\" roles.\r\n\r\n    Login-AzureRMAccount\r\n    \r\n    Get-AzureRMRoleDefinition -Name \"Reader\" | ConvertTo-Json | Out-File C:\\rbacrole-reader.json\r\n\r\n    Get-AzureRMRoleDefinition -Name \"Virtual Machine Contributor\" | ConvertTo-Json | Out-File C:\\rbacrole-VMContributor.json\r\n\r\n\r\nIf you open and inspect the \"rbacrole-reader.json\" file you will see the JSON similar to below:\r\n\r\n    {\r\n        \"Name\":  \"Reader\",\r\n        \"Id\":  \"aaaa11a1-3333-48ef-bd42-f606fba81ae7\",\r\n        \"IsCustom\":  false,\r\n        \"Description\":  \"Lets you view everything, but not make any changes.\",\r\n        \"Actions\":  [\r\n                        \"*\/read\"\r\n                    ],\r\n        \"NotActions\":  [\r\n    \r\n                       ],\r\n        \"AssignableScopes\":  [\r\n                                 \"\/\"\r\n                             ]\r\n    }\r\n\r\nNotice above that there are below sections in the definition:\r\n\r\n 1. **Name** - Name of the role\r\n 2. **Id** - unique guid for the role\r\n 3. **IsCustom** - boolean value. \"true\" for the Custom Roles and \"false\" for the built-in roles\r\n 4. **Description** - description of the role\r\n 5. **Actions** - Allowed list of actions for the Role\r\n 6. **NotActions** - Not Allowed list of actions for the Role\r\n 7. **AssignableScopes** - Scope at which this role can be assigned. E.g. all the subscription Ids. It's mandatory that the RBAC role contains the explicit subscription IDs where it is used otherwise you will not be able to use the role.\r\n\r\n\r\n### Understanding Actions and NotActions ###\r\n\r\nAs mentioned before, Actions describe the allowed list of action for the Role whereas the NotActions describe the not allowed actions for the Role. You can use wildcard * and special syntax to define the Actions and NotActions, as per the Microsoft documentation here: <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/active-directory\/role-based-access-control-custom-roles\" target=\"_blank\">Create custom roles for Azure Role-Based Access Control<\/a>:\r\n\r\nOperation strings that contain wildcards (\\*) grant access to all operations that match the operation string. For instance:\r\n\r\n* `*\/read` grants access to read operations for all resource types of all Azure resource providers.\r\n* `Microsoft.Compute\/*` grants access to all operations for all resource types in the Microsoft.Compute resource provider.\r\n* `Microsoft.Network\/*\/read` grants access to read operations for all resource types in the Microsoft.Network resource provider of Azure.\r\n* `Microsoft.Compute\/virtualMachines\/*` grants access to all operations of virtual machines and its child resource types.\r\n* `Microsoft.Web\/sites\/restart\/Action` grants access to restart websites.\r\n\r\nUse `Get-AzureRmProviderOperation` (in PowerShell) or `azure provider operations show` (in Azure CLI) to list operations of Azure resource providers. You may also use these commands to verify that an operation string is valid and to expand wildcard operation strings.\r\n\r\n\r\n    Get-AzureRMProviderOperation Microsoft.Compute\/virtualMachines\/*\/action | FT Operation, OperationName\r\n    \r\n    Get-AzureRMProviderOperation Microsoft.Network\/*\r\n\r\n### Defining a Custom role ###\r\n\r\nLet's define a custom role, who can start or restart a VM in Azure but can't open a support ticket.\r\n\r\nSave the following code as \"yourCustomRole01.json\" file on your C drive (or any other location).\r\n\r\n    {\r\n      \"Name\": \"Virtual Machine Start and Restart\",\r\n      \"Id\": \"7ed03a9f-b372-4341-ba8d-38ef8e614038\",\r\n      \"IsCustom\": true,\r\n      \"Description\": \"Can restart virtual machines but can't open support tickets.\",\r\n      \"Actions\": [\r\n        \"Microsoft.Compute\/virtualMachines\/start\/action\",\r\n        \"Microsoft.Compute\/virtualMachines\/restart\/action\"\r\n      ],\r\n      \"NotActions\": [\r\n        \"Microsoft.Support\/*\"\r\n      ],\r\n      \"AssignableScopes\": [\r\n        \"\/subscriptions\/aaaaaaaa-1111-1111-1111-111111111111\",\r\n        \"\/subscriptions\/aaaaaaaa-2222-2222-2222-222222222222\",\r\n        \"\/subscriptions\/aaaaaaaa-3333-3333-3333-333333333333\/resourceGroups\/RG-Prod-USE2\"\r\n      ]\r\n    }\r\n\r\nNotice the Action and NotAction area are set as per the requirements.\r\n\r\nAlso, note that under Assignable Scope the role is available for assignment to all Resources and Resource Groups in the first two subscriptions but only in Resource Group named \"RG-Prod-USE2\" for the third subscription in the list.\r\n\r\n### Creating New Custom role ###\r\n\r\nOnce you have the definition ready in a JSON file, you can use the \"**New-AzureRMRoleDefinition**\" cmdlet to create the Custom Role Definition, as shown below. Make sure to alter the path to the json file as per your environment.\r\n\r\n    New-AzureRMRoleDefinition -InputFile \"C:\\yourCustomRole01.json\"\r\n\r\nNow you will be able to use this new Custom Role while assigning access to someone. You will be able to tweak the access and provide only the access that you need to your internal and external resources.",
		"addpost": "addpost",
		"dated": "Feb 04, 2018",
		"slug": "demystifying-azure-security-custom-rbac-roles",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p>Before going thr...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Azure Policies - Initiative Definitions",
		"postDate": "28-01-2018",
		"tags": [
			"azue",
			"azuresecurity",
			"custompolicy",
			"definitions",
			"initiative",
			"initiativedefinition",
			"microsoft",
			"microsoftazure",
			"policies",
			"policy",
			"security"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\n**Initiative Definitions** are a great way to combine and apply multiple policies together. They are a group of policy definitions to achieve a singular goal. These are the Microsoft recommended way to use the Policies.  \r\n\r\nE.g. You want to combine a set of policy definitions for the compute and related resources. You want to apply following set of policies:\r\n\r\n 1. Allowed locations - to restrict locations where resources can be deployed\r\n 2. Allowed SKUs - to restrict SKUs for the VMs e.g. VMs can be created with SKU Standard_DS2_v2 only\r\n 3. Enforce Tags and it's default value - to enforce the usage of Tags on resources\r\n\r\nInstead of managing and assigning the policies separately, you can club these policies together in an **Initiative Definition** and then assign the same.\r\n\r\n### Defining Initiative Definition ###\r\n\r\nTo create a new Initiative Definition you go to your Subscription and then go to the Policies section under Settings. Within Policies go to the **Definitions** section under Authoring. Here you can click on the \"Initiative Definitions\" tab to view the existing definitions. Click on the \"+Initiative definition\" to create a new Initiative Definition.\r\n\r\n<img src=\"\/images\/15220373735ab8727dc341d.png\" alt=\"Creating Initiative Definition\">\r\n\r\nThe new Initiative Definition blade with open up. Here you can create the definition. \r\n\r\n 1. The first section, as shown below, is similar to a Policy definition. You will provide the basic information here like Definition location, Name, Description and Category. \r\n 2. On the right side, select the Policies which want to be part of this Initiative Definition in the section \"Available Definitions\". Select and Add all the policies that you want to group together.\r\n 3. Configure parameters for the selected Policies in the \"Policies and Parameters\" section. If you selected a wrong policy, you can delete the policy in this section as well. \r\n\r\n<img src=\"\/images\/15220373785ab87282e8f55.png\" alt=\"Initiative Definition Blade\">\r\n\r\n\r\n### Initiative Parameters ###\r\n\r\nContinuing with the previous section of the Policy definition, you have lots of options when configuring parameters under the \"Policies and Parameters\" section. You can either \"**Set value**\" right within the Initiative Definition, or you can \"**Use Initiative Parameter**\". Set the values within the definition if you don't want to change during the assignment. If you want to set the values dynamically then use the Initiative Parameters.\r\n\r\n**Initiative Parameters** are used to parameterize the Initiative Definition. These can be set from the list of allowed values (a subset of all the values) during the assignment.\r\n\r\n<img src=\"\/images\/15220373835ab87287b145a.png\" alt=\"Options for setting values for Parameters\">\r\n\r\nWhen you select to use an Initiative Parameter for any value, then a parameter is automatically created. \r\n\r\n<img src=\"\/images\/15220373895ab8728d4f4b0.png\" alt=\"Initiative Parameters\">\r\n\r\nYou can create your own Initiative parmeters as well. If an Initiative parameter is not being used then you won't be able to save that definition. You will get \"Bad Request\" while trying to save the definition.\r\n\r\n<img src=\"\/images\/15220373945ab87292397f6.png\" alt=\"Option for creating new Initiative Parameter\">\r\n\r\n\r\n \r\n### Assigning Initiative Definition ###\r\n\r\nThe Initiative assignment is exactly same as the Policy Assignment. All the options are similar as well. You provide value to the parameters within the Initiative Definition for all the policies, during the assignment.\r\n\r\n<img src=\"\/images\/15220373995ab872973ab67.png\" alt=\"Assigning Initiative Definition\">\r\n\r\n",
		"addpost": "addpost",
		"dated": "Jan 28, 2018",
		"slug": "demystifying-azure-security-azure-policies-initiative-definitions",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p><strong>Initiati...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Fixing the error - The subscription is not registered to use provider",
		"postDate": "22-01-2018",
		"tags": [
			"azure",
			"azureresourcemanager",
			"microsoft",
			"microsoftazure"
		],
		"category": "Azure",
		"body": "This blog shows you simple step to resolve the provider registration error, that you can come across while working programmatically with Azure (in Azure Resource Manager model).\r\n\r\nYou can come across this error while running a PowerShell cmdlet or anywhere else: **The subscription 'xxxxxx-xxxx-xxx-xxxx-xxxxxxxx' is not registered to use providername**. E.g. in the below screenshot I got the error *The subscription '8c665920-2c37-419f-81fb-99d737cc4697' is not registered to use microsoft.insights*. \r\n\r\n<img src=\"\/images\/15212142425aabe322e6b05.png\" alt=\"Provider Error\">\r\n\r\nTo resolve this error you will need to navigate to the Azure Portal (i.e. https:\/\/portal.azure.com ). Authenticate to the portal with your credentials. Navigate to Subscriptions section. If you don't see this section then click on \"All Services\" and then search for Subscription. Once in the subscriptions blade, select the subscription for which you have been getting the error. If there was only one subscription then click on that. In the selected subscription's blade follow the below steps:\r\n\r\n 1. Click on the Resource Providers\r\n 2. In the list of providers, find the one for which you have been getting error and then click on \"Register\" link in front of it\r\n 3. The provider will go into \"Registering\" state\r\n 4. Once completed, the provider will then go into \"Registered\" state\r\n\r\n<img src=\"\/images\/15212142785aabe346ede90.png\" alt=\"Subscription Settings\">\r\n\r\nNow retry the cmdlet or API you were trying before. It will not generate the provider error now. ",
		"addpost": "addpost",
		"dated": "Jan 22, 2018",
		"slug": "fixing-the-error-the-subscription-is-not-registered-to-use-provider",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>This blog shows you simple step to resolve the provider registration error, that you can come across while working programmatically with Azure (in Azure Resource Manager model).<\/p>\n<p>You can come across this error while running a PowerShell cmdlet or anywhere else: <strong>The subscription 'xxx...<\/strong><\/p>\n"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Creating a Custom Policy - Part 3 - Defining your Custom Policy",
		"postDate": "06-01-2018",
		"tags": [
			"azue",
			"azuresecurity",
			"custompolicy",
			"microsoft",
			"microsoftazure",
			"policies",
			"policy",
			"security"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\nAs discussed earlier, the policies provide a way to control what is allowed and what is not allowed in your environment. Earlier we looked at how to view the definition of existing policies and discussed the structure of the policies in detail. Now it's time to put the knowledge together and define a policy.\r\n\r\n### Getting the JSON ready for the Policy Definition ###\r\n\r\nHave the JSON ready for the Policy Definition. If you are going to deploy the policy via Portal then all you need is the Policy Rule portion of the definition. For this post, let's use the sample policy definition for \"*Only allow a certain VM platform image*\" located here: https:\/\/docs.microsoft.com\/en-us\/azure\/azure-policy\/scripts\/allow-certain-vm-image\r\n\r\nVarious other samples are provided by Microsoft at this link: <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/azure-policy\/json-samples\" target=\"_blank\">Templates for Azure Policy<\/a>\r\n\r\nThis sample policy, enforces the end users to use only a certain version of the Ubuntu only. \r\n\r\nThe policy definition looks as below:\r\n\r\n    {\r\n        \"type\": \"Microsoft.Authorization\/policyDefinitions\",\r\n        \"name\": \"platform-image-policy\",\r\n        \"properties\": {\r\n            \"displayName\": \"Only allow a certain VM platform image\",\r\n            \"description\": \"This policy ensures that only UbuntuServer, Canonical is allowed from the image repository\",\r\n            \"parameters\": {},\r\n            \"policyRule\": {\r\n                \"if\": {\r\n                    \"allOf\": [\r\n                        {\r\n                            \"field\": \"type\",\r\n                            \"in\": [\r\n                                \"Microsoft.Compute\/disks\",\r\n                                \"Microsoft.Compute\/virtualMachines\",\r\n                                \"Microsoft.Compute\/VirtualMachineScaleSets\"\r\n                            ]\r\n                        },\r\n                        {\r\n                            \"not\": {\r\n                                \"allOf\": [\r\n                                    {\r\n                                        \"field\": \"Microsoft.Compute\/imagePublisher\",\r\n                                        \"in\": [\r\n                                            \"Canonical\"\r\n                                        ]\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"Microsoft.Compute\/imageOffer\",\r\n                                        \"in\": [\r\n                                            \"UbuntuServer\"\r\n                                        ]\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"Microsoft.Compute\/imageSku\",\r\n                                        \"in\": [\r\n                                            \"14.04.2-LTS\"\r\n                                        ]\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"Microsoft.Compute\/imageVersion\",\r\n                                        \"in\": [\r\n                                            \"latest\"\r\n                                        ]\r\n                                    }\r\n                                ]\r\n                            }\r\n                        }\r\n                    ]\r\n                },\r\n                \"then\": {\r\n                    \"effect\": \"deny\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nLook at the policy rule section. Let's look at various sections more closely.\r\n\r\n 1. ***if*** condition defines the policy condition\r\n 2. ***allOf*** ensures that all the conditions must be true\r\n 3. ***field type*** is specified as Disks, Virtual Machines and VM scale sets under Microsoft.Compute\r\n 4. Next section defines a nested condition, which evaluates true if actual VM image used is not equal to combination of all of the conditions specified. \r\n 5. ***then*** section defines what should happen. In this case it says to ***deny*** the operation, i.e. the VM provisioning will fail with validation error for not conforming to the policy.\r\n\r\nNote that there are no parameters used in this policy definition.\r\n\r\n### Defining Policy using Portal ###\r\n\r\nFor defining the policies via Azure Portal, navigate to the Policies under settings of your Subscription. Click on the Definitions and then click on \"**+Policy Definition**\" at the top.\r\n\r\n<img src=\"\/images\/15218358115ab55f2336e11.png\" alt=\"Defining New Policy\">\r\n\r\nA new blade will open where you can define the policy. Provide the details as follows:\r\n\r\n 1. Provide the policy definition's location. This will be your subscription in which you want the definition to exist.\r\n 2. Provide a Display Name and Description of the policy. Try to be as descriptive as possible\r\n 3. Either create a new Category for the policy or use one of the existing ones\r\n 4. Copy and paste your policy definition. In the portal, only provide the \"policyRule\" section. \r\n\r\nThe section for policyRule will look something similar to below.\r\n\r\n\r\n    {\r\n        \"policyRule\": {\r\n          all content here\r\n        }\r\n    }\r\n\r\n\r\n<img src=\"\/images\/15218358165ab55f28ad5a4.png\" alt=\"New Policy Definition Blade\">\r\n\r\nHit **Save** to create the Policy Definition. You can now start assigning this policy in your environment.\r\n\r\n### Defining Policy using PowerShell ###\r\n\r\nEnsure that you have latest version of Azure PowerShell installed. Then using PowerShell to deploy the policy is as easy as executing below two cmdlets:\r\n\r\n 1. ***New-AzureRmPolicyDefinition*** - to create the policy definition \r\n 2. ***New-AzureRMPolicyAssignment*** - to use the policy and assign the policy at a scope defined\r\n\r\nStore the policy in a json file on your computer. Ensure that you only save the \"if-then\" condition in curly parenthesis. This will be used as an input to the cmdlet. The file should look similar to below:\r\n\r\n    {\r\n                \"if\": { <<content here>>},\r\n                \"then\":{ <<content here>>}\r\n    }\r\n\r\n\r\nTo create the policy definition use a code similar to below. Ensure to update the file name and path as per your environment.\r\n\r\n    $definition = $definition = New-AzureRmPolicyDefinition -Name \"RestrictingUbuntuVMVersion\" -DisplayName \"Restrict Ubuntu version for VM Deployment\" -Description \"Detailed Description here\" -Policy \"C:\\temp\\CustomPolicyDefinition.json\"\r\n    \r\n    \r\n\r\nTo use the policy, do the assignment using a code similar to below:\r\n\r\n    $assignment = New-AzureRMPolicyAssignment -Name <customAssignmentName> -Scope <SubscriptionId>  -PolicyDefinition $definition\r\n    \r\nThat is all there is to defining and using your custom policy.\r\n",
		"addpost": "addpost",
		"dated": "Jan 14, 2018",
		"slug": "demystifying-azure-security-creating-a-custom-policy-part-3-defining-your-custom-policy",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p>As discussed ear...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Just In Time VM access",
		"postDate": "10-01-2018",
		"tags": [
			"azure",
			"azuresecurity",
			"microsoft",
			"microsoftazure",
			"security",
			"vm"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\n**Just in time VM access** is a feature under **Azure Security Center**. In simple terms it allows you to control access to a VM. When you enable JIT, all access is locked down on the VM on all ports. This is done via Network Security Group (NSG) rules. The access is granted only for the duration allowed and also only on the ports requested. And then everything is locked down again at the end of the duration.\r\n\r\nThe attackers are leveraging various ways to get into your environment. One such way is using Bots to automate and Brute Force method to attempt entering in your environment. If you need to access a VM, in your environment, from Internet without VPN (e.g. to change some files on a Web app VM) then you are potentially opening up 3389 port on the VM and that can become a target for the attackers. Locking down the VM except when you need it and only for the duration of the requirement, reduces these risks significantly. \r\n\r\n### Pre-requisites ###\r\n\r\nThe key pre-requisites to be able to use this feature are:\r\n\r\n 1. The Azure Security Center needs to be upgraded to Advanced Security as shown below\r\n 2. The VM on which you want to configure JIT access should have a Network Security Group (NSG) linked to it. If it doesn't have any then you can create one and associate it with the network interface of the VM.\r\n\r\nThe first pre-requisite requires you to upgrade the Security Center to Advanced Security that comes with **Standard Tier**. You can upgrade from any of the advanced features. The portal will automatically prompt you to upgrade as shown below:\r\n\r\n<img src=\"\/images\/15212356695aac36d55f4be.png\" alt=\"Advanced Security in Security Center\">\r\n\r\n### How to Access and Configure it ###\r\n\r\nTo configure this go to Azure **Security Center**. Within Security Center go to the \"Advanced Cloud Defense\" category and then click on \"Just in time VM access\" link as shown below:\r\n\r\n<img src=\"\/images\/15212354315aac35e7b2c2d.png\" alt=\"JIT in Security Center\">\r\n\r\nNext follow the below steps to enable JIT on a VM:\r\n\r\n 1. Ensure that you are in the JIT section of Security Center\r\n 2. Go to the \"Recommended\" tab. This will show you all the VMs in your environment. \r\n 3. Click on the VM for which you want to enable Just in Time access. You can select multiple VMs here.\r\n 4. Click on the \"Enable JIT on x VMs\" button\r\n\r\n<img src=\"\/images\/15212369445aac3bd0c8b26.png\" alt=\"Enabling JIT\">\r\n\r\nYou will be presented with various settings for enabling JIT. These settings can be configured as:\r\n\r\n 1. By default, various common ports are configured for JIT access with 3 hours time range. E.g. 3389 for RDP. Click on any of the default ports to tweak the settings.\r\n 2. You can add more ports and protocols by clicking on the \"Add\" button at the top.\r\n 3. Tweak the settings on the new blade that opens up.\r\n 4. Click on \"Save\" to save your settings.\r\n\r\n<img src=\"\/images\/15212369535aac3bd974b55.png\" alt=\"Settings while enabling JIT\">\r\n\r\nThat's all there is to it. Once JIT is configured you can view the VM in the \"Configured\" tab.\r\n\r\n### Requesting access and activity log in JIT ###\r\n\r\nYou can request access and perform various other management operations by following below steps:\r\n\r\n 1. Once the JIT is configured, the VM will show up in the \"Configured\" tab as shown below. \r\n 2. Click on the VM that you want to manage or request access to. \r\n 3. As soon as you click, \"Request access\" button will start showing. You can click the button and it will ask for the number of hours that you need the access and the corresponding ports on which you need the access. Please note that only ports configured earlier can be granted access.\r\n 4. Click on the ellipse i.e. 3 dots in front of the VM record and you will see various options. Using these options you can view Properties. You can view the Activity log for previous requests and any attempts on attack. You can also Edit or Remove the access.\r\n\r\n<img src=\"\/images\/15212369585aac3bde79755.png\" alt=\"Requesting access and activity log in JIT\">\r\n\r\n\r\n### Adding non-Azure computers ###\r\n\r\nYou can add non-Azure computers for an extra fee per Node. Cost is calculated based on 15 USD\/Node\/Month. Resources that count as a node are VMs and computers. The selected security tier will be applied to current and new resources. For more information, visit <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/security-center\/security-center-pricing\" target=\"_blank\">Microsoft Security Center's Standard tier for enhanced security<\/a> information page.\r\n\r\nEnsure that you have onboarded the non-Azure computers to a linked Azure Log Analytics workspace. This is required in order to onboard non-Azure computers to Security Center.",
		"addpost": "addpost",
		"dated": "Jan 10, 2018",
		"slug": "demystifying-azure-security-just-in-time-vm-access",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p><strong>Just in ...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Troubleshooting Azure Site Recovery (ASR) - Data Replication Initiation Issues - Part 2",
		"postDate": "04-01-2018",
		"tags": [
			"azure",
			"azuresiterecovery",
			"microsoft",
			"microsoftazure",
			"troubleshooting"
		],
		"category": "Azure",
		"body": "This is the second part of troubleshooting Azure Site Recovery (ASR) Data replication issues. Part 1 is located here:  <a href=\"http:\/\/harvestingclouds.com\/post\/troubleshooting-azure-site-recovery-asr-data-replication-not-working\/\" target=\"_blank\">Troubleshooting Azure Site Recovery (ASR) - Data Replication Not Working<\/a>\r\n\r\nGo through the part 1 before this blog as that talks about the location of logs and various preliminary steps. This blog talks about the issue where you are not even able to enable Data Replication for a server. \r\n\r\n### Preliminary Checks ###\r\n\r\nPerform the following basic checks related to connectivity:\r\n\r\n - Ensure that the ASR management server has connectivity with Azure.\r\n - Ensure connectivity between the management server (process server) and the source machine which you are trying to replicate. Ensure that the source machine is accessible from the process server.\r\n  - You will also need to enable and allow \u201cFile and Printer Sharing\u201d on the source machine in the Windows Firewall. \r\n - Ensure that the account that you use for enabling the protection has administrator rights on the source machine. This is needed for installation of the Mobility services agent on the source machine.\r\n - Also allow Windows Management Instrumentation (WMI) in the Windows Firewall, if not already.\r\n - Disable remote User Account Control (UAC) if you are using local administrator account to install the mobility service.\r\n\r\n\r\n### Checking Services ###\r\n\r\nAlso, check whether the following services are running and configured correctly on the source machine:\r\n\r\n 1. If **Volume Shadow Copy(VSS)** service Startup Type is set to Disabled, change it to Automatic.\r\n 2. If **COM+ System Application(COMSysApp)** service Startup Type is to Disabled, change it to Automatic.\r\n 3. If the Microsoft **Distributed Transaction Coordinator Service (MSDTC)** Startup Type is set to Disabled, change it to Automatic.\r\n 4. If the service Startup Types were already set to Automatic, check if COM+ enumeration succeeds. a) You check COM+ enumeration by Component Services (comexp.msc) b) Browse to Component Service -> Computers -> My Computer -> COM+ Application. You should be able to expand the System Application node and see the contents under that node. c) Ensure that Volume Shadow Copy Service is listed under Component Service -> Computers -> My Computer -> DCOM config\r\n\r\n### Alternate Option ###\r\n\r\nIf for any reason you can't enable any of the above steps, e.g. if you can't provide admin access to the service account on the source machine or disable remote UAC, then you have an alternative option. You can install the Mobility services agent on the source machine prior to enabling the protection. You will still need the services to be configured appropriately but will not need admin access while enabling the protection. To install the mobility services agent, you have various options:\r\n\r\n* [Install using software deployment tools like System Center Configuration Manager](vmware-azure-mobility-install-configuration-mgr.md)\r\n* [Install with Azure Automation and Desired State Configuration (Automation DSC)](vmware-azure-mobility-deploy-automation-dsc.md)\r\n* [Install manually from the UI](vmware-azure-install-mobility-service.md#install-mobility-service-manually-by-using-the-gui)\r\n* [Install manually from a command prompt](vmware-azure-install-mobility-service.md#install-mobility-service-manually-at-a-command-prompt)\r\n* [Install using the Site Recovery push installation](vmware-azure-install-mobility-service.md#install-mobility-service-by-push-installation-from-azure-site-recovery)\r\n\r\n\r\nAll these options are described in details here: <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/site-recovery\/vmware-azure-install-mobility-service\" target=\"_blank\">Install the Mobility service<\/a>\r\n\r\n### Next Steps ###\r\n\r\nRestart the job after ensuring all the pre-requisites as described in previous sections. If you are still facing issues, revisit the Part 1 of the troubleshooting series as mentioned at the beginning of this blog. Let us know in comments below if the issue persists. \r\n",
		"addpost": "addpost",
		"dated": "Jan 08, 2018",
		"slug": "troubleshooting-azure-site-recovery-asr-data-replication-initiation-issues-part-2",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>This is the second part of troubleshooting Azure Site Recovery (ASR) Data replication issues. Part 1 is located here:  <a href=\"http:\/\/harvestingclouds.com\/post\/troubleshooting-azure-site-recovery-asr-data-replication-not-working\/\" target=\"_blank\">Troubleshooting Azure Site Recovery (ASR) - Data ...<\/a><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Creating a Custom Policy - Part 2 - Understanding the Policy Structure",
		"postDate": "08-01-2018",
		"tags": [
			"azue",
			"azuresecurity",
			"custom",
			"custompolicy",
			"microsoft",
			"microsoftazure",
			"policy",
			"security"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>. Ensure that you have read earlier blogs about the basics of Azure Policies before reading this blog.\r\n\r\n### Structure of a Policy JSON Definition ###\r\n\r\nPolicy definitions are written in JSON. The policy definition contains elements for:\r\n\r\n - mode\r\n - parameters\r\n - display name\r\n - description\r\n - policy rule\r\n  - logical evaluation\r\n  - effect\r\n\r\nLet's understand these components with the help of an example. Earlier we saw how to find the definition of existing policies. One such policy is: \"Allowed locations\". This policy restricts the location in Azure where resources can be deployed. The definition for the policy looks like below:\r\n\r\n    {\r\n      \"properties\": {\r\n        \"mode\": \"all\",\r\n        \"parameters\": {\r\n          \"allowedLocations\": {\r\n            \"type\": \"array\",\r\n            \"metadata\": {\r\n              \"description\": \"The list of locations that can be specified when deploying resources\",\r\n              \"strongType\": \"location\",\r\n              \"displayName\": \"Allowed locations\"\r\n            }\r\n          }\r\n        },\r\n        \"displayName\": \"Allowed locations\",\r\n        \"description\": \"This policy enables you to restrict the locations your organization can specify when deploying resources.\",\r\n        \"policyRule\": {\r\n          \"if\": {\r\n            \"not\": {\r\n              \"field\": \"location\",\r\n              \"in\": \"[parameters('allowedLocations')]\"\r\n            }\r\n          },\r\n          \"then\": {\r\n            \"effect\": \"deny\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n 1. **Mode** tells you the type of resources for which the policy will be applied. Allowed values are \"All\" (where all Resource Groups and Resources are evaluated) and \"indexed\" (where policy is evaluated only for resources which support tags and location)\r\n 2. **Parameters** are used for providing inputs to the policy. They can be reused at multiple locations within the policy. You can refer to a parameter as: \"***[parameters('allowedLocations')]***\"\r\n 3. **Display Name** is used to show the policy in the portal or programmatically.\r\n 4. A **description** is used to provide details for the policy.\r\n 5. **Policy Rule** is which defines the policies. This is the section where the restrictions are defined in a Poicy Definition. To understand a policy you need to focus most of your efforts on this section. Every Policy rule has two key sections defined under \"if-then\" blocks. \r\n  6. **Logical Evaluation** is defined under the \"if\" block. It defines the condition which is evaluated to determine the policy should be applied or not.\r\n  7. **Effect** is defined in the \"then\" block. This defines what will happen if the condition is met. \r\n\r\n### Policy Rules ###\r\n\r\nLet's look at the policy rules in more details. The general syntax of the \"if-then\" block is as shown below:\r\n\r\n    {\r\n      \"if\": {\r\n        <condition> | <logical operator>\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"deny | audit | append\"\r\n      }\r\n    }\r\n\r\n\r\nSupported logical operators are:\r\n\r\n* `\"not\": {condition  or operator}`\r\n* `\"allOf\": [{condition or operator},{condition or operator}]`\r\n* `\"anyOf\": [{condition or operator},{condition or operator}]`\r\n\r\n**Not** operator means that the opposit of the condition should be true for the policy to be applied. **AllOf** requires all the conditions defined to be true at the same time. **AnyOf** requires any one of the conditions to be true for the policy to be applied.\r\n\r\nIn the previous example, the policy rule section is as shown below:\r\n\r\n        \"policyRule\": {\r\n          \"if\": {\r\n            \"not\": {\r\n              \"field\": \"location\",\r\n              \"in\": \"[parameters('allowedLocations')]\"\r\n            }\r\n          },\r\n          \"then\": {\r\n            \"effect\": \"deny\"\r\n          }\r\n        }\r\n\r\nIn simple terms, the rule above says that if the location is not in the list of allowed locations, defined by the parameter ***allowedLocations***, then the effect will be ***deny*** i.e. the resource creation will not be allowed.\r\n\r\nYou can find the complete list of operators and conditional constructs here: <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/azure-policy\/policy-definition\" target=\"_blank\">Azure Policy definition structure\r\n<\/a>",
		"addpost": "addpost",
		"dated": "Dec 30, 2017",
		"slug": "demystifying-azure-security-creating-a-custom-policy-part-2-understanding-the-policy-structure",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>. Ensure that you have r...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Creating a Custom Policy - Part 1 - Viewing Definition of an existing Policy",
		"postDate": "07-01-2018",
		"tags": [
			"azure",
			"azuresecurity",
			"custom",
			"custompolicy",
			"microsoft",
			"microsoftazure",
			"policies",
			"policy",
			"security"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\nCreating a custom policy to enforce your custom requirements in the Azure environment is very easy. This provides you with granular control over what a policy should perform and what should be allowed and what should be denied.\r\n\r\nPolicies are writing in JSON format. It is always good to base your custom policy definition on one of the built-in policies if one exists which is closer to what you are trying to do. \r\n\r\n### Viewing Definition of Existing Policies ###\r\n\r\nYou have two options to view the definition of an existing policy.\r\n\r\n 1. Using PowerShell\r\n 2. Using Azure Portal\r\n\r\n### Using PowerShell ###\r\n\r\n**Using PowerShell** run the below cmdlet to view all the policies in your environment.\r\n\r\n    Get-AzureRmPolicyDefinition\r\n\r\nThen go through the list and find the policy that you want to use. Find the ResourceId of that policy and then run the below cmdlet to fetch the details of that policy.\r\n\r\n    Get-AzureRmPolicyDefinition -Id \"\/providers\/Microsoft.Authorization\/policyDefinitions\/e56962a6-4747-49cd-b67b-bf8b01975c4c\"\r\n\r\n### Using Azure Portal ###\r\n\r\n**Using Azure Portal** to view the Definition is also very easy. Simply navigate to:\r\n\r\n - the Subscription section in the Azure Portal\r\n - Select your subscription\r\n - Click on \"Policies\" under settings. \r\n - Within the Policies blade, click on \"Definitions\"\r\n\r\nWithin the Policy Definitions, select the Policy from the list for which you want to view the definition. Click on the 3 dots to the right. From the context menu select \"View definition\".\r\n\r\n<img src=\"\/images\/15218187805ab51c9c095ce.png\" alt=\"Policy Definitions\">\r\n\r\nThis will open up another blade. Click on the \"Json\" tab at the top and this will show you the rule part of the definition of the policy. the rule is the most important part of the policy. We will look at other components of the policies later as well.\r\n\r\n<img src=\"\/images\/15218187845ab51ca0c313d.png\" alt=\"Policy Definition Details\">\r\n\r\nE.g. The JSON for \"Allowed storage account SKUs\" built-in policy looks as shown below.\r\n\r\n\r\n    {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Storage\/storageAccounts\"\r\n          },\r\n          {\r\n            \"not\": {\r\n              \"field\": \"Microsoft.Storage\/storageAccounts\/sku.name\",\r\n              \"in\": \"[parameters('listOfAllowedSKUs')]\"\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"Deny\"\r\n      }\r\n    }\r\n\r\n\r\nNext, we will dissect and understand the Policy structure in details.",
		"addpost": "addpost",
		"dated": "Dec 29, 2017",
		"slug": "demystifying-azure-security-creating-a-custom-policy-part-1-viewing-definition-of-an-existing-policy",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p>Creating a custo...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Azure Policies - 2 - Assigning a Policy",
		"postDate": "27-12-2017",
		"tags": [
			"azure",
			"azurepolicies",
			"azuresecurity",
			"microsoft",
			"microsoftazure",
			"policies",
			"policy",
			"security"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\nIn this post, we will view the policies in action. Policy assignment is very easy on the Azure Portal. We will be assigning a built-in policy at a subscription scope.\r\n\r\n### Accessing the Policies in the Azure portal ###\r\n\r\nBegin by accessing the Policies in the Azure Portal. To do this follow the below steps:\r\n\r\n 1. Navigate to **Subscriptions** (via All Services or the navigation sidebar)\r\n 2. Select the subscription for which you want to view the Policies\r\n 3. Scroll down to the \"Settings\" category in the menu of the subscription\r\n 4. Click on \"**Policies**\" to access the policies in Azure\r\n\r\n### Assigning the Built-in Policies ###\r\n\r\nTo perform the assignment, click on \"Assign Policy\" from either Compliance or the Assignment tabs.\r\n\r\n<img src=\"\/images\/15217866825ab49f3a81d6a.png\" alt=\"Assign Policy\">\r\n\r\nIn the new blade, provide the value for the:\r\n\r\n 1. Policy to be applied\r\n 2. Name and Description of the Policy. The name will be the name of the policy selected by default. As a best practice ensure to provide the detailed description.\r\n 3. Assigned by will be your name by default\r\n 4. You can select the pricing tier between Free and Standard. You will get the compliance evaluation of the resources in your environment against the policy with the Standard pricing tier\r\n 5. Scope for the Policy\r\n 6. Exclusions from the Policy\r\n 7. Any additional parameters related to the policy\r\n\r\nTo select from the policies, click on the blue button with an ellipse (i.e. 3 dots) in front of the Policy box. This will popup another blade for all the Policy definitions.\r\n\r\n<img src=\"\/images\/15217894075ab4a9df6a23e.png\" alt=\"Assign Policy Blade details\">\r\n\r\nScroll through various Built-in policies. Once we define any custom user-defined policies, they will also be displayed here. Select the policy \"Allowed locations\" from the list of the policies as an example. Click on \"Select\" once done.\r\n\r\n<img src=\"\/images\/15217894445ab4aa0494a0d.png\" alt=\"Selecting Policy\">\r\n\r\nSelect the Scope for applying the policy. You can leave the default to the Subscription level. Or you can click on the blue button in front of scope text box and select the Resource Groups under the subscription on which you want to apply the policy.\r\n\r\nYou can also select the Exclusions if you require. These Resource Group or resources will not be evaluated against the policy.\r\n\r\n<img src=\"\/images\/15217894615ab4aa15470ec.png\" alt=\"Selecting Scope\">\r\n\r\nLastly, you will have additional parameters for the policy related values. These parameters will vary and will depend on the policy you have selected. E.g. For \"Allowed locations\" policy, you will see the parameter for allowed locations. Select \"East US\" and \"East US 2\" for the locations as an example.\r\n\r\n<img src=\"\/images\/15217894765ab4aa248f15f.png\" alt=\"Providing value for Policy related Parameters\">\r\n\r\nOnce you complete the configurations, click on the \"**Assign**\" button to apply the policy\r\n\r\n### Validating the Policy ###\r\n\r\nTo validate the policy for \"Allowed locations\" follow these steps:\r\n\r\n 1. Try to deploy a Storage Account or a VM or any other resource in a location that is NOT allowed. E.g. try deploying a storage account in the \"West US\" location. This should fail with the validation error stating the policy id.\r\n 2. Perform the same deployment but to one of the allowed location. E.g. try deploying a storage account in the \"East US\" location. This should succeed without any erros. ",
		"addpost": "addpost",
		"dated": "Dec 27, 2017",
		"slug": "demystifying-azure-security-azure-policies-2-assigning-a-policy",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p>In this post, we...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - RBAC Roles",
		"postDate": "25-01-2018",
		"tags": [
			"azure",
			"azuresecurity",
			"microsoft",
			"microsoftazure",
			"roles",
			"security"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\nAzure **RBAC Roles** are a great way to securely provide access to users with limited actions in Azure. The focus is to provide only the access necessary so that an account in your organization doesn't have more access than needed. In case the account gets compromised, this will ensure that does not leave your environment too much vulnerable. This means that if you grant an employee access to manage Virtual Machines in your environment, that employee can't alter the virtual networks by mistake or have any access to delete the storage accounts in the environment. \r\n\r\n### Roles Hierarchy ###\r\n\r\nThe RBAC Roles can be assigned at the following three levels in the order of hierarchy:\r\n\r\n 1. **Subscription**\r\n 2. **Resource Group**\r\n 3. **Resource**\r\n\r\nAny Resource in Azure, must belong to a Resource Group (under the ARM model). And every Resource Group in Azure must belong to a single subscription.\r\n\r\nIf a person is assigned scope at Subscription level then he\/she will get access to all Resource Groups and to all resources within those resource groups. Next, if a person is assigned access at a Resource Group level then they will automatically get access to all the Resources within that Resource Group. Finally, if a person is provided access only to an individual Resource then they will get access only to that Resource.\r\n\r\n### Built-in Roles ###\r\nThere are various inbuilt roles for this purpose like:\r\n\r\n 1. Contributor - create and manage but can't grant access to others\r\n 2. Reader - can only view\r\n 3. Owner - full access\r\n\r\nThe complete list of Built-in roles can be viewed here: <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/active-directory\/role-based-access-built-in-roles\" target=\"_blank\">Built-in roles for Azure role-based access control<\/a>\r\n\r\n### Viewing and Adding Access ###\r\n\r\nTo view or Add access, first decide the scope where you want to provide the access. Select the scope, e.g. a Resource Group on which you want to view existing access and grant the access to someone. Then follow these steps (as per the image below):\r\n\r\n 1. Click on \"Access Control (IAM)\" to access the RBAC access control\r\n 2. View the access in the center area. Scroll down to view all type of roles and Users, Groups or Apps with the access\r\n 3. Click on \"+Add\" button, as shown below, to add access to a new user, group or application\r\n 4. In the new popup blade, select the Role (e.g. Contributor), Assignment scope and name\/email address of the user or app to whom you want to grant the access. You can select multiple users\/apps as well.\r\n\r\n<img src=\"\/images\/15216952115ab339eba24e0.png\" alt=\"Viewing and Adding RBAC Access\">\r\n\r\nWithin each subscription, you can grant up to 2000 role assignments.\r\n\r\nLearn about creating Custom RBAC Roles here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-custom-rbac-roles\/\" target=\"_blank\">Demystifying Azure Security - Custom RBAC Roles<\/a>",
		"addpost": "addpost",
		"dated": "Dec 20, 2017",
		"slug": "demystifying-azure-security-rbac-roles",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p>Azure <strong>RB...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Demystifying Azure Security - Azure Policies - 1 - Basics",
		"postDate": "10-12-2017",
		"tags": [
			"azure",
			"azurepolicies",
			"azuresecurity",
			"microsoft",
			"microsoftazure",
			"policies",
			"policy",
			"security"
		],
		"category": "Azure Security",
		"body": "This blog post is part of the **Demystifying Azure Security** series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a>\r\n\r\n**Azure Policies** are a great tool to make access to Azure more secure by prohibiting certain operations and enforcing various rules in your environment. The policies make your environment compliant and ensure that you adhere to the service level agreements and standards set within your organization. If the end user tries to deploy a resource violating the policies then the deployment fails at the validation step ensuring that your environment remains compliant. If you already have resources which are not compliant then you will be able to review those and take necessary actions.\r\n\r\n\r\n### Examples of Azure Policies ###\r\n\r\nHere are a few of most commonly used policies:\r\n\r\n 1. **Restricting the Allowed locations** where a resource can be deployed. You can restrict the allowed locations where resources can be deployed to the ones that are closer to your geographic location. This also ensures that the users within your organization can't deploy resources to noncompliant locations. \r\n 2. **Enforcing a Tag** and it's Value. E.g. You have a Resource Group for the Finance department. You want to ensure that any resource deployed in that Resource Group should be tagged with a \"CostCenter\" and a specific value for that cost center. You can enforce this using a Policy.\r\n 3. **Not Allowed Resource Types**. Using this policy you can prohibit the deployment of certain resource types in your environment. \r\n\r\nThere are various other built-in Policies. You can also create your own policies which we will discuss in more detail later.\r\n\r\n### Scope where a Policy is Assigned ###\r\n\r\nA Policy can be assigned at the below levels:\r\n\r\n 1. **Subscription** level - Applied to all Resource Groups and Resources within the subscription\r\n 2. **Resource Group** level - Applied only to the Resources within the selected Resource Groups\r\n\r\n**Exclusions**: In addition to the assignment scope, you can exclude certain Resource Groups or individual Resources from the Policy assignments. The Policy will be applied to all the Resources in the scope except the ones excluded by defining the Exclusions. \r\n\r\n\r\n### How are Policies different from Role-Based Access Control (RBAC) ###\r\n\r\nThrough **Role-Based Access Control (RBAC)**, you focus on the role and scope of access that a user can have in Azure. You provide the access control (IAM) within Azure for Subscription, Resource Group or an individual Resource. You define a role for the user\/app\/group like Contributor, Reader etc.  You can use the built-in roles or can define custom roles.\r\n\r\nWith **Policies**, you focus on the properties of the resources with which the user can work at the defined scope. You define what properties are allowed and what is restricted. You can use the built-in policies or can define your own.\r\n\r\nE.g. Through RBAC you define that a particular user has Reader role at the subscription and Contributor role at a particular Resource Group. This will mean that the user can view all the resources in the subscription but can only modify or create resources in the Resource Group where he has Contributor access.\r\n\r\nNow if you define a policy which restricts the type of resources deployed ( as discussed in the examples above), the user will not be able to deploy the restricted resource types, even though he has contributor access to a Resource Group.\r\n\r\n### Accessing Policies in the Azure portal ###\r\n\r\nTo access the Policies in the Azure portal:\r\n\r\n 1. Navigate to **Subscriptions** (via All Services or the navigation sidebar)\r\n 2. Select the subscription for which you want to view the Policies\r\n 3. Scroll down to the \"Settings\" category in the menu of the subscription\r\n 4. Click on \"**Policies**\" to access the policies in Azure\r\n\r\n<img src=\"\/images\/15217849365ab4986888c88.png\" alt=\"Policies in Azure Portal\">\r\n\r\nWe will be discussing more about the Azure Policies in later blogs.",
		"addpost": "addpost",
		"dated": "Dec 10, 2017",
		"slug": "demystifying-azure-security-azure-policies-1-basics",
		"categoryslug": "azure-security",
		"status": "publised",
		"summary": "\n<p>This blog post is part of the <strong>Demystifying Azure Security<\/strong> series. All posts in the series can be found here: <a href=\"http:\/\/harvestingclouds.com\/post\/demystifying-azure-security-series-index\/\" target=\"_blank\">Demystifying Azure Security - Series Index<\/a><\/p>\n<p><strong>Azure Po...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Great Way to learn - 2018 Microsoft Azure Community Study Groups",
		"postDate": "05-12-2017",
		"tags": [
			"azure",
			"azureresourcemanager",
			"certifications",
			"mcsa",
			"mcsd",
			"mcse",
			"microsoft",
			"microsoftazure"
		],
		"category": "Azure",
		"body": "How many times have you started preparation for any Azure certification and have left it midway because of any reason? We all need a little extra nudge. Microsoft Azure Community Study Groups is just the thing you need to create and fulfill your next year resolutions. \r\n\r\nHere are the registration links, provided \"as is\":\r\n<table border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\r\n<tbody>\r\n<tr>\r\n<td width=\"461\" valign=\"top\">\r\n<p><b>Exam<\/b><\/p>\r\n<\/td>\r\n<td width=\"158\" valign=\"top\">\r\n<p><b>Registration Link<\/b><\/p>\r\n<\/td>\r\n<td width=\"208\" valign=\"top\">\r\n<p><b>Dates<\/b><\/p>\r\n<\/td>\r\n<\/tr>\r\n<tr>\r\n<td width=\"461\" valign=\"top\">\r\n<p><b>70-532: Developing Microsoft Azure Solutions<\/b><\/p>\r\n<\/td>\r\n<td width=\"158\" valign=\"top\">\r\n<p><a href=\"https:\/\/aka.ms\/532asg\">https:\/\/aka.ms\/532asg<\/a><\/p>\r\n<\/td>\r\n<td width=\"208\" valign=\"top\">\r\n<p>March 23 \u2013 May 24, 2018<\/p>\r\n<\/td>\r\n<\/tr>\r\n<tr>\r\n<td width=\"461\" valign=\"top\">\r\n<p><b>70-533: Implementing Microsoft Azure Infrastructure Solutions<\/b><\/p>\r\n<\/td>\r\n<td width=\"158\" valign=\"top\">\r\n<p><a href=\"https:\/\/aka.ms\/533asg\">https:\/\/aka.ms\/533asg<\/a><\/p>\r\n<\/td>\r\n<td width=\"208\" valign=\"top\">\r\n<p>January 12 \u2013 April 13, 2018<\/p>\r\n<\/td>\r\n<\/tr>\r\n<tr>\r\n<td width=\"461\" valign=\"top\">\r\n<p><b>70-535: Architecting Microsoft Azure Solutions <\/b><\/p>\r\n<\/td>\r\n<td width=\"158\" valign=\"top\">\r\n<p><a href=\"https:\/\/aka.ms\/535asg\">https:\/\/aka.ms\/535asg<\/a><\/p>\r\n<\/td>\r\n<td width=\"208\" valign=\"top\">\r\n<p>January 12 \u2013 May 24, 2018<\/p>\r\n<\/td>\r\n<\/tr>\r\n<tr>\r\n<td width=\"461\" valign=\"top\">\r\n<p><b>70-483: Programing in C#<\/b><\/p>\r\n<\/td>\r\n<td width=\"158\" valign=\"top\">\r\n<p><a href=\"https:\/\/aka.ms\/483asg\">https:\/\/aka.ms\/483asg<\/a><\/p>\r\n<\/td>\r\n<td width=\"208\" valign=\"top\">\r\n<p>January 12 \u2013 March 2, 2018<\/p>\r\n<\/td>\r\n<\/tr>\r\n<tr>\r\n<td width=\"461\" valign=\"top\">\r\n<p><b>70-486: Developing ASP.NET MVC Web Applications<\/b><\/p>\r\n<\/td>\r\n<td width=\"158\" valign=\"top\">\r\n<p><a href=\"https:\/\/aka.ms\/486asg\">https:\/\/aka.ms\/486asg<\/a><\/p>\r\n<\/td>\r\n<td width=\"208\" valign=\"top\">\r\n<p>January 12 \u2013 March 23, 2018<\/p>\r\n<\/td>\r\n<\/tr>\r\n<tr>\r\n<td width=\"461\" valign=\"top\">\r\n<p><b>70-487: Developing Microsoft Azure and Web Services<\/b><\/p>\r\n<\/td>\r\n<td width=\"158\" valign=\"top\">\r\n<p><a href=\"https:\/\/aka.ms\/487asg\">https:\/\/aka.ms\/487asg<\/a><\/p>\r\n<\/td>\r\n<td width=\"208\" valign=\"top\">\r\n<p>March 9 \u2013 May 11, 2018<\/p>\r\n<\/td>\r\n<\/tr>\r\n<\/tbody>\r\n<\/table>\r\n\r\nYou can access the main blog from here:\r\n<a href=\"https:\/\/blogs.technet.microsoft.com\/uspartner_ts2team\/2017\/12\/04\/2018-microsoft-azure-community-study-groups\/\" target=\"_blank\">2018 Microsoft Azure Community Study Groups<\/a>",
		"addpost": "addpost",
		"dated": "Dec 05, 2017",
		"slug": "great-way-to-learn-2018-microsoft-azure-community-study-groups",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>How many times have you started preparation for any Azure certification and have left it midway because of any reason? We all need a little extra nudge. Microsoft Azure Community Study Groups is just the thing you need to create and fulfill your next year resolutions. <\/p>\n<p>Here are the registr...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Introducing the Harvesting Clouds YouTube channel",
		"postDate": "29-11-2017",
		"tags": [
			"azure",
			"azureautomation",
			"azureresourcemanager",
			"microsoft",
			"microsoftazure"
		],
		"category": "Azure",
		"body": "I am happy to introduce the YouTube channel for Harvesting Clouds. The channel can be accessed here: <a href=\"https:\/\/www.youtube.com\/channel\/UCIfsXMJ8HMJkx1lMP-lngzw\" target=\"_blank\">Harvesting Clouds YouTube Channel<\/a>\r\n\r\nDo **Subscribe** to the channel to get notified of any new content on the channel. **Like** the content if you learned something new or got new perspective on the things you knew.\r\n\r\nCheck out the author introduction video below:\r\n\r\n<iframe width=\"560\" height=\"315\" src=\"https:\/\/www.youtube.com\/embed\/HxudnbeFofk?rel=0\" frameborder=\"0\" allowfullscreen><\/iframe>\r\n\r\nThe managed and ordered content via **playlists** can be found here: <a href=\"https:\/\/www.youtube.com\/channel\/UCIfsXMJ8HMJkx1lMP-lngzw\/playlists\" target=\"_blank\">Playlists - Harvesting Clouds<\/a>\r\n\r\n**All videos** on the channel can be found here: <a href=\"https:\/\/www.youtube.com\/channel\/UCIfsXMJ8HMJkx1lMP-lngzw\/videos\" target=\"_blank\">All Videos - Harvesting Clouds<\/a>",
		"addpost": "addpost",
		"dated": "Nov 29, 2017",
		"slug": "introducing-the-harvesting-clouds-youtube-channel",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>I am happy to introduce the YouTube channel for Harvesting Clouds. The channel can be accessed here: <a href=\"https:\/\/www.youtube.com\/channel\/UCIfsXMJ8HMJkx1lMP-lngzw\" target=\"_blank\">Harvesting Clouds YouTube Channel<\/a><\/p>\n<p>Do <strong>Subscribe<\/strong> to the channel to get notified of any ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Video - Azure Automation - Introduction",
		"postDate": "29-11-2017",
		"tags": [
			"automation",
			"azure",
			"azureautomation",
			"microsoft",
			"microsoftazure",
			"powershell"
		],
		"category": "Azure",
		"body": "This is the first video in the series of Azure Automation. This video provides the introduction and talks about the various theoretical concepts about Azure Automation\r\n\r\n<iframe width=\"560\" height=\"315\" src=\"https:\/\/www.youtube.com\/embed\/8tLdzsg6YVk?rel=0\" frameborder=\"0\" allowfullscreen><\/iframe>\r\n\r\nYou can view and subscribe to the YouTube channel here: <a href=\"https:\/\/www.youtube.com\/channel\/UCIfsXMJ8HMJkx1lMP-lngzw\" target=\"_blank\">HarvestingClouds on YouTube<\/a>",
		"addpost": "addpost",
		"dated": "Nov 29, 2017",
		"slug": "video-azure-automation-introduction",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>This is the first video in the series of Azure Automation. This video provides the introduction and talks about the various theoretical concepts about Azure Automation<\/p>\n<iframe width=\"560\" height=\"315\" src=\"https:\/\/www.youtube.com\/embed\/8tLdzsg6YVk?rel=0\" frameborder=\"0\" allowfullscreen><\/iframe>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Introducing Azure Reserved VM Instances (RIs)",
		"postDate": "15-11-2017",
		"tags": [
			"azure",
			"azureresourcemanager",
			"reservedinstances",
			"virtualmachine"
		],
		"category": "Azure",
		"body": "Azure Reserved VM Instances provides an easy option to save cost for predictive workloads. You commit to either one or three year options and pay the complete cost with discounts upfront. \r\n\r\nWhen should you use this\r\n--\r\n\r\nIf you know that your workload will be up and running then Azure Reserved VM instances are for you.\r\nThe savings can be up to 72% with the use of Reserved VM instances. If your VM is not going to be up and running for most time and you have the option to automate and shut down the Virtual Machine then you don't need Reserved VM Instances.\r\n\r\n\r\nHow does the cost savings look like\r\n--\r\n\r\nThe cost savings can be very significant especially when clubbed with Azure Hybrid Use Benefit. The below graphic is based on a Dv2 three-year RI with Azure Hybrid Benefit.\r\n\r\n![Potential Savings with Azure Reserved VM Instances][1]\r\n\r\n\r\nOther aspects\r\n--\r\n\r\nOther aspects of Azure Reserved VM Instances that you need to know are:\r\n\r\n - You can assign RI benefit at either the enrollment level or at the subscription level\r\n - The assignment is as easy as providing the Region, VM Series\/size and providing the term. The two terms offered today are 1 year and 3 years\r\n - You can exchange to a new instance and location as you need in the future\r\n - You also have the option to cancel anytime directly with Microsoft for a pro-rated refund\r\n\r\nReference: <a href=\"https:\/\/azure.microsoft.com\/en-ca\/pricing\/reserved-vm-instances\/\" target=\"_blank\">Azure Reserved VM Instances<\/a>\r\n\r\n\r\n  [1]: http:\/\/HarvestingClouds.com\/images\/15120755665a20712ed8b1b.png",
		"savedraft": "savedraft",
		"dated": "Nov 12, 2017",
		"slug": "introducing-azure-reserved-vm-instances-ris",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Azure Reserved VM Instances provides an easy option to save cost for predictive workloads. You commit to either one or three year options and pay the complete cost with discounts upfront. <\/p>\n<h2>When should you use this<\/h2>\n<p>If you know that your workload will be up and running then Azure Re...<\/p>\n",
		"addpost": "addpost",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Why you should be using Azure Managed Disks now?",
		"postDate": "05-11-2017",
		"tags": [
			"azure",
			"azureresourcemanager",
			"manageddisks",
			"storage",
			"virtualmachine",
			"vm"
		],
		"category": "Azure",
		"body": "Azure Managed Disks bring lots of advantages and benefits to the table when compared to Azure Storage Account based VM disks. The first thing to note is that these are only related to VM disks and not general blob storage. In this post, lets take a look at what all benefits you get when you create your virtual machine with a managed disk instead of a storage account based disks.\r\n\r\n### More Controlled Access Management\r\n\r\nLet's assume a scenario where all the disks for the virtual machines in your environment belonged to a particular storage account. Let us say that there are VMs belonging to Finance as well as HR departments. Now if you want to give access to a VHD file of a VM belonging to HR department, you will provide the access to the storage account. This was the lowest level where you could provide the access. This inadvertently opened the access to the Finance VM's VHD files as well.\r\n\r\nManaged Disks are individual resources in Azure. If a VM has 1 OS disk and 2 data disks, all implemented as a managed disk, then you can even provide the access to one of the data disk and not provide access to any of the other disks.\r\n\r\n### No Storage account service limits\r\n\r\nEarlier with storage accounts there were Service Limits related to IOPS at the storage account level. When the infrastructure grew and there comes a time the number of disks grew to a point that this service limit will be hit and this can affect your architecture. With managed disks, you are no longer limited by the storage account limits.\r\n\r\n### Ability to take Snapshot\r\n\r\nNow with managed disks you have the capability to take snapshots on the fly. You can later restore from these snapshots as required. You can take these snapshots onto a different storage account.\r\n\r\n### Ability to Capture better images\r\n\r\nThe images that you capture on the Vms, which are created using managed disks, will not just include the OS disk, but will also include all the data disk.\r\n\r\n### Ability to convert a Standard disk to Premium disk and vice versa\r\n\r\nEarlier if you wanted to convert a standard disk to a premium disk (or vice versa) you needed to create a new storage account and copy over the disk. Now with managed disks, this is as easy as shutting down the virtual machine and just changing a value in a drop down.\r\n\r\n### Other benefits\r\n\r\nOther benefits include:\r\n\r\n - Better reliability for Availability Sets\r\n - Highly durable and available with design for 99.999% availability\r\n - Better Azure Backup service support with the ability to create a backup job with time-based backups, easy VM restoration, and backup retention policies\r\n\r\nReference: \r\n\r\n - <a href=\"https:\/\/azure.microsoft.com\/en-ca\/services\/managed-disks\/\" target=\"_blank\">Managed Disks product page<\/a>\r\n - <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/virtual-machines\/windows\/managed-disks-overview\" target=\"_blank\">Managed Disks overview<\/a>",
		"addpost": "addpost",
		"dated": "Nov 05, 2017",
		"slug": "why-you-should-be-using-azure-managed-disks-now",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Azure Managed Disks bring lots of advantages and benefits to the table when compared to Azure Storage Account based VM disks. The first thing to note is that these are only related to VM disks and not general blob storage. In this post, lets take a look at what all benefits you get when you creat...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Cloud Shell - Embedding Cloud Shell in your Websites",
		"postDate": "16-10-1985",
		"tags": [
			"azure",
			"bash",
			"cloud",
			"powershell",
			"shell"
		],
		"category": "Azure",
		"body": "Embedding Azure Cloud Shell in your websites gives your visitors an option to directly interact with Azure, without even leaving your website. Your website may be talking about a code sample that your visitor may want to try in Azure. Instead of opening a new instance of Azure Portal, the visitors can try the command right from your site if you have embedded the cloud shell in your website.\r\n\r\nAll you need is the embed code and you are all set. Just add this code to your site and then you will be able to launch the cloud shell right from there with just a click of a button.Behind the scene, this is nothing but hyperlinking to the URL: https:\/\/shell.azure.com\r\n\r\n### Embed Code ###\r\nThe embed code is as follows if you are using Markdown\r\n\r\n    [![Launch Cloud Shell](https:\/\/shell.azure.com\/images\/launchcloudshell.png \"Launch Cloud Shell\")](https:\/\/shell.azure.com)\r\n\r\nIf you are building a website in HTML then the embed code will look like:\r\n\r\n    <a style=\"cursor:pointer\" onclick='javascript:window.open(\"https:\/\/shell.azure.com\", \"_blank\", \"toolbar=no,scrollbars=yes,resizable=yes,menubar=no,location=no,status=no\")'><image src=\"https:\/\/shell.azure.com\/images\/launchcloudshell.png\" \/><\/a>\r\n\r\n\r\n\r\n### Code in Action ###\r\n\r\nClicking on below image will open a popup. It will navigate you to the https:\/\/shell.azure.com URL within the popup. You can login to Azure and try any commands. I encourage to inspect the link below and compare with the above embed code.\r\n\r\n<a style=\"cursor:pointer\" onclick='javascript:window.open(\"https:\/\/shell.azure.com\", \"_blank\", \"toolbar=no,scrollbars=yes,resizable=yes,menubar=no,location=no,status=no\")'><image src=\"https:\/\/shell.azure.com\/images\/launchcloudshell.png\" \/><\/a>\r\n\r\n### Choosing Shell Type ###\r\n\r\nThe above examples will open the most recently used cloud shell. If you want to encourage visitors to experience a specific cloud shell, then update the URL section above embed code. Update as below by adding the last part to the URLs:\r\n\r\n -  Bash Shell - https:\/\/shell.azure.com\/bash\r\n - PowerShell Shell - https:\/\/shell.azure.com\/powershell\r\n\r\n\r\n### Reference: ###\r\n\r\n - <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/cloud-shell\/embed-cloud-shell\" target=\"_blank\">Embed Azure Cloud Shell<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Oct 16, 2017",
		"slug": "azure-cloud-shell-embedding-cloud-shell-in-your-websites",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Embedding Azure Cloud Shell in your websites gives your visitors an option to directly interact with Azure, without even leaving your website. Your website may be talking about a code sample that your visitor may want to try in Azure. Instead of opening a new instance of Azure Portal, the visitor...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Cloud Shell - Introduction",
		"postDate": "08-10-2017",
		"tags": [
			"automation",
			"azure",
			"azureautomation",
			"microsoft",
			"powershell",
			"shell"
		],
		"category": "Azure",
		"body": "**Azure Cloud Shell** is a very convenient option to run your automation scripts against your subscriptions. \r\n\r\nThe shell is provided in two flavors:\r\n\r\n - Bash based shell\r\n - PowerShell in Cloud Shell (currently in Preview)\r\n\r\nThe Cloud Shell is a Browser based experience. What this means is that you do not need to install any dependencies for the Azure commands to run. Also, there is no dependency on your machine's hardware. You can work irrespective of your local machine's configurations.\r\n\r\n### Support for various tools\r\nAzure Cloud Shell comes preloaded with various tools depending upon the shell type selected. It comes loaded with Linux tools like bash, sh, tmux and dig. The Azure tools which are preloaded are Azure CLI 2.0 and 1.0, AzCopy,etc.Text editors include vim and nano. Git source control tools are also included. Various other Build, Containers, Databases, etc. tools are also included. It also comes with language support for .net version 2.0.0, Java version 1.8, Node.js 6.9.4, PowerShell 6.0(beta) and Python 2.7 and 3.5 etc. Check the References section for the full list and up to date version of Tools and Language support.\r\n\r\n### Key Concepts\r\n\r\nBelow are some of the key concepts (in nutshell) about the cloud shell.\r\n\r\n 1. You can opt for any one of the two shell options available, as per your preferences. You can choose to have a **Bash shell** or **PowerShell in Cloud shell**\r\n 2. You can easily switch between the two shells at any time\r\n 3. If you are logged into Azure portal then you are also automatically authenticated into the Azure Cloud Shell\r\n\r\nOther important concepts as per Microsoft documentation are:\r\n\r\n 1. Cloud Shell runs on a temporary host provided on a per-session,\r\n    per-user basis \r\n 2. Cloud Shell times out after 20 minutes without\r\n    interactive activity \r\n 3. Cloud Shell requires an Azure file share to be\r\n    mounted \r\n 4. Cloud Shell uses the same Azure file share for both Bash and\r\n    PowerShell \r\n 5. Cloud Shell is assigned one machine per user account \r\n 6. Bash persists $Home using a 5-GB image held in your file share\r\n 7. Permissions are set as a regular Linux user in Bash\r\n\r\n### Pricing\r\n\r\nCloud Shell does not have any direct cost linked to it. The charge for Cloud Shell is only for the usage of the underlying Azure Storage. The exact charge depends on the amount you store on that storage and the type of the storage. By default, Locally Redundant Storage is created. \r\n\r\n**References**:\r\n\r\n - <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/cloud-shell\/overview\" target=\"_blank\">Azure Cloud Shell Overview<\/a>\r\n - <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/cloud-shell\/features\" target=\"_blank\">Azure Cloud Shell Features and Tools<\/a>\r\n - <a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/cloud-shell\/features-powershell\" target=\"_blank\">Features & tools for PowerShell in Azure Cloud Shell<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Oct 08, 2017",
		"slug": "azure-cloud-shell-introduction",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Azure Cloud Shell<\/strong> is a very convenient option to run your automation scripts against your subscriptions. <\/p>\n<p>The shell is provided in two flavors:<\/p>\n<ul><li>Bash based shell<\/li>\n<li>PowerShell in Cloud Shell (currently in Preview)<\/li>\n<\/ul><p>The Cloud Shell is a Browse...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Script Sample - Generate Azure Resources Report by Tags",
		"postDate": "07-10-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Sample",
			"Script",
			"Tags"
		],
		"category": "Azure",
		"body": "<<**Update**: This post and the sample script is now updated to support latest Azure PowerShell cmdlets>>\r\n\r\nWhen managing resources in Azure, Tags are there to help you. They add very valuable metadata to the Azure resources. \r\nIn nutshell, tags are Key-Value pairs. E.g. \"Business Unit = Finance\", \"Site = Central US\" are two such tags.\r\n\r\nThese **tags help you to**:\r\n\r\n - Organize your resources and manage the same\r\n - Get insights into Chargeback categorically\r\n\r\nTags go beyond the boundaries of deployments. You can have few resources deployed in one resource group and few other resources into the second resource group. If for these resources in both the resource groups you apply the same tag (i.e. same Key and value combination) then you can view and manage these resources in a single click.\r\n\r\nNow once in a while, you want to take a health check of your Azure environment. You want to see what all resources are there and what are the tags applied to these resources. You want to extract this data to a CSV file so that you can apply filters and perform other business intellegence (BI) operations on it. The script below provides exactly that. \r\n\r\nThe **script gives you** a CSV output report with:\r\n\r\n - All the resources in your Azure Subscription\r\n - Type of each resource, so that you can filter on various types\r\n - Tags for each of the resource in Azure\r\n\r\n**The Columns** in the Output CSV file (generated by the script) are:\r\n\r\n 1. Semi-colon separated list of tags\r\n 2. Resource Name\r\n 3. Resource Group Name\r\n 4. Location\r\n 5. Resource Type\r\n 6. Resource Id\r\n 7. Name\r\n 8. Subscription Id\r\n\r\n\r\nYou can find this script on GitHub here: [Azure Resources Report by Tags](https:\/\/github.com\/HarvestingClouds\/PowerShellSamples\/blob\/a4eb910aa8eb2cdd340c2866cde150282b47067e\/Scripts\/Azure%20Resources%20Report%20by%20Tags.ps1)\r\n\r\n[Direct Link to the Script here. Right click and choose Save As](https:\/\/raw.githubusercontent.com\/HarvestingClouds\/PowerShellSamples\/master\/Scripts\/Get-AzureRmTagsReport.ps1)\r\n\r\nYou are welcome to make changes and submit Pull Requests to this script or even fork and make your modifications. ",
		"addpost": "addpost",
		"dated": "Jan 26, 2017",
		"slug": "script-sample-generate-azure-resources-report-by-tags",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>&lt;&lt;<strong>Update<\/strong>: This post and the sample script is now updated to support latest Azure PowerShell cmdlets&gt;&gt;<\/p>\n<p>When managing resources in Azure, Tags are there to help you. They add very valuable metadata to the Azure resources.\nIn nutshell, tags are Key-Value pairs. E....<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Application Insights is now generally available",
		"postDate": "29-11-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"ApplicationInsights"
		],
		"category": "Azure",
		"body": "After a long time in Preview, Azure Application Insights is now generally available from Microsoft.",
		"addpost": "addpost",
		"dated": "Nov 29, 2016",
		"slug": "azure-application-insights-is-now-generally-available",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>After a long time in Preview, Azure Application Insights is now generally available from Microsoft.<\/p>...\n"
	},
	{
		"author": "@20aman",
		"title": "Azure Site Recovery (ASR) - New feature added to target Resource Groups",
		"postDate": "17-11-2016",
		"tags": [
			"ASR",
			"Azure",
			"AzureSiteRecovery",
			"ResourceGroups"
		],
		"category": "Azure",
		"body": "A new feature is now added to Azure Site Recovery (ASR) which enables you to target the Resource Groups for failover. You can target a separate Resource Group for each Server\/VM being protected. Now post failover, this target Resource Group will be used. Earlier,  during a failover, a new resource group was created with the same name as the server being failed over.\r\n\r\nYou can configure this setting in two ways:\r\n\r\n<ol>\r\n\r\n<li>\r\nWhen you are <b>Enabling Replication of new servers<\/b> then at the settings for \"Target\" you will have two new options. \r\n\r\n<ul><li>The first option is \"Post-failover resource group\" along with a drop down. This is where you select the target Resource Group. You can select one of the existing Resource group here. If you haven't created the one you want to use as a target then please create before enabling replication. <\/li> \r\n\r\n<li>The second new option is to select \"Post-failover deployment model\" which has only two options. These options are \"Classic\" and \"Resource Manager\". The later will be selected by default and should be the one you should be using to leverage all the new features which Azure has to offer.<\/li>\r\n<\/ul>\r\n\r\n<br\/>\r\n<img src=\"\/images\/1479510199582f88b742692.png\" alt=\"Enable Replication\">\r\n<\/li>\r\n\r\n<li>\r\nIf you have servers which were protected before this feature was introduced or if you configured wrong Resource Group during enabling of replication and now want to change the Resource Group then you can do so using this alternate way. Go to your ASR Vault and then go to Settings. Then go to the \"Replicated Items\" and click on the server for which you want to change the resource group. Click on \"Compute and Network\" in the server properties as shown below. You will see a new option here to select or change the target Resource Group. Click \"Save\" at the top of the blade after selecting or changing the value.\r\n\r\n<br\/>\r\n\r\n<img src=\"\/images\/1479493236582f4674a80d3.png\" alt=\"Compute and Network settings\">\r\n<\/li>\r\n<\/ol>\r\n\r\nThis new option makes the failover process in Azure Site Recovery (ASR) much more manageable and overall a better experience.\r\n",
		"addpost": "addpost",
		"dated": "Nov 17, 2016",
		"slug": "azure-site-recovery-asr-new-feature-added-to-target-resource-groups",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>A new feature is now added to Azure Site Recovery (ASR) which enables you to target the Resource Groups for failover. You can target a separate Resource Group for each Server\/VM being protected. Now post failover, this target Resource Group will be used. Earlier,  during a failover, a new resourc...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Troubleshooting Azure Site Recovery (ASR) - Data Replication Not Working",
		"postDate": "14-11-2016",
		"tags": [
			"ASR",
			"Azure",
			"AzureSiteRecovery"
		],
		"category": "Azure",
		"body": "If you have the Azure Site Recovery (ASR) setup in your environment and are facing the issue where the data replication is stuck, then follow this blog to troubleshoot. The data replication can be stuck either during the initial replication or during the delta changes. This can occur for various reasons. We will inspect various components involved in ASR. Major of the troubleshooting is done on the Management Server i.e. the on-premise Configuration\/Master target server.\r\n\r\n### 1. Check Alerts Details ###\r\n\r\nGo to the Azure Site Recovery Vault and navigate to the settings. Click on the ***Alerts and Events***. Check the alerts for the data replication being blocked etc. Verify that the problem is related to data replication and not something else. \r\n\r\nYou can also navigate to the \"***Replicated Items***\" in the ASR Vault settings. On the blade for replicated items, click on the server for which the data is not being replicated. A new blade will open for this server's properties Then click on the Error Details on the server properties blade's context menu (which you can access by clicking on the top right ellipse i.e. 3 dots).\r\n\r\nAfter verifying the issue, proceed to next sections to troubleshoot.\r\n\r\n### 2. Check Resource Monitor ###\r\n\r\nCheck if you see any activity in the Resource Monitor. This is also to validate if the issue is there or not. Sometimes the **Low Bandwidth** and **multiple servers** configured against one Management server can cause this issue. Ensure that this is not the scenario in your case.\r\n\r\nFrom the Task manager, go to performance view and check for the bandwidth consumption. Then click on the \"Open Resource Monitor\" button to launch the Resource Monitor. From the CPU section in the Overview tab, select the below two services:\r\n\r\n - cxps.exe\r\n - cbengine.exe\r\n\r\nThen click on the Network tab and see if there is any traffic going out to Azure. If the data transfer is going on without issues then you should be able to view entries against cbengine going out to a URL which will look something like \"blob.aaa1aaa1aa.core.windows.net\" and entries against the csps service .\r\n\r\n![Resource Monitor](\/images\/1479242042582b713a13d26.png)\r\n\r\n### 3. Check ASR Infrastructure Setup ###\r\n\r\nFirst of all, check if the ASR infrastructure setup is correct and nothing is wrong there. To view this, navigate to the ASR Vault. Go to the settings and click on the \"Site Recovery Infrastructure\". In the next blade, click on the kind of infrastructure you have setup. E.g. If you are replicating from VMWare or Physical Machines from on-premise to Azure then click on the \"Configuration Servers\" under the \"For VMWare & Physical Machines\" section.\r\n\r\n![Site Recovery Infrastructure](\/images\/1479235374582b572e7bd28.png)\r\n\r\nHere check if the Config Server is showing as \"Connected\". If not then the problem is in the communication between Configuration Server and the Azure. Ensure that you are able to connect to the Azure portal from the config server. Also, ensure that all the public URLs for Azure are accessible. Check this link for exact URLs: [Verify URL Access](https:\/\/docs.microsoft.com\/en-us\/azure\/site-recovery\/site-recovery-best-practices#verify-url-access).\r\n\r\nNext, click on the configuration server. This will open another blade with details for the configuration server. Expand the section for \"Associated Servers\" as marked no. 2 in the screenshot below. Check if all the associated servers, i.e. Process Server, vCenter Server and Master Target servers are connected and showing green tick mark.\r\n\r\nNext, check the configuration server health as shown at no. 3 below. Check if all the services are running and showing healthy. Ensure that you have sufficient free space on the configuration server to send the replication data. If you see any services not running then go to the next section to check and start the services on the Management Server on-premise. \r\n\r\nYou can try refreshing the server after making any configuration changes on it, e.g. increasing memory or freeing up disk space. Click on the \"Refresh Server\" button as shown at no. 4, at the top of the blade for the configuration server.\r\n\r\n![Config Server Settings](\/images\/1479235804582b58dc26f55.png)\r\n\r\n### 4. Checking Services on the Management Server ###\r\n\r\nCheck if the services on the Management Server are up and running. You need to check for the below services:\r\n\r\n - InMage PushInstall\r\n - InMage Scout Application Service\r\n - InMage Scout VX Agent - Sentinel\/Outpost\r\n - INMAGE-AppScheduler\r\n - Microsoft Azure Recovery Services Agent\r\n - Microsoft Azure Site Recovery Service\r\n - cxprocessserver (This is important service. It is the service for the InMage CX Process Server)\r\n - tmansvc (This is the service for the InMage Volsync Thread Manager Service)\r\n\r\nStart any service which is not running and check if the problem still exists. 90% of the time the problem is going to be because of something related to these services (e.g. a restart or patch stopped one of these services).\r\n\r\n### 5. Checking Services on the Server being replicated ###\r\n\r\nCheck if the services on the Server being replicated are up and running. You need to check for the below services:\r\n\r\n - Azure Site Recovery VSS Provider\r\n - InMage Scout Application Service\r\n - InMage Scout VX Agent - Sentinel\/Outpost\r\n\r\nStart any service which is not running and check if the problem still exists.\r\n\r\n### 6. Verify Service Account credentials are correct and have required access ###\r\n\r\nThe replication can stop if the service account is not correct or it doesn't have required access. Check if the service account's password expired or changed. \r\n\r\nYou can use the Configuration Server config tool to check and update the service accounts. This tool can be accessed from this directory path: \"*D:\\Program Files (x86)\\Microsoft Azure Site Recovery\\home\\svsystems\\bin*\" where D is your install directory for ASR setup. The tool name under this directory is \"**cspsconfigtool.exe**\".\r\n\r\n![CSPS Config Tool](\/images\/1479238579582b63b3688bd.png)\r\n\r\n\r\n### 7. Check Logs ###\r\n\r\nThere are various ASR logs that gets generated in the Management server. Two key logs that you should check are as shown below. This assumes that D is the directory where ASR is installed.\r\n\r\n - **Monitoring Logs** - These logs are located at \"*D:\\Program Files (x86)\\Microsoft Azure Site Recovery\\home\\svsystems\\var*\". Name of the file you should check is \"**monitor_ps**\".\r\n - **VM-Specific ASR Logs** - These logs are located at \"*D:\\Program Files (x86)\\Microsoft Azure Site Recovery\\home\\svsystems*\". Then there will be a folder with the name as a GUID for each VM. Navigate to the folder with the Guid and try to find the folder for your VM's GUID. One indication will be the number of disks and the disk sizes. Once you have located the folder for one of the VM having replication problems. Then navigate to internal folders and locate the perf.log file for your VM's disks. Check to see if there are any errors here.\r\n\r\nThese logs should give you an idea as to what may have been causing the issues.\r\n\r\n### In Conclusion ###\r\nAfter all these steps and any changes you should Refresh the Configuration Server as shown in the point 3 above. \r\n\r\nLet me know if this blog helped in your scenario. ",
		"addpost": "addpost",
		"dated": "Nov 14, 2016",
		"slug": "troubleshooting-azure-site-recovery-asr-data-replication-not-working",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>If you have the Azure Site Recovery (ASR) setup in your environment and are facing the issue where the data replication is stuck, then follow this blog to troubleshoot. The data replication can be stuck either during the initial replication or during the delta changes. This can occur for various ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "General Availability - Azure Active Directory (AD) Domain Services",
		"postDate": "27-10-2016",
		"tags": [
			"AD",
			"ActiveDirectory",
			"Azure"
		],
		"category": "Azure",
		"body": "**Azure Active Directory Domain Services** are here to revolutionize the way Domain Services are used. They are here to reduce even further the infrastructure management for IT Administrators. \r\n\r\n###What is this service###\r\n\r\nUsing this service you can now setup domains without having to setup the domain controllers. You can set up your Domain in Azure using Domain Services and then you can have virtual machines joining to that domain. At no point, you need to set up any domain controllers. You can also use Group Policy with this service to securely administer your domain joined infrastructure.\r\n\r\nThis service benefits all customers. For **enterprise customers**, they get the familiar enterprise grade service. For **medium to small business customers**, the service makes even more sense as they get enterprise level service for a smaller price due to small infrastructure and thus a small number of objects in AD.\r\n\r\nThis service is out of the box a highly available service. It is hosted in globally distributed datacenters.\r\n\r\n### When is this service available ###\r\n\r\nThis service is now **Generally Available**. The pricing for this service will start from 1st December 2016.\r\n\r\nThe payment model is Pay-As-You-Go. The usage will be charged per hour. The chargeback will be based on the total number of AD Objects in your AD Tenant. These objects include users, groups, and domain-joined computers. Directory size and hours are calculated and emitted daily. Usage is prorated to the minute.\r\n\r\nCurrently, there are 3 tiers. \r\n\r\n - Less than 25,000 directory objects\r\n - 25,001 to 100,000 directory objects\r\n - more than 100,000 directory objects\r\n\r\n### Is this service available in my region###\r\n\r\nAt the time of writing of this blog post, this service is available in the following regions:\r\n\r\n - East US\r\n - East US 2\r\n - Central US\r\n - South Central US\r\n - West US\r\n\r\nCheck this link for most updated availability: [Azure Products by Region](https:\/\/azure.microsoft.com\/en-us\/regions\/services\/)\r\n\r\nAlso, check the official ADDS page here: [Azure Active Directory Domain Services](https:\/\/azure.microsoft.com\/en-us\/services\/active-directory-ds\/)\r\nAnd, check the upto date pricing here: [Pricing](https:\/\/azure.microsoft.com\/en-us\/pricing\/details\/active-directory-ds\/)\r\n\r\nNow it is time for you to go and try this new service for yourself and enjoy it's benefits!",
		"addpost": "addpost",
		"dated": "Oct 27, 2016",
		"slug": "general-availability-azure-active-directory-ad-domain-services",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Azure Active Directory Domain Services<\/strong> are here to revolutionize the way Domain Services are used. They are here to reduce even further the infrastructure management for IT Administrators. <\/p>\n<h3>What is this service<\/h3>\n<p>Using this service you can now setup domains without ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Suspending and Resuming Azure Site Recovery (ASR) Replication on a single or multiple servers",
		"postDate": "25-10-2016",
		"tags": [
			"ASR",
			"Azure",
			"AzureSiteRecovery"
		],
		"category": "Azure",
		"body": "Let us assume that you have enabled the Azure Site Recovery (ASR) replication on various servers. These servers can be:\r\n\r\n - On Premise VMWare VMs\r\n - On Premise Physical Servers\r\n - Azure ASM (older portal) VMs\r\n\r\nThe purpose could be anything from setting up Disaster Recovery for your infrastructure or using ASR for Migrating workloads from on-premise to Azure. For any reason, you may need to suspend and resume ASR replication on one or more target servers.\r\n\r\nCurrently, ASR does not have the feature to allow you to suspend and resume the ASR replication. But you can do this manually as easily. \r\n\r\nTo **Suspend** the ASR replication on a particular server, all you need to do is:\r\n\r\n 1. Log into the server on which ASR replication is currently going on and you want to suspend the replication.\r\n 2. Open the Services (Run -> services.msc)\r\n 3. Locate the following services and Stop these services.\r\n - Azure Site Recovery VSS Provider\r\n - InMage Scout Application Service\r\n - InMage Scout VX Agent - Sentinel\/Outpost\r\n\r\nCheckout these servers below:\r\n\r\n![Services 1](\/images\/1477354219580ea2eb7f4e6.png)\r\n\r\n![Services 2](\/images\/1477354229580ea2f52b728.png)\r\n\r\n\r\nTo **Resume** the ASR replication, just do the opposite, i.e. Log into the server and Start these services. \r\n\r\nUntil Azure adds this feature directly in the portal, this easy manual step is the workaround for suspending and resuming the replication on servers.",
		"addpost": "addpost",
		"dated": "Oct 25, 2016",
		"slug": "suspending-and-resuming-azure-site-recovery-asr-replication-on-a-single-or-multiple-servers",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Let us assume that you have enabled the Azure Site Recovery (ASR) replication on various servers. These servers can be:<\/p>\n<ul><li>On Premise VMWare VMs<\/li>\n<li>On Premise Physical Servers<\/li>\n<li>Azure ASM (older portal) VMs<\/li>\n<\/ul><p>The purpose could be anything from setting up Disaste...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Creating ASR Template from an existing Azure Infrastructure and Modifying It",
		"postDate": "19-10-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nThis blog post is for you if:\r\n\r\n - You want to backup an Infrastructure configuration\/setup in Azure and want to redeploy it to another environment then this blog is for you. \r\n - You want to create similar infrastructure as one of existing deployments in Azure\r\n - You want to modify the configurations of existing Azure IaaS infrastructure and redeploy various elements\r\n\r\n\r\nThis **Power Tip** is really easy if you know just the option. \r\n\r\n 1. If you want to make the template for all the resources in a Resource Group in Azure, then go to the properties of the Resource Group and find the option for \"**Automation Script**\".\r\n 2. If you want to get the template only for a particular resource, then navigate to that resource in the Azure Portal and then open it's settings. You will find the same \"**Automation Script**\" option. \r\n\r\nYou can check this option in the below screenshot.\r\n\r\n ![Automation Script](\/images\/1477349409580e902123ab1.png)\r\n\r\nOnce you click on the Automation Script option in the settings (of a resource group or a resource) then you will be presented with the complete JSON template along with the JSON outline on the right side (marked 2 above in the image).\r\n\r\nYou have various options for the actions to take on the template (marked 3 in the image above):\r\n\r\n - You can download the template\r\n - Add to Library to deploy the same resources again and again in your subscription\r\n - To directly deploy the resources again with the modifications you make. \r\n\r\nNormally, you would download the template to make edits to the same. After downloading, you should start cleaning up the template. There are only 4 major tasks that you need to perform as part of the cleanup:\r\n\r\n 1. Remove any **hard-coded values** for various dependent resources e.g. NIC for a VM, VHD for a VM etc.\r\n 2. Remove any resources and dependent parameters that you don't need.\r\n 3. Create **Parameters** for the values you want to change for each deployment and want the end user to provide during the deployment.\r\n 4. Create **Variables** for the values which can have fixed values but are being used at multiple locations in your template.\r\n\r\nThat's all there is to it. Using this tip you can spearhead your ARM Template developments. You don't need to start from scratch and can base your templates on the existing deployments.",
		"addpost": "addpost",
		"dated": "Oct 24, 2016",
		"slug": "step-by-step-arm-templates-creating-asr-template-from-an-existing-azure-infrastructure-and-modifying-it",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>This blog post is for you if:<\/p>\n<ul><l...><\/l...><\/ul>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step Azure Resource Manager (ARM) Templates - Index",
		"postDate": "15-08-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Azure Resource Manager (ARM) Template** is a JavaScript Object Notation (JSON) file that defines one or more resources to deploy to a resource group. It also defines the dependencies between the deployed resources. The template can be used to deploy the resources consistently and repeatedly.\r\n\r\nARM Templates can be used for the deployment of resources on both Azure and Azure Stack. Using these templates for all deployments provides you with various **benefits** including:\r\n \r\n - **Declarative Deployment** \u2013 All you need to do is declare what you need to deploy. You don't need to create any complex rules or write lengthy scripts.\r\n - **Idempotency** \u2013 You can deploy the same template over and over again without affecting the current resources.\r\n - **Predictability** - Using Templates you can have accurate predictability when performing large deployments. You reduce any manual errors.\r\n - **Repitition without Errors** - You can deploy the same infrastructure over and over again (e.g. in Dev-test environments and then in production).\r\n\r\nThis series of posts try to decode and understand the ARM Templates \"Step By Step\".\r\n\r\nThis post is an index of all the posts, in sequence, for understanding the Azure Resource Manager (ARM) Templates. This post will be updated regularly as more posts on this topic are added.\r\n\r\n 1. [Index](#) \r\n 2. [JSON 101 for IT Administrators](\/post\/step-by-step-arm-templates-json-101-for-it-administrators\/)\r\n 3. [What is in an ARM Template - Understanding All Components](\/post\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-all-components\/)\r\n 4. [What is in an ARM Template - Understanding Components 2 - Parameters](\/post\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-2-parameters\/)\r\n 5. [What is in an ARM Template - Understanding Components 3 - Variables](\/post\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-3-variables\/)\r\n 6. [What is in an ARM Template - Understanding Components 4 - Resources](\/post\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-4-resources\/)\r\n 7. [What is in an ARM Template - Understanding Components 5 - Outputs](\/post\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-5-outputs\/)\r\n 8. [Helper Functions in ARM Templates](\/post\/step-by-step-arm-templates-helper-functions\/)\r\n 9. [Building your first ARM Template](\/post\/step-by-step-arm-templates-building-your-first-arm-template\/)\r\n 10. [Deploying Template Using Azure Portal](\/post\/step-by-step-arm-templates-deploying-template-using-azure-portal\/)\r\n 11. [Deploying Template Using Azure PowerShell](\/post\/step-by-step-arm-templates-deploying-template-using-azure-powershell\/)\r\n 12. [Creating Parameters file for an ARM Template](\/post\/step-by-step-arm-templates-creating-parameters-file-for-an-arm-template\/)\r\n 13. [Authoring ARM Templates using Visual Studio](\/post\/step-by-step-arm-templates-authoring-arm-templates-using-visual-studio\/)\r\n 14. [Deploying ARM Templates using Visual Studio](\/post\/step-by-step-arm-templates-deploying-arm-templates-using-visual-studio\/)\r\n 15. [Iterating and creating multiple instances of a resource](\/post\/step-by-step-arm-templates-iterating-and-creating-multiple-instances-of-a-resource\/)\r\n 16. [Visualizing ARM Templates and Generating Diagrams](\/post\/step-by-step-arm-templates-visualizing-arm-templates-and-generating-diagrams\/)\r\n 17. [Using Key Vault to Securely Provide Information in ARM Templates](\/post\/step-by-step-arm-templates-using-key-vault-to-securely-provide-information-in-arm-templates\/)\r\n 18. [Providing PowerShell Scripts to Run after VM deployment via ARM Template](\/post\/step-by-step-arm-templates-providing-powershell-scripts-to-run-after-vm-deployment-via-arm-template\/)\r\n 19. [Deploying a Windows VM with OMS integration](\/post\/step-by-step-arm-templates-deploying-a-windows-vm-with-oms-integration\/)\r\n 20. [Creating ASR Template from an existing Azure Infrastructure and Modifying It](\/post\/step-by-step-arm-templates-creating-asr-template-from-an-existing-azure-infrastructure-and-modifying-it\/)",
		"savedraft": "savedraft",
		"dated": "Oct 21, 2016",
		"slug": "step-by-step-azure-resource-manager-arm-templates-index",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Azure Resource Manager (ARM) Template<\/strong> is a JavaScript Object Notation (JSON) file that defines one or more resources to deploy to a resource group. It also defines the dependencies between the deployed resources. The template can be used to deploy the resources consistently and r...<\/p>\n",
		"addpost": "addpost",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Providing PowerShell Scripts to Run after VM deployment via ARM Template",
		"postDate": "19-10-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"PowerShell",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nBy providing PowerShell Scripts to Run after VM deployment via ARM Template, you can accomplish various activities. \r\n\r\n - You can setup different features and roles on the VM. \r\n - You can setup web server. \r\n - You can setup SQL Database and configure it.\r\n - You can configure custom policies\r\n - And so on...\r\n\r\nYou first need to have PowerShell script files uploaded to a storage account.\r\nTo do this you add an **Extension resource** (*Microsoft.Compute\/virtualMachines\/extensions*) nested inside a VM. This extension resource should be of type \"**CustomScriptExtension**\". You provide the URLs to the PowerShell scripts inside this custom script extension.\r\n\r\n### Preparation ###\r\n\r\nAs part of the preparation process you need to:\r\n\r\n - Ensure that the PowerShell scripts are uploaded to the Storage Account and that you have the complete URL to the blob. \r\n - Or you can upload the scripts to the GitHub and get the Raw file URL\r\n - If there are more than one scripts then there should be one master script amongst all ps1 files which will internally invoke other files. This master file will be triggered via the template. Information of all file URLs will also be provided via the Template\r\n\r\n### Providing and configuring Scripts to Run After VM Deployment ###\r\n\r\nDefine the below resource to provide PowerShell scripts to be run after VM deployment:\r\n\r\n    {\r\n       \"type\": \"Microsoft.Compute\/virtualMachines\/extensions\",\r\n       \"name\": \"MyCustomScriptExtension\",\r\n       \"apiVersion\": \"2015-05-01-preview\",\r\n       \"location\": \"[parameters('location')]\",\r\n       \"dependsOn\": [\r\n           \"[concat('Microsoft.Compute\/virtualMachines\/',parameters('vmName'))]\"\r\n       ],\r\n       \"properties\": {\r\n           \"publisher\": \"Microsoft.Compute\",\r\n           \"type\": \"CustomScriptExtension\",\r\n           \"typeHandlerVersion\": \"1.7\",\r\n           \"autoUpgradeMinorVersion\":true,\r\n           \"settings\": {\r\n               \"fileUris\": [\r\n               \"http:\/\/Yourstorageaccount.blob.core.windows.net\/customscriptfiles\/start.ps1\",\r\n               \"http:\/\/Yourstorageaccount.blob.core.windows.net\/customscriptfiles\/secondaryScript.ps1\",\r\n\r\n           ],\r\n           \"commandToExecute\": \"powershell.exe -ExecutionPolicy Unrestricted -File start.ps1\"\r\n         }\r\n       }\r\n     }\r\n\r\n**How it works:**\r\n\r\n - Both the files i.e. start.ps1 and secondaryScript.ps1 are picked up from the storage account after VM deployment. Ensure to replace the URLs with your actual storage account blob URLs. You can add more files if needed.\r\n - The \"start.ps1\" is the main powerShell script which should be invoking the secondaryScript.ps1 internally\r\n - CommandToExecutre property is used to invoke the start.ps1 powerShell script on the deployed VM\r\n\r\n### Passing Parameters to the PowerShell Script dynamically ###\r\n\r\nTo pass the parameters to the PowerShell script use commandToExecute property. \r\n\r\nOne such example to pass the parameters is shown below:\r\n\r\n    \"commandToExecute\": \"[concat('powershell.exe -ExecutionPolicy Unrestricted -File start.ps1', ' -domainName ', parameters('domainNameParameter')]\"\r\n\r\nNote the use of \"concat\" helper function to create the value of the \"commandToExecute\". Also note that there is starting and trailing space in the second argument of the concat i.e. \" -domainName \".\r\n\r\nThe parameter \"domainNameParameter\" should already be defined in the template in the parameters section. If the value of parameter \"domainNameParameter\" is \"testdomain.com\" then the dynamically generated command will become:\r\n\r\n    powershell.exe -ExecutionPolicy Unrestricted -File start.ps1 -domainName testdomain.com\r\n\r\n### Securing the Access to the PowerShell Script File in Storage account ###\r\n\r\nLet us assume you want to deploy Windows VM with Protected settings. Then use the below sample to provide the PowerShell files.\r\n\r\n    {\r\n        \"publisher\": \"Microsoft.Compute\",\r\n        \"type\": \"CustomScriptExtension\",\r\n        \"typeHandlerVersion\": \"1.7\",\r\n        \"settings\": {\r\n            \"fileUris\": [\r\n                \"http: \/\/Yourstorageaccount.blob.core.windows.net\/customscriptfiles\/start.ps1\"\r\n            ]\r\n        },\r\n        \"protectedSettings\": {\r\n            \"commandToExecute\": \"powershell.exe -ExecutionPolicy Unrestricted -start.ps1\",\r\n            \"storageAccountName\": \"yourStorageAccountName\",\r\n            \"storageAccountKey\": \"yourStorageAccountKey\"\r\n        }\r\n    }\r\n\r\nNote the use of \"protectedSettings\" above. This time you also specify the Storage Account Name and the Storage Account Key.\r\n\r\nYou can also refer the official documentation here: [Windows VM Custom Script extensions with Azure Resource Manager templates](https:\/\/azure.microsoft.com\/en-us\/documentation\/articles\/virtual-machines-windows-extensions-customscript\/).",
		"addpost": "addpost",
		"dated": "Oct 19, 2016",
		"slug": "step-by-step-arm-templates-providing-powershell-scripts-to-run-after-vm-deployment-via-arm-template",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>By providing PowerShell Scripts to Run af...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Using Key Vault to Securely Provide Information in ARM Templates",
		"postDate": "18-10-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"KeyVault",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nWhen providing passwords and other secure and confidential information in ARM Templates, you need to ensure that you don't hard code these values anywhere. You don't need to compromise the security of the system while trying to automate deployments. Your end goal is to try to automate as much as possible and reduce manual involvement. \r\n\r\n**Key Vaults** are there to solve this problem without compromising any security. In fact, they make the whole solution more secure with least manual intervention.\r\n\r\n### Setting up the Key Vault ###\r\n\r\nWe first need to setup the Key Vault in Azure to be able to use it via ARM Template parameters.\r\n\r\n<ol>\r\n    <li>\r\n<b>Create a Key Vault in Azure<\/b> by going to <i>New -> Security + Identity -> Key Vault<\/i>. Provide a name, subscription, resource group etc. and provision the Key Vault. Once it is created navigate to it by clicking on \"More Services\" and searching for Key Vault. Click on the name of the vault you created. E.g. In this example we have named the key vault to \"TestKeyVault101\".\r\n\r\n<br \/>\r\n<b>Note<\/b> that this feature is in Preview  at the time of writing of this blog.\r\n\r\n    <\/li>\r\n\r\n    <li>\r\n        Next, we need to <b>Add a Secret<\/b> in the key vault. Click on the Secrets and then the + Add button at the top, as shown below:\r\n<br \/><br \/>\r\n<img alt=\"Adding Secret\" src=\"\/images\/1476818644580676d447b16.png\" \/>\r\n<br \/><br \/>\r\nNext, in the \"Create a secret\" blade, set the Upload Options to Manual. Provide a name and value to the secret. Value is the password you want to securely save.\r\nEnsure that the Enabled is set to Yes. Optionally you can set the activation and expiration dates. In this example, we are setting the Secret Name to \"DefaultAdminPasswordSecret\".\r\n<br \/><br \/>\r\n<img alt=\"Creating Secret\" src=\"\/images\/1476818650580676da89fee.png\" \/>\r\n    <\/li>\r\n\r\n    <li>\r\n        Next, we will set the <b>Access Policies <\/b> to provide access to the user under the context of which the template will be deployed. This is the user which will be accessing the Key Vault. Go to Key Vault settings and select Access Policies. Add the new user as shown below:\r\n<br \/><br \/>\r\n<img alt=\"Access Policies\" src=\"\/images\/14768190995806789bad0c4.png\" \/>\r\n<br \/><br \/>\r\n\r\n    <\/li>\r\n\r\n    <li>\r\n        Next, we will set the <b>Advanced Access Policies <\/b> to indicate that this key vault can be accessed via ARM Templates. Go to Key Vault settings and select Advanced Access Policies. Ensure that the checkbox for \"<i>Enable access to Azure Resource Manager for template deployment<\/i>\" is checked as shown below:\r\n<br \/><br \/>\r\n<img alt=\"Access Policies\" src=\"\/images\/1476819105580678a1cfc9f.png\" \/>\r\n<br \/> <br \/>\r\n\r\n    <\/li>\r\n\r\n<\/ol>\r\n\r\nWe are now all set with our Key Vault. Next, we will be using the secret we created to set the local Administrator user's password.\r\n\r\n### Using the Key Vault Secret in ARM Template ###\r\n\r\nLet us assume that you have a JSON ARM Template which deploys a VM. One of the parameters in this template is AdminPassword. You want to use the Key Vault Secret to provide the value for this parameter. \r\n\r\n\r\n\r\n\r\n**First**, ensure that the parameter is declared as <i>securestring<\/i> as shown below:\r\n\r\n    \"adminPassword\": {\r\n        \"type\": \"securestring\",\r\n        \"metadata\": {\r\n            \"description\": \"Password for local admin account.\"\r\n        }\r\n    }\r\n\r\n**Next**, we need to use the parameters file for this template. If you don't have one already create a new one. We can provide the reference to the Key Vault Secret as the value of admin user's password parameter in this file. General Syntax of providing reference is as shown follow:\r\n\r\n    \"adminPassword\": {\r\n      \"reference\": {\r\n        \"keyVault\": {\r\n          \"id\": \"Key Vault Id Here\"\r\n        },\r\n        \"secretName\": \"Name of the secret in Azure Key Vault\"\r\n      }\r\n    }\r\n\r\nNow the ID in the above Syntax can be provided as:\r\n\r\n*\/subscriptions\/{guid}\/resourceGroups\/{group-name}\/providers\/Microsoft.KeyVault\/vaults\/{vault-name}*. \r\n\r\nNote to replace the *{guid}* with actual GUID for the subscription (without the curly braces), replace *{group-name}* with the actual name of the resource group and *{vault-name}* with the actual name of the Key Vault.\r\n\r\nYou can also find the Resource ID for the Key Vault by navigating to it in the Azure Portal and then checking it's properties as shown below:\r\n\r\n![Key Vault Resource ID](\/images\/147682308858068830f2f8e.png)\r\n\r\nThe complete parameter file looks like below:\r\n\r\n    {\r\n      \"$schema\": \"http:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentParameters.json#\",\r\n      \"contentVersion\": \"1.0.0.0\",\r\n      \"parameters\": {\r\n        \"OtherParameter\": {\r\n          \"value\": \"otherValue\"\r\n        },\r\n        \"adminPassword\": {\r\n          \"reference\": {\r\n            \"keyVault\": {\r\n              \"id\": \"\/subscriptions\/11111aaa-1a11-1a11-a1aa-1a1111a111a1\/resourceGroups\/TestRG101\/providers\/Microsoft.KeyVault\/vaults\/TestKeyVault101\"\r\n            },\r\n            \"secretName\": \"DefaultAdminPasswordSecret\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nNext, deploy the template using PowerShell and pass this parameters file as explained here: [Deploying Template Using Azure PowerShell](\/post\/step-by-step-arm-templates-deploying-template-using-azure-powershell\/). \r\n\r\nExample PowerShell cmdlet to deploy will look like:\r\n\r\n    New-AzureRmResourceGroupDeployment -Name ExampleDeployment -ResourceGroupName TestResourceGroup01 -TemplateFile .\\TemplateFile.json -TemplateParameterFile .\\ParametersFile.json\r\n\r\nNow that you know how to use values from Key Vaults, you can make the automated deployment of resources more secure in your environment.",
		"addpost": "addpost",
		"dated": "Oct 18, 2016",
		"slug": "step-by-step-arm-templates-using-key-vault-to-securely-provide-information-in-arm-templates",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>When providing passwords and other secure...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Visualizing ARM Templates and Generating Diagrams",
		"postDate": "17-10-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nWhen developing ARM Templates, from time to time you will need to:\r\n\r\n - Visualize your ARM Templates\r\n - Generate Diagrams for your ARM Templates\r\n\r\nMicrosoft has provided an Open Source tool for this named \"ARMVIZ\" (short for ARM Visualizer). This tool can be accessed by navigating to the below URL:\r\n\r\n[http:\/\/armviz.io\/](http:\/\/armviz.io\/)\r\n\r\n\r\n### Navigating ARMVIZ ###\r\n\r\nARMVIZ is a nice in-browser application to visualize all the components in a template. It also shows the dependencies between various components. Using this web application you can:\r\n\r\n - Either visualize your own developed template,\r\n - Or inspect existing templates on GitHub\r\n\r\nLet's take a quick tour of the interface:\r\n\r\n![ARMVIZ Interface](\/images\/14768067785806487ad77dd.png)\r\n\r\nI have numbered various elements of the interface in the above diagram. Let's quickly review these elements:\r\n\r\n<ol>\r\n\r\n    <li>\r\n              <b>Designer<\/b> - This is represented by an \"eye\" icon on the left bar. This should be selected by default. If you are in the editor mode then you can click this and the diagram will be shown in the middle portion of the screen.\r\n    <\/li>\r\n\r\n    <li>\r\n              <b>Editor<\/b> - This is represented by \"<\/>\" text for code on the left bar. Clicking on this will take you to the editor portion of the ARMVIZ tool. In this area, you can edit your template while still in the tool. You can add or remove components. You can even edit the components or add dependencies.\r\n    <\/li>\r\n\r\n     <li>\r\n              <b>Canvas area<\/b> - This is the main screen (the middle area) where the template is displayed.\r\n    <\/li>\r\n\r\n    <li>\r\n              <b>File Menu<\/b> - This is the main and simple menu in the whole web application in the top bar. It has two options:\r\n              <ol type=\"a\">\r\n                       <li>\r\n                             <b>Open Local Template<\/b> - You can open an ARM Template JSON from your local computer to visualize using this menu option.\r\n                       <\/li>\r\n                       <li>\r\n                             <b>Download Template<\/b> - You can download the current template by using this menu option.\r\n                       <\/li>\r\n              <\/ol>\r\n    <\/li>\r\n\r\n    <li>\r\n              <b>Quickstart ARM Templates<\/b> - This is the link to external library of Quickstart ARM Templates on GitHub. These starter templates can help you save a lot of time. Instead of starting from scratch you can use these templates to fasten the ARM Templates Development.\r\n    <\/li>\r\n\r\n<\/ol>\r\n\r\nThis is how the Editor portion of the tool looks like. Use this area to edit or update your template. \r\n**Note:** If there will be mistakes, such as missing parenthesis in your template, the designer will not show any diagram. \r\n\r\n![Editor Area](\/images\/147680732358064a9ba1310.png)\r\n\r\nYou can zoom into and zoom out of your template diagram by rolling the mouse wheel. You can also drag and reposition various elements. \r\nTake a screenshot once you have repositioned the elements as per your requirements and have zoomed into an appropriate level.\r\n\r\nBelow screenshot is taken from a much more complex template.\r\n\r\n![Complex ARM Template Diagram](\/images\/1476806791580648877fed3.png)\r\n\r\nIn conclusion, ARMVIZ can enable you to easily visualize your ARM Templates. It can empower you to generate diagrams for your documentation and to present to your team.",
		"addpost": "addpost",
		"dated": "Oct 17, 2016",
		"slug": "step-by-step-arm-templates-visualizing-arm-templates-and-generating-diagrams",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>When developing ARM Templates, from time ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Deploying a Windows VM with OMS integration",
		"postDate": "16-10-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nYou can deploy a Windows VM with OMS integration. You can have the OMS extension installed. And then you can onboard the VM to a specified workspace. \r\n\r\n### Prerequisites ###\r\n\r\nYou need already have an OMS workspace setup in your subscription. You need to have the following information about this OMS Workspace:\r\n\r\n 1. OMS workspace ID\r\n 2. OMS workspace Key\r\n\r\nYou may obtain the workspace ID and key by going to the Connected Sources tab in the Settings page in the OMS Portal or to the Direct Agent blade in the Azure portal.\r\n\r\nIn the Azure Portal go to the Log Analytics -> Click on the OMS Workspace you want to use. Click on the \"OMS Portal\" to navigate to the OMS Portal.\r\n\r\n![Link to OMS Portal](\/images\/14768464545806e3762d97c.png)\r\n\r\nIn the OMS portal, navigate to the Settings.\r\n\r\n![OMS Portal Settings](\/images\/14768422705806d31e60125.png)\r\n\r\nIn Settings, go to the Connected Sources -> Windows Servers. Note the Workspace ID and the Primary Key as shown below:\r\n\r\n![OMS Portal ID and Key](\/images\/14768422755806d323b2caa.png)\r\n\r\n### ARM Template Sections for OMS integration ###\r\n\r\nWithin the VM resource, you need to define the OMS extension as shown below:\r\n\r\n      \"resources\": [\r\n        {\r\n          \"type\": \"extensions\",\r\n          \"name\": \"Microsoft.EnterpriseCloud.Monitoring\",\r\n          \"apiVersion\": \"[variables('apiVersion')]\",\r\n          \"location\": \"[resourceGroup().location]\",\r\n          \"dependsOn\": [\r\n            \"[concat('Microsoft.Compute\/virtualMachines\/', variables('vmName'))]\"\r\n          ],\r\n          \"properties\": {\r\n            \"publisher\": \"Microsoft.EnterpriseCloud.Monitoring\",\r\n            \"type\": \"MicrosoftMonitoringAgent\",\r\n            \"typeHandlerVersion\": \"1.0\",\r\n            \"autoUpgradeMinorVersion\": true,\r\n            \"settings\": {\r\n              \"workspaceId\": \"Your Workspace ID Here\"\r\n            },\r\n            \"protectedSettings\": {\r\n              \"workspaceKey\": \"Your Workspace Key Here\"\r\n            }\r\n          }\r\n        }\r\n      ]\r\n\r\nThe above configures the OMS on the VM. Note that you need the nested extension resource of type \"Microsoft.EnterpriseCloud.Monitoring\". \r\n\r\nAlso, note the Workspace Id and Key in the template section above. Enter the values as per your environment which we found in the Prerequisites section above. \r\n\r\n### Providing the Workspace ID and Workspace Key Dynamically ###\r\n\r\nYou can also provide the Workspace Id and the Workspace Key dynamically by only using the OMS Workspace name. Follow the below sample. Note the use of reference, listKeys, and resourceId helper functions.\r\n\r\n    \"settings\": {\r\n              \"workspaceId\": \"[reference(resourceId('Microsoft.OperationalInsights\/workspaces\/', parameters('workspaceName')), '2015-03-20').customerId]\"\r\n            },\r\n            \"protectedSettings\": {\r\n              \"workspaceKey\": \"[listKeys(resourceId('Microsoft.OperationalInsights\/workspaces\/', parameters('workspaceName')), '2015-03-20').primarySharedKey]\"\r\n            }\r\n\r\n**Reference:** You can check the complete quick starter template for OMS integration here: [GitHub Sample - Deployment of a Windows VM with OMS Extension](https:\/\/github.com\/Azure\/azure-quickstart-templates\/tree\/master\/201-oms-extension-windows-vm)",
		"addpost": "addpost",
		"dated": "Oct 16, 2016",
		"slug": "step-by-step-arm-templates-deploying-a-windows-vm-with-oms-integration",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>You can deploy a Windows VM with OMS inte...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Automation Preview Solution - Start\/Stop VMs during off-hours ",
		"postDate": "11-10-2016",
		"tags": [
			"Automation",
			"Azure",
			"AzureResourceManager",
			"Runbooks"
		],
		"category": "Azure",
		"body": "Starting and Stopping VMs during off-hours can mean lots of cost optimizations for you. We have been implementing this via custom Runbooks and schedules for various customers. Now there is out of the box support for this within Azure. The feature is currently in Preview but you can build on this.\r\n\r\n### What do I need - Prerequisites ###\r\n\r\nBefore beginning check that your region has this feature available. Just like with any other automation solution, you will need to have:\r\n\r\n 1. OMS Workspace (or you can create new while adding the solution)\r\n 2. Automation Account (or you can create new)\r\n 3. Azure Run As account (and not the Microsoft Account)\r\n 4. For email support, Office 365 business-class subscription is required\r\n\r\nNote: The VMs that you want to manage should be in the same subscription and resource group as where the Automation account resides.\r\n\r\n### How to Add ###\r\nTo Add the solution, click on \"+ New\" symbol and search for \"Start\/Stop VMs during off-hours\". You will find the below solution available to be created:\r\n\r\n![Start and Stop VMs Preview Solution](\/images\/1476808753580650317ab68.png)\r\n\r\n### What does it Contain ###\r\n\r\nThe solution is a combination of various automation assets:\r\n\r\n 1. Runbooks\r\n 2. Variables\r\n 3. Schedules\r\n 4. Credentials\r\n\r\nYou can change some configurations during and some after the deployment. \r\n\r\nFind out more here: [Start\/Stop VMs during off-hours [Preview]](https:\/\/azure.microsoft.com\/en-us\/documentation\/articles\/automation-solution-vm-management\/)\r\n",
		"addpost": "addpost",
		"dated": "Oct 11, 2016",
		"slug": "azure-automation-preview-solution-start-stop-vms-during-off-hours",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Starting and Stopping VMs during off-hours can mean lots of cost optimizations for you. We have been implementing this via custom Runbooks and schedules for various customers. Now there is out of the box support for this within Azure. The feature is currently in Preview but you can build on this....<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure RemoteApp is going away. New Purchases in portal are now stopped ",
		"postDate": "10-10-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"RemoteApp"
		],
		"category": "Azure",
		"body": "Today I got an email saying \"Action recommended: Deleting unnecessary RemoteApp collections can save you money\". This email is also a reminder from Microsoft that the RemoteApp is going away. We need to plan for the migration for the existing RemoteApps to other platforms.\r\n\r\n### What this means ###\r\nThis means various things to you. Most prominently:\r\n\r\n - Over the next year, the support for Remote App is going away\r\n - You need to plan and migrate the existing RemoteApp application to other platforms\r\n - New Purchases in the Azure portal for RemoteApp are no longer available\r\n\r\n### When is the service coming to Stop ###\r\n\r\nThe service will have support through **August 31st, 2017**. That's when this service will come to a stop. New service purchase was stopped effective October 1st, 2016.\r\n\r\n### What are my Options ###\r\n\r\nYou have various options for migration. The option being **recommended** by Microsoft is using \"**Citrix XenApp express**\". In fact, Microsoft is partnering up with Citrix on this. This service is not yet available and is currently under development. As this will be the native option in Azure this will be your best bet once it is announced. You can learn more about this solution here on Citrix site: [Citrix and Microsoft](https:\/\/www.citrix.com\/global-partners\/microsoft\/remote-app.html)\r\n\r\nThe second option is to use Remote Desktop Services (RDS) deployed on Azure IaaS. This means to set up the infrastructure yourself and then deploy and host the RDS solution on that infrastructure in Azure. You can know more about the steps here: [Host desktops and apps in Remote Desktop Services on Azure](https:\/\/technet.microsoft.com\/en-us\/windows-server-docs\/compute\/remote-desktop-services\/host-desktops-and-apps-in-remote-desktop-services)\r\n\r\nAnother option is to use  hosted solutions from various 3rd party vendors. You can find such solution from various partners from the Azure marketplace. You can also read and get to know the complete list of these hosting partners here: [RDS - Partners for hosting desktops and apps](https:\/\/technet.microsoft.com\/en-us\/windows-server-docs\/compute\/remote-desktop-services\/rds-hosting-partners)\r\n\r\n**In conclusion,** I will recommend to wait and look out for Citrix XenApp express solution. If you need new remote application solutions then you need to either deploy your own solution or use one of the hosted solutions by 3rd party vendors. You can read more about the official announcement here: [Application Remoting and the Cloud](https:\/\/blogs.technet.microsoft.com\/enterprisemobility\/2016\/08\/12\/application-remoting-and-the-cloud\/?WT.mc_id=azurebg_email_Trans_1218_No_Usage_Azure_RemoteApp)",
		"addpost": "addpost",
		"dated": "Oct 10, 2016",
		"slug": "azure-remoteapp-is-going-away-new-purchases-in-portal-are-now-stopped",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Today I got an email saying \"Action recommended: Deleting unnecessary RemoteApp collections can save you money\". This email is also a reminder from Microsoft that the RemoteApp is going away. We need to plan for the migration for the existing RemoteApps to other platforms.<\/p>\n<h3>What ...<\/h3>\n"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Iterating and creating multiple instances of a resource",
		"postDate": "27-09-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nIn Azure Resource Manager (ARM) templates, you can define the variable once and then iterate\/loop over that definition and create multiple instances of that resource.\r\nThere are 3 special constructs in ARM templates to help you with this. \r\n\r\nThese **constructs** are:\r\n\r\n - **copy** - This is a property that is defined within the resource. This is the construct which when defined indicates that this resource needs to be looped over and created multiple times. It also specifies the number of times to iterate via \"count\" property.\r\n - **copyIndex()** - Used to access the current iteration value. Its value for the first iteration is **zero**. For the second iteration, its value is 1 and so on... You can pass it an integer (number) as a parameter. Whatever number you pass that will become the value for the first iteration and subsequent iterations. E.g. copyIndex(20) will compute to 20 in the first iteration, 21 in the second iteration and so on.\r\n - **length** - This is the method of arrays. It computes the number of elements in an array. It can be used to set the \"count\" property of \"copy\" construct.\r\n\r\n**Note:** Arrays are always **zero indexed**. What that means is that the first element of the array is indexed at 0, the second element of the array is indexed at 1, and so on...\r\n\r\n### 1. Simple Example ###\r\nLet us understand these constructs using an example.\r\n\r\n    \"parameters\": { \r\n      \"count\": { \r\n        \"type\": \"int\", \r\n        \"defaultValue\": 3 \r\n      } \r\n    }, \r\n    \"resources\": [ \r\n      { \r\n          \"name\": \"[concat('HarvestingClouds-', copyIndex(100))]\", \r\n          \"type\": \"Microsoft.Web\/sites\", \r\n          \"location\": \"Central US\", \r\n          \"apiVersion\": \"2015-08-01\",\r\n          \"copy\": { \r\n             \"name\": \"websitescopy\", \r\n             \"count\": \"[parameters('count')]\" \r\n          }, \r\n          \"properties\": {\r\n              \"serverFarmId\": \"hostingPlanName\"\r\n          }\r\n      } \r\n    ]\r\n\r\n The above example will **result** in creation of below 3 web apps in Azure:\r\n\r\n - HarvestingClouds-100\r\n - HarvestingClouds-101\r\n - HarvestingClouds-102\r\n\r\nNote the usage of \"copy\" property in the above code example:\r\n\r\n     \"copy\": { \r\n                 \"name\": \"websitescopy\", \r\n                 \"count\": \"[parameters('count')]\" \r\n              }\r\n\r\nAs you can notice above, the value of this property is another JSON object. This object has further two properties: \r\n\r\n - First is the name property, which provides the name to the looping construct. This can be any meaningful name. \r\n - The second property is the count, which specifies how many times this resource definition should be deployed. Note that the value is set to the parameter named \"count\". The name of the parameter can be anything but the value of the parameter has to be a number (i.e. an integer).\r\n\r\nNext, note how the name of the web application is constructed using the copyIndex() helper function.\r\n\r\n    \"name\": \"[concat('HarvestingClouds-', copyIndex(100))]\"\r\n\r\nThe above value uses two helper functions. First is the \"concat()\" which is concatenating (i.e. joining) two values. First value is the prefix string \"HarvestingClouds-\". Second parameter and the second helper function is `copyIndex(100)`. This specifies the current iteration value, which is offset with 100. So for the first iteration, the value will be 0+100 = 100, for the second iteration the value will be 1+100 = 101 and so on...\r\n\r\n\r\n###  2. Example with an Array ###\r\n\r\nLet's assume that you want to deploy multiple web apps for different purposes. You need one web app for Production, one for Staging or testing and one for Development. You want to name the web apps deployed with the purpose concatenated.\r\nThe below example uses an array to set the values for the web app name:\r\n\r\n    \"parameters\": { \r\n      \"purpose\": { \r\n         \"type\": \"array\", \r\n             \"defaultValue\": [ \r\n             \"Production\", \r\n             \"Staging\", \r\n             \"Development\" \r\n          ] \r\n      }\r\n    }, \r\n    \"resources\": [ \r\n      { \r\n          \"name\": \"[concat('HarvestingClouds-', parameters('purpose')[copyIndex()])]\", \r\n          \"type\": \"Microsoft.Web\/sites\", \r\n          \"location\": \"Central US\", \r\n          \"apiVersion\": \"2015-08-01\",\r\n          \"copy\": { \r\n             \"name\": \"websitescopy\", \r\n             \"count\": \"[length(parameters('purpose'))]\" \r\n          }, \r\n          \"properties\": {\r\n              \"serverFarmId\": \"hostingPlanName\"\r\n          } \r\n      } \r\n    ]\r\n\r\nThe **output** of the above sample will be 3 web apps deployed in Azure with following names:\r\n\r\n - HarvestingClouds-Production\r\n - HarvestingClouds-Staging\r\n - HarvestingClouds-Development\r\n\r\nNote in the above code sample that the parameter \"purpose\" is an array with 3 values i.e. Production, Staging, and Development. Then in the \"copy\" construct the count property is set using the length of this array as shown below. As there are 3 elements in the array, the value of count will be 3 and the resource will be deployed 3 times.\r\n\r\n    \"count\": \"[length(parameters('purpose'))]\" \r\n\r\nNext, the name of the web app is set using the copyIndex() and the array itself as shown below:\r\n\r\n    \"name\": \"[concat('HarvestingClouds-', parameters('purpose')[copyIndex()])]\"\r\n\r\nAs earlier, it uses concat helper function to add two strings. The first string is simple text i.e. \"HarvestingClouds-\", which becomes the prefix for the web app name. Second is finding out the value of the array based on the current iteration. For the first iteration, copyIndex() will compute to zero, therefore the second parameter becomes `parameters('purpose')[0]`. This will fetch the 0th element of the array which is Production. Similarly, for the second iteration, copyIndex() will compute to 1, therefore the second parameter becomes `parameters('purpose')[1]`. This will fetch the second element of the array (or element at index value 1) which is Staging, and so on...\r\n\r\n### 3. Depending upon resources being deployed by the copy Loop ###\r\n\r\nLet's assume you want to deploy a storage account. But you want to deploy it only after all the web apps are deployed by the loop. In this scenario, the dependsOn property of a resource is set to the name of the \"copy\" property of the resource, rather than the resource itself.\r\n\r\n        {\r\n            \"apiVersion\": \"2015-06-15\",\r\n            \"type\": \"Microsoft.Storage\/storageAccounts\",\r\n            \"name\": \"teststorage101\",\r\n            \"location\": \"[resourceGroup().location]\",\r\n            \"properties\": {\r\n                \"accountType\": \"Standard_LRS\"\r\n             }\r\n           \"dependsOn\": [\"websitescopy\"]\r\n        }\r\n\r\nNote above that the dependsOn property is set to the name property of the copy in the earlier web app example. This storage account will not be deployed until all 3 web apps are not deployed.\r\n\r\n### 4. Limitations ###\r\n\r\nThere are two limitations on the use of the copy to iterate and create multiple resource instances:\r\n\r\n 1. **Nested Resources** - You cannot use a copy loop for a nested resource. If you need to create multiple instances of a resource that you typically define as nested within another resource, you must instead create the resource as a top-level resource and define the relationship with the parent resource through the **type** and **name** properties.\r\n 2. **Looping Properties of a Resource** - You can only use copy on resource types, not on properties within a resource type. E.g. Creating multiple data disks within a VM.\r\n\r\n\r\n\r\nThat is all there is to iterate and creating multiple resources from a single definition. When your templates will start becoming complex then these constructs\/helper functions will help you a lot. E.g. you may need to deploy multiple load balanced resources, then you can use the concepts defined in this post.\r\n\r\nYou can also refer the official documentation here: [copy, copyIndex, and length](https:\/\/azure.microsoft.com\/en-us\/documentation\/articles\/resource-group-create-multiple\/)",
		"addpost": "addpost",
		"dated": "Sep 27, 2016",
		"slug": "step-by-step-arm-templates-iterating-and-creating-multiple-instances-of-a-resource",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>In Azure Resource Manager (ARM) templates...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Deploying ARM Templates using Visual Studio",
		"postDate": "20-09-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates",
			"VisualStudio"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nIn the last blog we saw [How to use Visual Studio to author ARM templates](\/post\/step-by-step-arm-templates-authoring-arm-templates-using-visual-studio\/). In this blog we will see how to use Visual Studio (VS) to deploy the template without leaving VS.\r\n\r\nDeploying with Visual Studio is very simple, straightforward and very intuitive. Just follow the below steps.\r\n\r\n<ol>\r\n\r\n    <li>\r\nEither go to the Solution Explorer -> Right Click on the project and select \"Deploy -> New Deployment\" as shown below:<br \/>\r\n<img src=\"\/images\/147578624957f6b6090d5eb.png\" alt=\"New Deployment - Solution Explorer\" \/><br \/>\r\n\r\nOr you can go to the menu option Project -> Deploy -> New Deployment as shown below:<br \/>\r\n<img src=\"\/images\/147578624157f6b601b647b.png\" alt=\"New Deployment - Project Menu\" \/>\r\n\r\n<br \/>\r\nOnce you click on the \"New Deployment\", you will be presented with the below Dialog for the deployment.<br \/>\r\n<img src=\"\/images\/147578742957f6baa5bfb1c.png\" alt=\"New Deployment Dialog\" \/><br \/>\r\n\r\nIf you are not logged in then it will ask you to log into your Azure account. <br \/>\r\n\r\n    <\/li>\r\n\r\n    <li>\r\nIn the Dialog for \"Deploy to Resource Group\" select the Subscription by clicking on the first drop down.<br \/>\r\n    <\/li>\r\n\r\n    <li>\r\nNext click on the drop down for the Resource Group. You can either select an existing Resource Group or you can click on \"<Create New...>\" option to create a new resource group for the current deployment.\r\n<br \/>\r\n<img src=\"\/images\/147578768757f6bba7dd5ec.png\" alt=\"Resource Group creation\" \/>\r\n<br \/>\r\nIf you click on \"<Create New...>\" option to create a new Resource Group then you will be presented with an additional popup.\r\n<br \/>\r\n<img src=\"\/images\/147578794457f6bca893e66.png\" alt=\"Resource Group creation additional Popup\" \/><br \/>\r\nIn this additional popup, type the name for your new resoruce group and the location in Azure where this should be created. Click \"Create\" once done in the additional popup. <br \/><br \/>\r\n    <\/li>\r\n\r\n    <li>\r\nNext, we are going to provide the value for the parameters. Go ahead and click on the \"Edit Parameters...\" link in the \"Deploy to Resource Group\" dialog. This will open another popup to provide the parameters. <br \/>\r\nButton to edit parameters is shown below:<br \/>\r\n<img src=\"\/images\/147578820657f6bdae623f9.png\" alt=\"Edit Parameters\" \/> <br \/>\r\n\r\nAdditional dialog to provide parameters is shown below: <br \/>\r\n<img src=\"\/images\/147578821157f6bdb3ec989.png\" alt=\"Providing Parameters\" \/> <br \/>\r\n\r\nNote the following points in the parameters:\r\n<ol type=\"a\">\r\n<li>Corresponding to the string parameters, a text box is provided.<\/li>\r\n<li>For the secure string parameters like password, a secure password text box is provided.<\/li>\r\n<li>Corresponding to the parameters for which you have defined the \"Allowed Values\" in your template, a combo box (or drop Down) is provided with the \"default Value\" selected by default.<\/li>\r\n<\/ol>\r\n Click Ok once done\r\n   <\/li>\r\n\r\n    <li>\r\nNext, click on the Deploy button to deploy the template to Azure.\r\n    <\/li>\r\n\r\n    <li>\r\nYou can check the results in the <b>Outputs<\/b> window in the Visual Studio. Along with time stamp, it will show you what steps Visual Studio took to perform the deployment. It uses the values of parameters you provided and uses the PowerShell script to deploy the resources. You will notice the PowerShell window opening and prompt for the Admin Password. \r\n<br \/>\r\n<b>Note 1: <\/b>The PowerShell window may not come above as active window. Just search and click on the window in your Taskbar. <br \/>\r\nProvide the password and hit Enter as shown below:\r\n<img src=\"\/images\/147578930357f6c1f7c0b65.png\" alt=\"PowerShell window\" \/> <br \/>\r\n<br \/>\r\n<b>Note 2: <\/b>It may take some time to complete the deployment after that. Wait and do not close the PowerShell window. It should automatically close once done.\r\n<br \/>\r\n<b>Note 3: <\/b>Once the deployment completes the last line in Output window in Visual Studio will be: \"Successfully deployed template...\" as shown below:\r\n<br \/>\r\n<img src=\"\/images\/147578931057f6c1fecaa6a.png\" alt=\"Success - Output Window\" \/> <br \/>\r\n\r\n    <\/li>\r\n\r\n<\/ol>\r\n\r\nThis is it! Navigate to the Azure portal and validate the deployed resources in your selected resource group.",
		"addpost": "addpost",
		"dated": "Sep 20, 2016",
		"slug": "step-by-step-arm-templates-deploying-arm-templates-using-visual-studio",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>In the last blog we saw <a href=\"\/post\/st...\"><\/a><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Authoring ARM Templates using Visual Studio",
		"postDate": "14-09-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates",
			"VisualStudio"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\n**Visual Studio** is a very powerful tool when it comes to authoring ARM Templates. \r\n\r\n**Key features** which make it a tool of our choice are:\r\n\r\n - In-house support for ARM Templates\r\n - Smart IntelliSense\r\n - Pre-populated templates for various Azure resources\r\n - JSON Outlining\r\n - Easy Deployment options\r\n\r\nThe screenshots in this blog post are from Visual Studio 2013. You can use other newer versions as well.\r\n\r\n### Pre-Requisites ###\r\n\r\nYou need to have Azure SDK installed to get true power of Visual Studio with Azure integration. If you don't have it already, you can install the same from here: [Azure SDK Downloads](https:\/\/azure.microsoft.com\/en-us\/downloads\/)\r\n\r\n### Authoring First ARM Template in Visual Studio ###\r\n\r\nAuthoring with Visual Studio is very easy. \r\n\r\n<ol type=\"1\">\r\n<li>To get started just launch the Visual Studio from the Start menu.<\/li>\r\n<li>Next, Create a new Project of type \"Azure Resource Group\" by navigating to Templates -> Visual C# -> Cloud <br \/><br \/>\r\n\r\n<img src=\"\/images\/147576108957f653c1768fc.png\" alt=\"New Project\" \/>\r\n<br \/>\r\n\r\n<\/li>\r\n\r\n<li>\r\n    Next, you will be presented with a dialog to \"Select Azure Template\". If you want to author from scratch then choose a Blank Template. Else select one of the starter template. For this blog, we will be using \"Windows Virtual Machine\" Template.<br \/><br \/>\r\n    <img src=\"\/images\/147576828457f66fdc0f0e6.png\" alt=\"Selecting Azure Template\" \/>\r\n    <br \/>\r\n<\/li>\r\n\r\n<li>\r\n    Project is created with various folders and files. You can explore the project in the solution explorer in Visual Studio.<br \/><br \/>\r\n    <img src=\"\/images\/147576986357f6760758619.png\" alt=\"Solution Explorer\" \/>\r\n    <br \/>\r\n\r\nLet us see what these folders and files are:\r\n        <ol type=\"a\">\r\n            <li><b>Scripts<\/b>: The single PS1 file is to create a new Resource Group and deploy the ARM Template. It uses \"New-AzureRmResourceGroupDeployment\" PowerShell cmdlet to deploy the template. <\/li>\r\n            <li><b>Templates<\/b>: \"<i>WindowsVirtualMachine.json<\/i>\" is the main ARM Template file that we are interested in. Also, \"<i>WindowsVirtualMachine.parameters.json<\/i>\" is the parameters file for the ARM template.<\/li>\r\n            <li><b>Tools<\/b>: This folder contains the \"AzCopy.exe\" file to help you copy any artifacts to Azure.<\/li>\r\n        <\/ol>\r\n<\/li>\r\n\r\n<li>\r\n    Double click and open the \"<i>WindowsVirtualMachine.json<\/i>\" file to open it. You will be presented with a huge JSON file. Collapse the section by clicking the small \"-\" signs to the left of the file. Also notice the <b>JSON Outline<\/b> panel to the left. This is your biggest friend in Visual Studio when authoring ARM Templates.<br \/><br \/>\r\n    <img src=\"\/images\/147577487757f6899d297b5.png\" alt=\"\" \/>\r\n    <br \/>\r\nYou can immediately notice that key sections both in the template in the middle and in the JSON Oultine panel on the left (in the image above) are:\r\n               <ol type=\"a\">\r\n                   <li>parameters<\/li>\r\n                   <li>variables<\/li>\r\n                   <li>resources<\/li>\r\n               <\/ol>\r\nYou can click on any of the elements in the left JSON Outline panel and the same section will be highlighted in the center, in the JSON template file.\r\n    <br \/>\r\n\r\n<\/li>\r\n\r\n<li>\r\n    Next, let us look at JSON Outline panel and check how it can provide us more information and help us in authoring templates.<br \/><br \/>\r\n    <img src=\"\/images\/147578115457f6a2226c2be.png\" alt=\"JSON Outline Panel\" \/>\r\n    <br \/>\r\n    You can see that the panel provides a special icon for each type of the resource. In our current template the various resources listed are:\r\n    <ol type=\"a\">\r\n        <li>StorageAccount<\/li>\r\n        <li>PublicIPAddress<\/li>\r\n        <li>VirtualNetwork<\/li>\r\n        <li>NetworkInterface<\/li>\r\n        <li>VirtualMachine<\/li>\r\n    <\/ol>\r\n\r\nClick on each of the resources and inspect how their JSON structure looks and differs. You will immediately notice that the major difference in each of these resources is in their <b>Type<\/b> and <b>Properties<\/b>.\r\n\r\n<h3>Adding New Resource<\/h3> \r\nLet's assume you want to add a new resource to this template. You have 2 ways to achieve the same:\r\n    <ol>\r\n    <li><b>Method 1<\/b> - Create a new resource by modifying and adding the JSON for the new resource in the template.<\/li>\r\n    <li><b>Method 2<\/b> - Let Visual Studio add the resource for you. Right click anywhere in the resources area of the JSON Outline Panel or the small \"+\" box at the top left of the panel (as shown in the image above) and VS will give you a new popup to add the resource from pre-defined resources as shown below.<\/li>\r\n    <\/ol>\r\n    <img src=\"\/images\/147578170157f6a4457bae0.png\" alt=\"Add Resource\" \/>\r\n<br \/>\r\nOnce you click Add the JSON for resource will be added to the template and the corresponding new element will appear in the JSON Outline Panel.\r\n<br \/>\r\n\r\n<h3>Deleting a Resource<\/h3> <br \/>\r\nIf you need to delete a resource, simply right click on that resource in the JSON outline panel on the left and then select \"Delete Resource\".\r\n<br \/>\r\n\r\n<h3>Using Intellisense<\/h3>     \r\nThe last thing to notice is the use of <b>Intellisense<\/b> in Visual Studio which helps you as you are editing the templates.<br \/><br \/>\r\n    <img src=\"\/images\/147578465457f6afce4debb.png\" alt=\"Intellisense\" \/>\r\n    <br \/>\r\n     When you type quotes the closing quotes are automatically provided. Also, as you can see in the above image the various valid values, that can come there are also shown along with small tooltip about the data type. If the Intellisense doesn't come up automatically, then press Ctrl + Space to get Intellisense.\r\n<\/li>\r\n\r\n<\/ol>\r\n\r\nIn the end, the Visual Studio makes authoring ARM templates much more manageable and easy for you.\r\n\r\nIn the next blog, we will see how to use Visual Studio to Deploy the templates.\r\n",
		"addpost": "addpost",
		"dated": "Sep 17, 2016",
		"slug": "step-by-step-arm-templates-authoring-arm-templates-using-visual-studio",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p><strong>Visual Studio<\/strong> is a very ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Creating Parameters file for an ARM Template",
		"postDate": "14-09-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"JSON",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nYou can pass the input values for the Parameters in your ARM template using an additional JSON file. This additional file is what we will be referring to as **Parameters File**.\r\n\r\nThe only restriction on a parameters file is that the size of the parameter file cannot be more than 64 KB.\r\n\r\nParameters file follows a similar structure to the ARM Template. They are very simple as compared to the ARM template. In all they have 3 sections as explained below:\r\n\r\n 1. **$schema** - Required Object - Location of the JSON schema file that describes the version of the template language.\r\n 2. **contentVersion** - Required Object - Version of the template (such as 1.2.0.20). When deploying resources using the template, this value can be used to make sure that the right template is being used.\r\n 3. **parameters** - Required Object - This is a JSON object which contains various objects as it's members. Each object within the \"parameters\" object represent a value for a parameter corresponding to your ARM template.\r\n\r\nLet's check how the parameters file will look like for the ARM template we have built earlier for deploying Storage Account and a Virtual Network.\r\n\r\n    {\r\n        \"$schema\": \"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentParameters.json#\",\r\n        \"contentVersion\": \"1.0.0.0\",\r\n        \"parameters\": {\r\n            \"vhdStorageName\": {\r\n                \"value\": \"harvestingstorage101\"\r\n            },\r\n            \"virtualNetworkName\": {\r\n                \"value\": \"testvNet101\"\r\n            }\r\n        }\r\n    }\r\n\r\nNote that the only 2 parameter values are provided. These correspond to the parameters in the ARM template. \r\n\r\n**Note:** The parameter names should match to the parameters defined in the ARM template.",
		"addpost": "addpost",
		"dated": "Sep 14, 2016",
		"slug": "step-by-step-arm-templates-creating-parameters-file-for-an-arm-template",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>You can pass the input values for the Par...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Deploying Template Using Azure PowerShell",
		"postDate": "11-09-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"PowerShell",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nIn the previous blog you learned [How to build your first ARM Template](\/post\/step-by-step-arm-templates-building-your-first-arm-template\/) . Now that you have a fully functional ARM template we want to deploy this template to Azure.\r\n\r\nThere are various options to deploy a template to Azure. We already saw in the last blog [How to deploy template using **Azure Portal**](\/post\/step-by-step-arm-templates-deploying-template-using-azure-portal\/). Now we will look at **Azure PowerShell** as more programmatic and automated way to deploy the template.\r\n\r\n## Pre-requisites ##\r\n\r\nThings you should know before deployment\r\n\r\n 1. **Azure PowerShell** - This should be installed on the machine from where the Steps will be followed. If you don't have this then use this link to get it: [Get Azure PowerShell](https:\/\/azure.microsoft.com\/en-us\/documentation\/articles\/powershell-install-configure\/)\r\n 2. **Azure Subscription** - where you want to deploy your template\r\n 3. **Resource Group** - This is the resource group in Azure where you will be deploying your template. You can create a new resource group (for the resources that will be deployed by the template) or use an existing one.\r\n 4. **Parameters** - Value of the input parameters to the template should be known to you for the deployment. Follow all your naming conventions when defining the parameters for deployments of resources in Azure. \r\n 5. **Internet Connectivity** - This should be present on the machine from where the Steps will be followed for connectivity to Azure\r\n\r\n## Steps for Deployment ##\r\n\r\n- First, launch a PowerShell window as an Administrator\r\n- Then, log into the Azure account. \r\n\r\nRun the below cmdlet to log into Azure:\r\n\r\n    Add-AzureRmAccount\r\n\r\n- Select appropriate Azure Subscription\r\n\r\nYou have two choices here. You can either use below cmdlet to use Subscription ID\r\n\r\n    Set-AzureRmContext -SubscriptionID <YourSubscriptionId>\r\n\r\nOr you can use the Subscription name with the below cmdlet:\r\n\r\n    Select-AzureRmSubscription -SubscriptionName \"<Your Subscription Name>\"\r\n\r\n- Next, if you already have a resource group to which you want to deploy the template then skip this step. Else create a new resource group. A resource in Azure ARM architecture can only exist in a resource group. \r\n\r\nUse below cmdlet to create a new Resource Group:\r\n\r\n    New-AzureRmResourceGroup -Name TestResourceGroup01 -Location \"Central US\"\r\n\r\n- Before deploying the Resource Template to Azure, you should Test it. This step is optional but highly recommended.\r\n\r\nUse the below cmdlet to test and validate your template:\r\n\r\n    Test-AzureRmResourceGroupDeployment -ResourceGroupName TestResourceGroup01 -TemplateFile <PathToJsonTemplate>\r\n\r\n- Now comes the last step i.e. to deploy the template. You have two options when deploying the template. You can either deploy a template without any parameters (if none are required) or you need to specify the parameters. Let's check both these options next.\r\n\r\n### Deploying Template which doesn't need Parameters ###\r\n\r\nYou can deploy such template using `New-AzureRmResourceGroupDeployment` cmdlet. \r\nIf the template file is on a local directory then use the below cmdlet:\r\n\r\n    New-AzureRmResourceGroupDeployment -Name ExampleDeployment -ResourceGroupName TestResourceGroup01 -TemplateFile <PathToTemplate>\r\n\r\nIf the template file is uploaded to some hosted location and is accessible via a link, then use the below cmdlet to deploy the template:\r\n\r\n    New-AzureRmResourceGroupDeployment -Name ExampleDeployment -ResourceGroupName TestResourceGroup01 -TemplateUri <LinkToTemplate>\r\n\r\n### Deploying Template with Parameters ###\r\n\r\nDeploying of the template is exactly similar as the previous section. You use the same cmdlet. To specify the parameter, you have 4 options. Use the below cmdlets for the option you want to use.\r\n\r\n**Option 1** - Using Inline Parameter\r\n\r\n    New-AzureRmResourceGroupDeployment -Name ExampleDeployment -ResourceGroupName TestResourceGroup01 -TemplateFile <PathToTemplate> -myParameterName \"parameterValue\" -secondParameterName \"secondParameterValue\"\r\n\r\n**Option 2** - Using Parameter Object\r\n\r\n    $parameters = @{\"<ParameterName>\"=\"<Parameter Value>\"}\r\n    New-AzureRmResourceGroupDeployment -Name ExampleDeployment -ResourceGroupName TestResourceGroup01 -TemplateFile <PathToTemplate> -TemplateParameterObject $parameters\r\n\r\n**Option 3** - Using Parameter file which is in local environment\r\n\r\n    New-AzureRmResourceGroupDeployment -Name ExampleDeployment -ResourceGroupName TestResourceGroup01 -TemplateFile <PathToTemplate> -TemplateParameterFile <PathToParameterFile>\r\n\r\n**Option 4** - Using Parameter file which is located externally and can be referenced via Link\r\n\r\n    New-AzureRmResourceGroupDeployment -Name ExampleDeployment -ResourceGroupName TestResourceGroup01 -TemplateUri <LinkToTemplate> -TemplateParameterUri <LinkToParameterFile>\r\n\r\n### Key Gotchas ###\r\n\r\n 1. If you provide values for a parameter in both the local parameter file and inline, the inline value takes precedence.\r\n 2. You cannot use inline parameters with an external parameter file. All inline parameters are ignored when you specify \"TemplateParameterUri\" parameter.\r\n 3. As a best practice, do not store sensitive infomation in the parameters file e.g. Local admin password. Instead either provide these dynamically using inline parameters. Or store them using the Azure Key vault and then reference the key vault in your parameters file.\r\n\r\nYou can find more details about these cmdlets here: [Deploy resources with Resource Manager templates and Azure PowerShell](https:\/\/azure.microsoft.com\/en-us\/documentation\/articles\/resource-group-template-deploy\/#deploy-with-powershell)\r\n\r\nIn the next blog, we will see how to create a Parameters File for providing parameters dynamically to the template.",
		"addpost": "addpost",
		"dated": "Sep 11, 2016",
		"slug": "step-by-step-arm-templates-deploying-template-using-azure-powershell",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>In the previous blog you learned <a href=\"...\"><\/a><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Deploying Template Using Azure Portal",
		"postDate": "08-09-2016",
		"tags": [
			"ASR",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nIn the last blog you learned [How to build your first ARM Template](\/post\/step-by-step-arm-templates-building-your-first-arm-template\/) . Now that you have a fully functional ARM template we want to deploy this template to Azure.\r\n\r\nThere are various options to deploy a template to Azure. Using Azure portal is by far the easiest and most intuitive option for the deployment. Follow the steps in this blog to deploy your template to Azure.\r\n\r\n## Pre-requisites ##\r\n\r\nThings you should know before deployment\r\n\r\n 1. **Azure Subscription** - where you want to deploy your template\r\n 2. **Resource Group** - This is the resource group in Azure where you will be deploying your template. You can create a new resource group (for the resources that will be deployed by the template) or use an existing one.\r\n 3. **Parameters** - Value of the input parameters to the template should be known to you for the deployment. Follow all your naming conventions when defining the parameters for deployments of resources in Azure.\r\n\r\n## Steps for Deployment ##\r\n\r\n 1. First, log into the Azure Portal.\r\n 2. Next, go to \"New\" and type \"Template deployment\" in the search box and hit enter.\r\n\r\n    ![New Deployment](\/images\/147559616157f3cf81381da.png)\r\n\r\n 3. Next, click on the **Template Deployment** and then click on \"Create\"\r\n\r\n    ![Create Deployment](\/images\/147559654057f3d0fc1bf5c.png)\r\n\r\n 4. Now click on the \"**Template (Edit Template)**\". It will open a panel to paste your template. Delete whatever is auto populated in the template area. Copy your whole json template and paste it here. Note that the left section in the new panel will update to show you what parameters, variables, and resources you have in the template. Click on \"Save\" once done.\r\n\r\n    ![Editing Template](\/images\/147559697957f3d2b32ff67.png)\r\n\r\n 5. Next, click on the \"**Parameters (Edit Parameters)**\" on the left side. The parameters will be automatically picked from the template. The parameters for which the default value is provided will be automatically populated. Rest you will have to provide the inputs. Click Ok once done.\r\n\r\n    ![Providing Parameters](\/images\/147559719657f3d38c652e3.png)\r\n\r\n 6. Next, you have the option to select the **Resource Group**. You can either create a new resource group (for all the resources that will be deployed via the template) or you can use and existing resource group.\r\n\r\n    ![Resource Group Selection](\/images\/147559727457f3d3da45879.png)\r\n\r\n 7. The last option is to click on the \"**Legal Terms**\" and read through the terms. If you agree then click on the \"Purchase\" button. \r\n\r\n   ![Legal Terms](\/images\/147559762057f3d534eae90.png)\r\n\r\n 8. Finally, click on the **Create** to submit the deployment. \r\n\r\nYou can monitor the job performing the deployments and progress of the same. After some time the deployment will finish successfully and you can view the resources in the resource group you selected.",
		"addpost": "addpost",
		"dated": "Sep 08, 2016",
		"slug": "step-by-step-arm-templates-deploying-template-using-azure-portal",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>In the last blog you learned <a href=\"\/po...\"><\/a><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Building your first ARM Template",
		"postDate": "04-09-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nIn this blog post, we will use the knowledge learned in previous blogs and will build a basic ARM template. \r\nIf you haven't checked previous blog posts then have a quick read of your preferred topics here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nTo follow this blog, you can use any text editor which can provide JSON syntax highlighting. We will be looking at using Visual Studio to author ARM templates in a future blog post. Visual Studio can provide JSON outlining and is a very powerful tool for authoring ARM templates.\r\n\r\nLet us assume that you want to deploy a storage account and build a virtual network in Azure. You want to automate the process and need to repeat the process in various environments. ARM templates fit the bill for the solution of this problem.\r\n\r\nIn the next few sections, we will build each section of the template and then at the end will check the complete template.\r\n\r\n### 1. Template Header ###\r\n\r\nThis section is very basic and contains just the schema and the content version. You can use the content version to manage the development versions of the template as you make changes to your templates in the future.\r\n\r\n    \"$schema\": \"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\",\r\n    \"contentVersion\": \"1.0.0.0\",\r\n\r\n### 2. Parameters ###\r\n\r\nHere we define all the inputs we need from the end users. We provide default values for those parameters for which we know what the most common values will be based on our environment. For the current template we define two parameters:\r\n\r\n - **vhdStorageName** - This is the name of the storage account in Azure which will be created by the deployment of this template.\r\n - **virtualNetworkName** - This is the name of the Virtual Network which will be created by the deployment of this template.\r\n\r\nAs a best practice, provide the metadata, describing what each parameter is for. Also, note that we have used pascal casing to name the parameters with very descriptive names.\r\n\r\n    \"parameters\": {\r\n        \"vhdStorageName\": {\r\n            \"type\": \"string\",\r\n            \"minLength\": 1,\r\n            \"defaultValue\": \"mystorage101\",\r\n            \"metadata\": {\r\n                \"description\": \"Name of the Storage Account.\"\r\n            }\r\n        },\r\n        \"virtualNetworkName\": {\r\n            \"type\": \"string\",\r\n            \"metadata\": {\r\n                \"description\": \"Name of the virtual network.\"\r\n            }\r\n        }\r\n    },\r\n\r\n### 3. Variables ###\r\n\r\nNext, we add some variables for the values which will be reused later in the template in the resources section. We create variables for all those reusable values for which we know what their value at deployment will be. We define 4 variables in this template:\r\n\r\n - **addressPrefix** - Address prefix for the Virtual Network \r\n - **subnetName** - Subnet name which will be created under the virtual network\r\n - **subnetPrefix** - Subnet prefix for the subnet, which will be created under the virtual network\r\n - **vhdStorageType** - Type of the storage account. Here we used Standard locally redundant storage (LRS)\r\n\r\nVariables section look as below:\r\n\r\n    \"variables\": {\r\n        \"addressPrefix\": \"10.0.0.0\/16\",\r\n        \"subnetName\": \"Subnet\",\r\n        \"subnetPrefix\": \"10.0.0.0\/24\",\r\n        \"vhdStorageType\": \"Standard_LRS\"\r\n    },\r\n\r\n### 4. Resources ###\r\n\r\nNow comes the last and main section i.e. Resources. Here we define both the resources for our template:\r\n\r\n - Storage Account\r\n - Virtual Network\r\n\r\nLet us look at each of these resources one by one.\r\n\r\n**A. Storage Account Resource**\r\n\r\nThis resource has below properties (or key-value pairs):\r\n\r\n 1. **Type** - Type of the resource is set to Microsoft.Storage\/storageAccounts. This is what tells the Azure that the current resource is a Storage Account\r\n 2. **Name** - This defines the name of the storage account to be deployed based on the parameter to the template\r\n 3. **API Version** - this is the standard version for the REST API in Azure\r\n 4. **Location** - This is the Azure location. The location is found dynamically based on the location of the resource group to which this template will be deployed.\r\n 5. **tags** - only one tag is defined for the display name. You should have more tags in case of a production ready template\r\n 6. **properties** - This is where you tell Azure what kind of storage account you need. Here the account type is set using the value of the variable vhdStorageType.\r\n\r\n**B. Virtual Network Resource**\r\n\r\nThis resource has below properties (or key-value pairs):\r\n\r\n 1. **Type** - Type of the resource is set to Microsoft.Network\/virtualNetworks. This is what tells the Azure that the current resource is a Virtual Network\r\n 2. **Name** - This defines the name of the virtual network to be deployed based on the parameter to the template\r\n 3. **API Version** - this is the standard version for the REST API in Azure\r\n 4. **Location** - This is the Azure location. The location is found dynamically based on the location of the resource group to which this template will be deployed.\r\n 5. **tags** - only one tag is defined for the display name. You should have more tags in case of a production ready template\r\n 6. **properties** - This is where you define the address space for the virtual network. You also define the subnet under the virtual network here.\r\n\r\n\r\nThe resources section look like below:\r\n\r\n    \"resources\": [\r\n        {\r\n            \"type\": \"Microsoft.Storage\/storageAccounts\",\r\n            \"name\": \"[parameters('vhdStorageName')]\",\r\n            \"apiVersion\": \"2015-06-15\",\r\n            \"location\": \"[resourceGroup().location]\",\r\n            \"tags\": {\r\n                \"displayName\": \"StorageAccount\"\r\n            },\r\n            \"properties\": {\r\n                \"accountType\": \"[variables('vhdStorageType')]\"\r\n            }\r\n        },\r\n        {\r\n            \"apiVersion\": \"2015-06-15\",\r\n            \"type\": \"Microsoft.Network\/virtualNetworks\",\r\n            \"name\": \"[parameters('virtualNetworkName')]\",\r\n            \"location\": \"[resourceGroup().location]\",\r\n            \"tags\": {\r\n                \"displayName\": \"VirtualNetwork\"\r\n            },\r\n            \"properties\": {\r\n                \"addressSpace\": {\r\n                    \"addressPrefixes\": [\r\n                        \"[variables('addressPrefix')]\"\r\n                    ]\r\n                },\r\n                \"subnets\": [\r\n                    {\r\n                        \"name\": \"[variables('subnetName')]\",\r\n                        \"properties\": {\r\n                            \"addressPrefix\": \"[variables('subnetPrefix')]\"\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    ]\r\n\r\n### Complete Template ###\r\n\r\nHere is the complete template build from all the sections discussed above. You can copy and use this template for testing and working along with next deployment posts.\r\n\r\n    {\r\n        \"$schema\": \"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\",\r\n        \"contentVersion\": \"1.0.0.0\",\r\n        \"parameters\": {\r\n            \"vhdStorageName\": {\r\n                \"type\": \"string\",\r\n                \"minLength\": 1,\r\n                \"defaultValue\": \"mystorage101\",\r\n                \"metadata\": {\r\n                    \"description\": \"Name of the Storage Account.\"\r\n                }\r\n            },\r\n            \"virtualNetworkName\": {\r\n                \"type\": \"string\",\r\n                \"metadata\": {\r\n                    \"description\": \"Name of the virtual network.\"\r\n                }\r\n            }\r\n        },\r\n        \"variables\": {\r\n            \"addressPrefix\": \"10.0.0.0\/16\",\r\n            \"subnetName\": \"Subnet\",\r\n            \"subnetPrefix\": \"10.0.0.0\/24\",\r\n            \"vhdStorageType\": \"Standard_LRS\"\r\n        },\r\n        \"resources\": [\r\n            {\r\n                \"type\": \"Microsoft.Storage\/storageAccounts\",\r\n                \"name\": \"[parameters('vhdStorageName')]\",\r\n                \"apiVersion\": \"2015-06-15\",\r\n                \"location\": \"[resourceGroup().location]\",\r\n                \"tags\": {\r\n                    \"displayName\": \"StorageAccount\"\r\n                },\r\n                \"properties\": {\r\n                    \"accountType\": \"[variables('vhdStorageType')]\"\r\n                }\r\n            },\r\n            {\r\n                \"apiVersion\": \"2015-06-15\",\r\n                \"type\": \"Microsoft.Network\/virtualNetworks\",\r\n                \"name\": \"[parameters('virtualNetworkName')]\",\r\n                \"location\": \"[resourceGroup().location]\",\r\n                \"tags\": {\r\n                    \"displayName\": \"VirtualNetwork\"\r\n                },\r\n                \"properties\": {\r\n                    \"addressSpace\": {\r\n                        \"addressPrefixes\": [\r\n                            \"[variables('addressPrefix')]\"\r\n                        ]\r\n                    },\r\n                    \"subnets\": [\r\n                        {\r\n                            \"name\": \"[variables('subnetName')]\",\r\n                            \"properties\": {\r\n                                \"addressPrefix\": \"[variables('subnetPrefix')]\"\r\n                            }\r\n                        }\r\n                    ]\r\n                }\r\n            }\r\n        ]\r\n    }\r\n\r\nIn the next blog, we will learn how to deploy this template.\r\n",
		"addpost": "addpost",
		"dated": "Sep 04, 2016",
		"slug": "step-by-step-arm-templates-building-your-first-arm-template",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>In this blog post, we will use the knowle...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - Helper Functions",
		"postDate": "31-08-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nARM Templates has various dynamic constructs called **Helper Functions** which can make your template more generic. These constructs reduce the hard coded values in your templates. You can use the information from this blog to make your existing templates more dynamic and start writing new templates with a much generic approach.\r\n\r\nLet's look at the most important helper functions and their practical usage one by one. \r\n\r\n### 1. Resource Id - Resource Function ###\r\n\r\nYou use this function to determine the ID of a resource. This is only used when the resource (whose ID is needed) is not being deployed in the current template and it already exists in Azure.\r\n\r\nThe generic syntax to use this is:\r\n\r\n    resourceId ([subscriptionId], [resourceGroupName], resourceType, resourceName1, [resourceName2]...)\r\n\r\nOnly required parameters of this helper function are resourceType and resourceName1.\r\n\r\nThese parameters are as follows:\r\n\r\n - subscription ID - This is only needed if you want to refer a different subscription. Default value is the current subscription\r\n - resource Group Name - Name of the resource group where the resource exists. Default is the current resource group, in which you are deploying the template\r\n - resource Type - Type of resource including resource provider namespace\r\n - resource Name 1  - Name of the resource\r\n - resource Name 2  - Next resource name segment if resource is nested. E.g. a VM Extension\r\n\r\n \r\n**Example**\r\n\r\n    \"vnetId1\": \"[resourceId('AE06-Mgmt-RG','Microsoft.Network\/virtualNetworks', parameters('virtualNetworkName'))]\",\r\n    \"vnetId2\": \"[resourceId('Microsoft.Network\/virtualNetworks', variables('virtualNetworkName'))]\"\r\n\r\nThe above example shows two ways of using the resource ID helper function to determine the Id of a virtual network. First one uses the resource group, resource type and resource name. Second example uses only the resource Type and resource name. Second example assumes the resource group to be same as the template being deployed to.\r\n\r\n### 2. Resource Group - Resource Function ###\r\n\r\nThis helper function returns an object that represents the current resource group to which the template is being deployed.\r\n\r\nThe generic syntax to use this is:\r\n\r\n    resourceGroup()\r\n\r\nNo parameters are needed in this helper function.\r\n\r\n**Example**\r\n\r\n    \"vhdStorageName\": \"[concat('vhdstorage', uniqueString(resourceGroup().id))]\",\r\n     \"storageAccountResourceGroup\": \"[resourcegroup().name]\",\r\n     \"location\": \"[resourceGroup().location]\"\r\n\r\nThe above example shows 3 uses of the resource group helper functions. First one uses the ID of the resource group, second uses the name property and third uses the location for the current resource group.\r\n\r\n### 3. Subscription - Resource Function ###\r\n\r\nThe generic syntax to use this is:\r\n\r\n    subscription()\r\n\r\nNo parameters are needed in this helper function.\r\n \r\n**Example**\r\n\r\n    \"subscriptionId\": \"[subscription().subscriptionId]\"\r\n\r\nThe above example is straightforward. It fetches the subscription Id of the current subscription.\r\n\r\n### 4. Concat - String Function ###\r\n\r\nThis function is used to concatinate (i.e. combine) two or more values.\r\n\r\nThe generic syntax to use this is:\r\n\r\n    concat (array1, array2, array3, ...)\r\n\r\nAt least 1 array is needed for concat to work. \r\n \r\n**Example**\r\n\r\n    \"subnetRef\": \"[concat(variables('vNetId'), '\/subnets\/', variables('subnetName'))]\"\r\n\r\nThe above example combines (or concatinates) 3 text values. First value is the value of variable vNetId. Second value is a string \"\/subnets\/\". Third value is the value of the variable subnet Name.\r\n\r\nThese are the most common Helper functions that you will use in 80%-90% of the templates. \r\n\r\nTo check the complete list of Helper Functions, check this official link: [Azure Resource Manager template functions](https:\/\/azure.microsoft.com\/en-us\/documentation\/articles\/resource-group-template-functions\/#resource-functions)\r\n",
		"addpost": "addpost",
		"dated": "Aug 31, 2016",
		"slug": "step-by-step-arm-templates-helper-functions",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>ARM Templates has various dynamic constru...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - What is in an ARM Template - Understanding Components 5 - Outputs",
		"postDate": "30-08-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nIf you haven't checked the previous blog on the overall structure of the ARM template, I suggest you give it a quick read before checking the component described in this post in detail.\r\n\r\n 1. [Understanding all components](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-all-components\/)\r\n 2. [Parameters](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-2-parameters\/)\r\n 3. [Variables](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-3-variables\/)\r\n 4. [Resources](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-4-resources\/)\r\n 5. [Outputs - This blog post](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-5-outputs\/)\r\n\r\n## Outputs ##\r\n\r\nThis section is used to output any values after the deployment of the ARM Template. This can output any Ids or connection strings based on the deployed resources. \r\n\r\nThis is a single JSON object with various output objects (just like Parameters. The overall JSON structure looks like below:\r\n\r\n    \"outputs\": { \r\n        \"output1\" : {\r\n                         \"type\":\"string\",\r\n                         \"value\": \"value1\"\r\n          },\r\n        \"output2\" : {\r\n                         \"type\":\"string\",\r\n                         \"value\": \"value2\"\r\n          },\r\n    }\r\n\r\nEach output object has 2 properties:\r\n\r\n 1. Type - Data type of the output\r\n 2. Value - value of the output\r\n\r\nA real life example with look like below:\r\n\r\n    \"outputs\": {\r\n        \"adminUsername\": {\r\n            \"type\": \"string\",\r\n            \"value\": \"[parameters('adminUsername')]\"\r\n        }\r\n    }\r\n\r\nThe above example will output the administrator Username using the parameter from the template.\r\n\r\nThat's all there is to Outputs in ARM Templates. If you have any doubts, please comment in the below section. Use the links at the Top to know all about other components in an ARM Template.",
		"addpost": "addpost",
		"dated": "Aug 30, 2016",
		"slug": "step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-5-outputs",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>If you haven't checked the previous blog ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - What is in an ARM Template - Understanding Components 4 - Resources",
		"postDate": "29-08-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nIf you haven't checked the previous blog on the overall structure of the ARM template, I suggest you give it a quick read before checking the component described in this post in detail.\r\n\r\n 1. [Understanding all components](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-all-components\/)\r\n 2. [Parameters](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-2-parameters\/)\r\n 3. [Variables](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-3-variables\/)\r\n 4. [Resources  - This blog post](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-4-resources\/)\r\n 5. [Outputs](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-5-outputs\/)\r\n\r\n## Resources ##\r\n\r\nThis is the major section of the whole ARM template. This is where you define what resources should be deployed in Azure. You also define dependencies between resources in this section. \r\n\r\nThe resources section consist of an array of JSON Objects as shown below:\r\n\r\n    \"resources\": [\r\n            { },\r\n            { },\r\n    ]\r\n\r\nEach object in the array (represented via curly braces) is an Azure resource. You can deploy multiple resources in a single ARM template. E.g. You can deploy a new Storage Account, new Virtual Network and three Virtual Machines in that virtual network within a single template.\r\nWithin the object, various properties (and nested properties) are used to provide the configurations of each resource. \r\n\r\n### Elements ###\r\n\r\nDifferent elements in a single resource object can be one of the following:\r\n\r\n 1. **apiVersion** - ***Required*** - Version of the API. e.g. \"2015-06-15\"\r\n 2. **type** - ***Required*** - Type of the resource. This value is a combination of the namespace of the resource provider and the resource type that the resource provider supports. e.g. Azure Storage Account will have type as \"Microsoft.Storage\/storageAccounts\".\r\n 3. **name** - ***Required*** - Name of the resource. The name must follow URI component restrictions and also the Azure naming restrictions if any. E.g. Storage account name can only be in small letters and has to be unique.\r\n 4. **location** - Optional - Use supported geo-locations of the provided resource without any spaces. Or use the resource group's location dynamically.\r\n 5. **tags** - Optional - Tags that are associated with the resource.\r\n 6. **dependsOn** - Optional - Other resources in the same template, that the current resource being defined depends on. The dependencies between resources are evaluated and resources are deployed in their dependent order. When resources are not dependent on each other, they are attempted to be deployed in parallel. The value can be a comma-separated list of resource names or resource unique identifiers.\r\n 7. **properties** - Optional - Resource specific configuration settings. E.g. Account type property for a storage account name.\r\n 8. **resources** - Optional - Child resources that depend on the resource being defined. E.g. Extension resources for a Virtual Machine resource.\r\n\r\n### Examples ###\r\n\r\nLet's look at two examples. First, we will take a simple resource example to deploy a storage account in Azure:\r\n\r\n    {\r\n                \"type\": \"Microsoft.Storage\/storageAccounts\",\r\n                \"name\": \"[variables('vhdStorageName')]\",\r\n                \"apiVersion\": \"2015-06-15\",\r\n                \"location\": \"[resourceGroup().location]\",\r\n                \"tags\": {\r\n                    \"displayName\": \"StorageAccount\",\r\n                    \"department\" : \"Finance\",\r\n                    \"application\" : \"database\"\r\n                },\r\n                \"properties\": {\r\n                    \"accountType\": \"[variables('vhdStorageType')]\"\r\n                }\r\n            }\r\n\r\nAbove example will deploy a storage account with the name from \"vhdStorageName\" variable. It will apply 3 tags to the resource after deployment. It will use the account type (i.e. standard or premium) based on the value of the \"vhdStorageType\" variable. If you want to deploy 2 or more similar storage accounts, then just copy and paste the json for the resource, separated by comma. It will become another object in the Resources array.\r\n\r\nNow let's look at a complex and larger example of deploying a single virtual machine with one extension for Diagnostics.\r\n\r\n        {\r\n            \"apiVersion\": \"2015-06-15\",\r\n            \"type\": \"Microsoft.Compute\/virtualMachines\",\r\n            \"name\": \"[variables('vmName')]\",\r\n            \"location\": \"[resourceGroup().location]\",\r\n            \"tags\": {\r\n                \"displayName\": \"VirtualMachine\"\r\n            },\r\n            \"dependsOn\": [\r\n                \"[concat('Microsoft.Storage\/storageAccounts\/', variables('vhdStorageName'))]\",\r\n                \"[concat('Microsoft.Network\/networkInterfaces\/', variables('nicName'))]\"\r\n            ],\r\n            \"properties\": {\r\n                \"hardwareProfile\": {\r\n                    \"vmSize\": \"[variables('vmSize')]\"\r\n                },\r\n                \"osProfile\": {\r\n                    \"computerName\": \"[variables('vmName')]\",\r\n                    \"adminUsername\": \"[parameters('adminUsername')]\",\r\n                    \"adminPassword\": \"[parameters('adminPassword')]\"\r\n                },\r\n                \"storageProfile\": {\r\n                    \"imageReference\": {\r\n                        \"publisher\": \"[variables('imagePublisher')]\",\r\n                        \"offer\": \"[variables('imageOffer')]\",\r\n                        \"sku\": \"[parameters('windowsOSVersion')]\",\r\n                        \"version\": \"latest\"\r\n                    },\r\n                    \"osDisk\": {\r\n                        \"name\": \"osdisk\",\r\n                        \"vhd\": {\r\n                            \"uri\": \"[concat('http:\/\/', variables('vhdStorageName'), '.blob.core.windows.net\/', variables('vhdStorageContainerName'), '\/', variables('OSDiskName'), '.vhd')]\"\r\n                        },\r\n                        \"caching\": \"ReadWrite\",\r\n                        \"createOption\": \"FromImage\"\r\n                    }\r\n                },\r\n                \"networkProfile\": {\r\n                    \"networkInterfaces\": [\r\n                        {\r\n                            \"id\": \"[resourceId('Microsoft.Network\/networkInterfaces', variables('nicName'))]\"\r\n                        }\r\n                    ]\r\n                },\r\n                \"diagnosticsProfile\": {\r\n                    \"bootDiagnostics\": {\r\n                        \"enabled\": true,\r\n                        \"storageUri\": \"[concat('http:\/\/', variables('diagnosticsStorageAccountName'), '.blob.core.windows.net')]\"\r\n                    }\r\n                }\r\n            },\r\n            \"resources\": [\r\n                {\r\n                    \"type\": \"extensions\",\r\n                    \"name\": \"Microsoft.Insights.VMDiagnosticsSettings\",\r\n                    \"apiVersion\": \"2015-06-15\",\r\n                    \"location\": \"[resourceGroup().location]\",\r\n                    \"tags\": {\r\n                        \"displayName\": \"AzureDiagnostics\"\r\n                    },\r\n                    \"dependsOn\": [\r\n                        \"[concat('Microsoft.Compute\/virtualMachines\/', variables('vmName'))]\"\r\n                    ],\r\n                    \"properties\": {\r\n                        \"publisher\": \"Microsoft.Azure.Diagnostics\",\r\n                        \"type\": \"IaaSDiagnostics\",\r\n                        \"typeHandlerVersion\": \"1.5\",\r\n                        \"autoUpgradeMinorVersion\": true,\r\n                        \"settings\": {\r\n                            \"xmlCfg\": \"[base64(concat(variables('wadcfgxstart'), variables('wadmetricsresourceid'), variables('wadcfgxend')))]\",\r\n                            \"storageAccount\": \"[variables('diagnosticsStorageAccountName')]\"\r\n                        },\r\n                        \"protectedSettings\": {\r\n                            \"storageAccountName\": \"[variables('diagnosticsStorageAccountName')]\",\r\n                            \"storageAccountKey\": \"[listkeys(variables('accountid'), '2015-06-15').key1]\",\r\n                            \"storageAccountEndPoint\": \"https:\/\/core.windows.net\"\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n\r\nNote that the above code snippet defines a single virtual machine. Let us decode various sections of this complex resource:\r\n\r\n - It begins with simple properties like apiVersion, type, name, location and tags as discussed in the previous example. These are straightforward and thus values are provided to these attributes.\r\n - Next is the **dependsOn** section. This defines the dependency between resources. In the above example, the virtual machine resource is dependent on the storage account and a network interface, which are also defined in the template. These 2 resources will be created before the virtual machine creation\/deployment. If these resources are not created in the template then it will check for the presence of these resources in the current subscription. If they are not present the template will not get deployed and will error out.\r\n - Next are various **properties** to configure the Virtual machine, like hardware profile, os profile, storage profile, os disk, network profile, diagnostics profile etc.\r\n - Next, we have additional **sub-resources**. These are Azure resources which will be created and linked to the current resource. Only one sub-resource is created in the above example which is an extension for VM diagnostics settings.\r\n\r\nThat's all there is to Resources in ARM Templates. If you have any doubts, please comment in the below section. Use the links at the Top to know all about other components in an ARM Template.",
		"addpost": "addpost",
		"dated": "Aug 29, 2016",
		"slug": "step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-4-resources",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>If you haven't checked the previous blog ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - What is in an ARM Template - Understanding Components 3 - Variables",
		"postDate": "28-08-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nIf you haven't checked the previous blog on the overall structure of the ARM template, I suggest you give it a quick read before checking the component described in this post in detail.\r\n\r\n 1. [Understanding all components](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-all-components\/)\r\n 2. [Parameters](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-2-parameters\/)\r\n 3. [Variables - This blog post](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-3-variables\/)\r\n 4. [Resources](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-4-resources\/)\r\n 5. [Outputs](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-5-outputs\/)\r\n\r\n## Variables ##\r\n\r\nVariables are values that you either know beforehand or you can construct from the input parameters. These variables can then be reused at multiple locations in the resources section. If you later want to change the value of a variable then it automatically gets updated at all other locations. They can be used to define a resource property.\r\n\r\n### Defining Variables ###\r\n\r\nVariable is a one huge JSON object. Each property can be one of the simple data type (like integer, bool, string etc.) or can be another complex JSON object. The general structure is as shown below:\r\n\r\n    \"variables\": {\r\n          \"variable 1\" : \"value 1\",\r\n          \"variable 2\" : \"value 2\",\r\n          \"variable 3\" : 1024,\r\n          \"variable 4\" : {}\r\n    }\r\n\r\nNote that in the above example, the first 3 variables are of simple value type. The 4rth variable is however of a complex JSON object type.\r\n\r\nLet's now check a real variables section from an actual ARM template:\r\n\r\n    \"variables\": {\r\n            \"vmSize\": \"Standard_A2\",\r\n            \"virtualNetworkName\": \"MyVNETName\",\r\n            \"vnetId1\": \"[resourceId('Microsoft.Network\/virtualNetworks', variables('virtualNetworkName'))]\",\r\n            \"vnetId2\": \"[resourceId(parameters('vNetRG'),'Microsoft.Network\/virtualNetworks',parameters('virtualNetworkName'))]\",\r\n            \"subnetRef\": \"[concat(variables('vnetId'), '\/subnets\/', variables('subnetName'))]\",\r\n            \"vhdStorageName\": \"[concat('vhdstorage', uniqueString(resourceGroup().id))]\",\r\n            \"storageAccountResourceGroup\": \"[resourcegroup().name]\",\r\n            \"location\": \"[resourceGroup().location]\",\r\n            \"subscriptionId\": \"[subscription().subscriptionId]\"\r\n        }\r\n\r\nThere are lots of key constructs in the above code snippet. I have tried to capture as many different constructs in this snippets as I could. Let us decode each variable one by one.\r\n\r\n 1. vmSize - Simple String\r\n 2. virtualNetworkName - Simple string name\r\n 3. vnetId1 - This uses a special function named \"**resourceId**\" to find out the resource ID of the virtual network. This function is invoked by using the syntax `\"[resourceId(Input)]\"` .  This gets the resource ID of a resource which is defined by the Input to this. Also, note the use of another variable as an input to this.\r\n 4. vnetId2 - This also fetches the resource Id of a virtual network using \"resourceId\" method. Note the use of the value of a parameter in this to find out Resource Group of the existing Virtual network (parameter \"vNetRG\").\r\n 5. subnetRef - This variable uses another function \"**concat**\" in ARM template i.e. `\"[concat(input1,input2,...)]\"`. This function can take many inputs and will concatinate (i.e. club together) the value of all the inputs provided. You can use parameters or another variable.\r\n 6. vhdStorageName - This also uses concat function to dynamically generate a storage name. However it uses \"**resourcegroup**\" function as `\"[resourcegroup()]\"`. This function always returns the resource group to which you are deploying the current ARM template. Then the variable uses the id property of the resource group returned.\r\n 7. storageAccountResourceGroup - This uses the \"name\" property of the current resource group\r\n 8. location - This uses the \"location\" property of the current resource group.\r\n 9. subscriptionId - This uses the \"**subscription**\" function as `\"[subscription()]\"` to find out the current subscription to which the current ARM template is being deployed.  Then it uses the subscription Id property of the subscription to get the required Id.\r\n\r\nNote that these constructs are very powerfull and can be used to dynamically construct your ARM template. These constructs are also known as Helper Functions and are explained in detail here: [Step by Step ARM Templates - Helper Functions](..\/step-by-step-arm-templates-helper-functions\/)\r\n\r\n### Using Variables ###\r\n\r\nUsing variables is very easy and is similar to using parameters. In fact, you already saw the usage of variables above, while defining other variables.\r\n\r\nYou use the square parenthesis to indicate to the ARM engine to evaluate whatever is inside the parenthesis. You use the \"variable\" keyword and then you pass the name of the variable as input. Check the example below.\r\n\r\n    \"storageAccountName\": \"[variables('storageAccountName')]\"\r\n\r\n### Best Practices ###\r\n\r\nBest practices are similar to the Parameters.\r\n\r\n - Provide complete descriptive names, no matter how long.\r\n - Use **Pascal Casing** to name your parameters. i.e. First letter should be a small letter. Then every new word will have the first letter as a capital. No space between words. E.g. storageAccountName\r\n - Use the constructs explained in the previous section to dynamically generate variables. This reduces any human errors.\r\n - Anything that is used more than once and is not required to be entered by an end user, should be created as a variable. Later on, this helps by minimizing the number of places you need to change the value.\r\n\r\nThat's all there is to Variables in ARM Templates. If you have any doubts, please comment in the below section. Use the links at the Top to know all about other components in an ARM Template.",
		"addpost": "addpost",
		"dated": "Aug 26, 2016",
		"slug": "step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-3-variables",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>If you haven't checked the previous blog ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - What is in an ARM Template - Understanding Components 2 - Parameters",
		"postDate": "22-08-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nIf you haven't checked the previous blog on the overall structure of the ARM template, I suggest you give it a quick read before checking the component described in this post in detail.\r\n\r\n 1. [Understanding all components](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-all-components\/)\r\n 2. [Parameters - This blog post](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-2-parameters\/)\r\n 3. [Variables](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-3-variables\/)\r\n 4. [Resources](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-4-resources\/)\r\n 5. [Outputs](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-5-outputs\/)\r\n\r\n## Parameters ##\r\nAs mentioned earlier, parameters are the way to customize the templates, each time you deploy it to create resources in Azure. These parameters are the end-user inputs for various aspects of the template. E.g. If you are deploying an Azure Virtual Machine via an ARM Template then the name of the VM can be an input parameter. Operating System type can be another parameter.\r\n\r\nThe parameters can be referred and used in other parts of the ARM Template.\r\n\r\n### 1. Defining Parameters ###\r\nParameters is a one huge JSON object with multiple JSON properties. Each property is one parameter which is represented as another JSON object. Let us look at its structure at a high level.\r\n\r\n    \"parameters\": {\r\n                   \"parameter 1\" : {},\r\n                   \"parameter 2\" : {},\r\n                   \"parameter 3\" : {}\r\n    }\r\n\r\nE.g. If you are creating a template to deploy a Windows Virtual Machine then the parameters will look something like below:\r\n\r\n    \"parameters\": {\r\n                   \"VMName\" : {},\r\n                   \"AdminUserName\" : {},\r\n                   \"AdminPassword\" : {},\r\n                   \"WindowsOSVersion\" : {}\r\n    }\r\n\r\nNow let us look at one of the parameters. E.g. The AdminUserName parameter will look like:\r\n\r\n    \"adminUsername\": {\r\n                \"type\": \"string\",\r\n                \"minLength\": 1,\r\n                \"metadata\": {\r\n                    \"description\": \"Username for the Virtual Machine.\"\r\n                }\r\n            }\r\n\r\nThe parameter object, as shown above, has following parts:\r\n 1. **Type** - This is the data Type of the parameter.\r\n 2. **minLength** - This is the minimum length the parameter must have\r\n 3. **Metadata** - This is just to provide a description as to what the parameter means.\r\n\r\nThe **Data Type** allowed for the parameter are:\r\n\r\n - string or secureString \u2013 any valid JSON string\r\n - int \u2013 any valid JSON integer\r\n - bool \u2013 any valid JSON boolean \r\n - object \u2013 any valid JSON object \r\n - array \u2013 any valid JSON array\r\n\r\nA more complex parameter e.g. Windows OS Version, with few more properties, is shown below:\r\n\r\n    \"windowsOSVersion\": {\r\n                \"type\": \"string\",\r\n                \"defaultValue\": \"2012-R2-Datacenter\",\r\n                \"allowedValues\": [\r\n                    \"2008-R2-SP1\",\r\n                    \"2012-Datacenter\",\r\n                    \"2012-R2-Datacenter\"\r\n                ],\r\n                \"metadata\": {\r\n                    \"description\": \"The Windows version for the VM. This will pick a fully patched image of this given Windows version. Allowed values: 2008-R2-SP1, 2012-Datacenter, 2012-R2-Datacenter.\"\r\n                }\r\n            }\r\n\r\nIt has additional below properties:\r\n\r\n 1. **Default Value** - This is the default value. End User will be able to change this value when deploying the template. If no value is provided then this value is picked.\r\n 2. **Allowed Values** - This is an Array of values which are allowed for the parameter. Only value from this set is allowed as an input.\r\n\r\n### 2. Using Parameters ###\r\n\r\nUsing parameters is easy. Wherever in your template (in variables or resources section) you want to use the value of a parameter, just use the parameter function as shown below with the name of the parameter as input, enclosed in square brackets. \r\n\r\n    [parameters('windowsOSVersion')]\r\n\r\nIf the parameter value is assigned to a property, enclosing it in double quotes, as shown below:\r\n\r\n    \"sku\": \"[parameters('windowsOSVersion')]\"\r\n\r\n### 3. Best Practices ###\r\n\r\n - Try to always provide Default Values\r\n - Provide metadata so that you can provide insight as to what the parameter is meant for\r\n - Provide complete descriptive names, no matter how long.\r\n - Use **Pascal Casing** to name your parameters. i.e. First letter should be a small letter. Then every new word will have the first letter as a capital. No space between words. E.g. windowsOSVersion\r\n - Use properties like minLength and Allowed values to impose restrictions. This reduces any human errors.\r\n\r\nThat's all there is to Parameters in ARM Templates. If you have any doubts, please comment in the below section. Use the links at the Top to know all about other components in an ARM Template.",
		"addpost": "addpost",
		"dated": "Aug 24, 2016",
		"slug": "step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-2-parameters",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>If you haven't checked the previous blog ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - What is in an ARM Template - Understanding All Components",
		"postDate": "23-08-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nAs we discussed [earlier in the introduction](..\/step-by-step-azure-resource-manager-arm-templates-index\/) **Azure Resource Manager (ARM) Template** is a JavaScript Object Notation (JSON) file that defines one or more resources to deploy to a resource group. It also defines the dependencies between the deployed resources.\r\n\r\nIn this post, we will deconstruct any basic ARM template and will understand it's various components.\r\n\r\nAny ARM Template will look like below:\r\n\r\n    {\r\n        \"$schema\": \"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\",\r\n        \"contentVersion\": \"1.0.0.0\",\r\n        \"parameters\": {},\r\n        \"variables\": {},\r\n        \"resources\": [ {}, {} ]\r\n    }\r\n\r\nSnapshot of the Template at root level, as generated via Visual Studio:\r\n\r\n![ARM Template Components][1]\r\n\r\n\r\n\r\nAs you can see the components (or properties) of any ARM template includes:\r\n\r\n 1. Schema\r\n 2. Content Version\r\n 3. Parameters\r\n 4. Variables\r\n 5. Resources\r\n\r\nLet's look at these in more detail.\r\n\r\n <table border=\"1\" cellpadding=\"4\" cellspacing=\"4\">\r\n        <colgroup>\r\n            <col>\r\n            <col>\r\n            <col>\r\n            <col>\r\n        <\/colgroup>\r\n        <tbody valign=\"top\">\r\n            <tr>\r\n                <th>Element name<\/th>\r\n                <th>Required<\/th>\r\n                <th>JSON Type<\/th>\r\n                <th>Description<\/th>\r\n            <\/tr>\r\n            <tr>\r\n                <td>$schema<\/td>\r\n                <td>Yes<\/td>\r\n                <td>String Value<\/td>\r\n                <td>Location of the JSON schema file that describes the version of the template language.<\/td>\r\n            <\/tr>\r\n            <tr>\r\n                <td>contentVersion<\/td>\r\n                <td>Yes<\/td>\r\n                <td>String Value<\/td>\r\n                <td>Version of the template (such as 1.2.0.20). When deploying resources using the template, this value can be used to make sure that the right template is being used.<\/td>\r\n            <\/tr>\r\n            <tr>\r\n                <td>parameters<\/td>\r\n                <td>No<\/td>\r\n                <td>JSON Object<\/td>\r\n                <td>Values that are provided by the end user (manually or via a parameters file) when deployment is executed to customize resource deployment.<\/td>\r\n            <\/tr>\r\n            <tr>\r\n                <td>variables<\/td>\r\n                <td>No<\/td>\r\n                <td>JSON Object<\/td>\r\n                <td>Values that are reused multiple times in the template. You can update these values. They are different from Parameters as their value is known and they are not required as inputs from the end user.<\/td>\r\n            <\/tr>\r\n            <tr>\r\n                <td>resources<\/td>\r\n                <td>Yes<\/td>\r\n                <td>Array of Objects<\/td>\r\n                <td>Types of services that are deployed or updated in a resource group. Each JSON object in this Array denotes an Azure Resource.<\/td>\r\n            <\/tr>\r\n            <tr>\r\n                <td>outputs<\/td>\r\n                <td>No<\/td>\r\n                <td>JSON Object<\/td>\r\n                <td>Values that are returned after deployment.<\/td>\r\n            <\/tr>\r\n        <\/tbody>\r\n<\/table>\r\n\r\nNow that you know what each part is at a high level, in the next posts, we will look at the key 4 components in detail.\r\n\r\n 1. [Parameters](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-2-parameters\/)\r\n 2. [Variables](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-3-variables\/)\r\n 3. [Resources](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-4-resources\/)\r\n 4. [Outputs](..\/step-by-step-arm-templates-what-is-in-an-arm-template-understanding-components-5-outputs\/)\r\n\r\n  [1]: http:\/\/HarvestingClouds.com\/images\/147520488857edd71873f9b.png",
		"addpost": "addpost",
		"dated": "Aug 22, 2016",
		"slug": "step-by-step-arm-templates-what-is-in-an-arm-template-understanding-all-components",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>As we discussed <a href=\"..\/step-by-step-...\"><\/a><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Step by Step ARM Templates - JSON 101 for IT Administrators",
		"postDate": "17-08-2016",
		"tags": [
			"ARM",
			"Azure",
			"AzureResourceManager",
			"JSON",
			"Templates"
		],
		"category": "Azure",
		"body": "**Index** of all blogs in this **Step by Step ARM Templates series** is located here: [Step by Step Azure Resource Manager (ARM) Templates - Index](\/post\/step-by-step-azure-resource-manager-arm-templates-index\/)\r\n\r\nAzure Resource Manager (ARM) templates are written in JSON or **JavaScript Object Notation**. To understand ARM templates, you need to understand few quick basics about JSON. These will enable you to lay a great foundation which will enable you to understand ARM templates very easily.\r\n\r\nJSON or JavaScript Object Notation (pronounce like \"Jay-son\") is a text-based data format that's designed to be human-readable, lightweight, and easy to transmit between a server and a web client. Its syntax is derived from JavaScript. Think of this as an even more compact version of XML files.\r\n\r\nJSON is a popular notation for transmitting data through RESTful web services. The official internet media type for JSON is `application\/json`, and JSON files typically have a `.json` extension.\r\n\r\nTo understand JSON we need to understand **3 main components**. These components are like building blocks, using which you can build very complex JSON files.\r\n\r\n\r\n## 1. Objects ##\r\n\r\nObjects are the heart of JSON. Object denotes a real life object, e.g. an Employee. Just like a real life object, these have various properties and a value for each of these properties. E.g. An Employee will have Name property with value as John. Further, an employee object can have various another properties like Age, Salary, Department etc. So to denote an object in JSON you:\r\n\r\n - One object will be represented by curly brackets. It will begin from opening curly bracket i.e. `{` and will end at closing curly bracket i.e. `}`\r\n - Denote the property and corresponding values as `\"key\" : \"value\"` or `\"property\" : \"value\"` pairs.\r\n - You can only use double quotes for Properties as they will always be of type string\r\n - You will have double quotes around Values if they are of string type. You will not have any quotes in case of a number or a boolean value.\r\n - Each property will be separated from next property by a comma\r\n\r\n**Note:** Each JSON file is also a single JSON object. At root level it starts with an opening curly bracket i.e. `{` and will end with closing curly bracket i.e. `}`. There can't be any other objects at the root level. Think of this similar to how in an XML file there can be only one element at the root level. \r\n\r\nExample Employee object is shown below:\r\n\r\n    {\r\n        \"Name\" : \"John\",\r\n        \"Age\" : 34,\r\n        \"Department\" : \"Finance\",\r\n        \"Salary\" : \"100000\",\r\n        \"IsAdmin\" : true\r\n    }\r\n\r\n## 2. Arrays ##\r\n\r\nSimply put, arrays are a collection of items. In JSON the **square brackets** represents an Array. E.g. An array of 3 employees will look like below:\r\n\r\n    [\r\n      {\r\n            \"Name\" : \"John\",\r\n            \"Age\" : 34\r\n        },\r\n       {\r\n            \"Name\" : \"Mary\",\r\n            \"Age\" : 32\r\n        },\r\n       {\r\n            \"Name\" : \"Matthew\",\r\n            \"Age\" : 29\r\n        }\r\n    ]\r\n\r\n## 3. Nesting of Objects ##\r\nNow things get more interesting with nesting of Objects. What Nesting means is that one object can have it's property as another complex object. Don't worry if that sounds confusing. Let's understand that statement using an example. An Address where a person lives can be represented by an object. This object will look like below:\r\n\r\n    {\r\n      \"StreetNumber\" : \"50\",\r\n      \"StreetName\" : \"Brian Harrison Way\",\r\n      \"Unit Number\" : 22,\r\n      \"City\" : \"Toronto\",\r\n      \"Country\" : \"Canada\"\r\n    }\r\nNow an Employee Object will have an Address object as one of it's property (because employee need to live somewhere). This new complex Employee object will look like below, with nested Address object as one of it's property:\r\n\r\n     {\r\n            \"Name\" : \"John\",\r\n            \"Age\" : 34,\r\n            \"Department\" : \"Finance\",\r\n            \"Salary\" : \"100000\",\r\n            \"IsAdmin\" : true,\r\n            \"Address\" :   {\r\n                              \"StreetNumber\" : \"50\",\r\n                              \"StreetName\" : \"Brian Harrison Way\",\r\n                              \"Unit Number\" : 22,\r\n                              \"City\" : \"Toronto\",\r\n                              \"Country\" : \"Canada\"\r\n                           }\r\n        }\r\n\r\nThat's all there is to it. Now you can use these 3 components and build very complex json files\/templates. Even the most complex template can be broken into these 3 components. \r\n\r\nBelow is a complex example with all 3 components. \r\n\r\n    {\r\n        \"Department\": \"Finance\",\r\n        \"TotalEmployees\": 2,\r\n        \"Employees\": [\r\n            {\r\n                \"Name\": \"John\",\r\n                \"Age\": 34,\r\n                \"Department\": \"Finance\",\r\n                \"Salary\": \"100000\",\r\n                \"IsAdmin\": true,\r\n                \"Address\": {\r\n                    \"StreetNumber\": \"50\",\r\n                    \"StreetName\": \"Brian Harrison Way\",\r\n                    \"Unit Number\": 22,\r\n                    \"City\": \"Toronto\",\r\n                    \"Country\": \"Canada\"\r\n                }\r\n            },\r\n            {\r\n                \"Name\": \"John\",\r\n                \"Age\": 34,\r\n                \"Department\": \"Finance\",\r\n                \"Salary\": \"100000\",\r\n                \"IsAdmin\": true,\r\n                \"Address\": {\r\n                    \"StreetNumber\": \"50\",\r\n                    \"StreetName\": \"Brian Harrison Way\",\r\n                    \"Unit Number\": 22,\r\n                    \"City\": \"Toronto\",\r\n                    \"Country\": \"Canada\"\r\n                }\r\n            }\r\n        ]\r\n    }\r\n\r\nThe above JSON object denotes one department with name as Finance and total number of employees as 2. Then the \"Employees\" object is an array of 2 emplyees. Each emplyee object further have a complex property as Address, which is another object. \r\n\r\nIf you understood each of the 3 components, you should be able to build\/understand most complex JSON files with ease.",
		"savedraft": "savedraft",
		"dated": "Aug 17, 2016",
		"slug": "step-by-step-arm-templates-json-101-for-it-administrators",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Index<\/strong> of all blogs in this <strong>Step by Step ARM Templates series<\/strong> is located here: <a href=\"\/post\/step-by-step-azure-resource-manager-arm-templates-index\/\">Step by Step Azure Resource Manager (ARM) Templates - Index<\/a><\/p>\n<p>Azure Resource Manager (ARM) templates ar...<\/p>\n",
		"addpost": "addpost",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "ASR Setup for VMs running in VMWare without VMware level User Access",
		"postDate": "27-07-2016",
		"tags": [
			"ASR",
			"Azure",
			"AzureSiteRecovery",
			"VMWare"
		],
		"category": "Azure",
		"body": "### Problem Statement\r\nRecently I was setting up **Azure Site Recovery** (or ASR) in an environment. We had multiple VMs in VMWare environment. The environment was managed by Third Party who did not want to give any service account for VMWare as their environment was shared with different customers. So we had access only to the VMs. Without relevant access, ASR for VMWare was out of the question for us.\r\n\r\n### Solution\r\nWe treated the VMs, in such environment, as physical machines when setting up ASR to replicate these machines to Azure. \r\nWe used the option of \"***Not virtualized\/other***\" in the \"***Prepare Infrastructure***\" wizard of ASR. We **treated the VMs as physical servers** and did not face any issues during the migration. \r\n\r\nRefer below screenshot for the exact option discussed above.\r\n\r\n![Protection Goal][1]\r\n\r\n\r\nLater when enabling the Replication for any Server, run the \"***Enable Replication***\" wizard by clicking on \"**+Replicate**\" on the ASR vault's blade. Then select \"**Machine Type**\" as \"***Physical Machine***\" and add the Physical Machines by mentioning their IP addresses. \r\n\r\n**Note:** For this approach to work, the Configuration server should be on the same network as the VM being considered as Physical Machine.\r\n\r\n\r\nWe were able to migrate many servers successfully and without any issues using this approach.\r\n\r\n\r\n  [1]: http:\/\/HarvestingClouds.com\/images\/14696297155798c513ea908.png",
		"addpost": "addpost",
		"dated": "Jul 26, 2016",
		"slug": "asr-setup-for-vms-running-in-vmware-without-vmware-level-user-access",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<h3>Problem Statement<\/h3>\n<p>Recently I was setting up <strong>Azure Site Recovery<\/strong> (or ASR) in an environment. We had multiple VMs in VMWare environment. The environment was managed by Third Party who did not want to give any service account for VMWare as their environment was shared with ...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Uploading and Downloading files securely from Azure Storage Blob via PowerShell",
		"postDate": "18-05-2016",
		"tags": [
			"azure",
			"blob",
			"powershell",
			"storage"
		],
		"category": "Azure",
		"body": "**Azure blob storage** can provide a very highly available way to store your files in the cloud. You can dynamically add or remove the files in an automated fashion. These files can then be used for any number of purposes. E.g. A parameter file for ARM template can be kept in Azure blob storage and then dynamically read while creating resources from an ARM template.\r\n\r\n**The whole process can be broken down into 3 parts**:\r\n\r\n 1. Generating the context to the storage container\r\n 2. Uploading the files using the context\r\n 3. Downloading the files using the context\r\n\r\n### 1. Generating the context to the storage container\r\nThe context to the storage blob container can be created in one of the 3 ways, based on your security requirements. All methods use the `New-AzureStorageContext` cmdlet to generate the storage context. The methods differ on how you pass the parameters to this cmdlet.\r\n\r\n**A. Via fetching the Azure Storage Key**\r\n\r\nThis first method uses the `Get-AzureStorageKey` to fetch the storage key. This key is then used to generate the context as shown below.\r\n\r\n    $StorageAccountName = \"yourstorageaccount\"\r\n    $StorageAccountKey = Get-AzureStorageKey -StorageAccountName $StorageAccountName\r\n    $Ctx = New-AzureStorageContext $StorageAccountName -StorageAccountKey $StorageAccountKey.Primary\r\n\r\n**B. Via fetching the Azure Storage Container SAS Token**\r\n\r\nThis second method uses the `New-AzureStorageContainerSASToken` to create a new SAS token to securely access the storage container. This token is then used to generate the context as shown below.\r\n\r\n    $sasToken = New-AzureStorageContainerSASToken -Container abc -Permission rl\r\n    $Ctx = New-AzureStorageContext -StorageAccountName $StorageAccountName -SasToken $sasToken\r\n\r\n**C. Via Connectin String**\r\n\r\nThis third method uses a connection string, entered manually, which is then used to generate the context as shown below.\r\n\r\n    $ConnectionString = \"DefaultEndpointsProtocol=http;BlobEndpoint=<blobEndpoint>;QueueEndpoint=<QueueEndpoint>;TableEndpoint=<TableEndpoint>;AccountName=<AccountName>;AccountKey=<AccountKey>\"\r\n    $Ctx = New-AzureStorageContext -ConnectionString $ConnectionString\r\n\r\n### 2. Uploading the files using the context\r\n\r\nNow that you have the context to the storage account you can upload and download files from the storage blob container.\r\nUse the below code to upload a file named \"_Parameters.json_\", located on the local machine at \"_C:\\Temp_\" directory.\r\n\r\n    #Uploading File\r\n    $BlobName = \"Parameters.json\"\r\n    $localFile = \"C:\\Temp\\\" + $BlobName\r\n    $ContainerName  = \"vhds\"\r\n\r\n    #Note the Force switch will overwrite if the file already exists in the Azure container\r\n    Set-AzureStorageBlobContent -File $localFile -Container $ContainerName -Blob $BlobName -Context $Ctx -Force\r\n\r\n### 3. Downloading the files using the context\r\n\r\nDownload works in almost identical manner. You use the Get cmdlet instead of Set as shown below to download a file to a local folder, located at \"_C:\\Downloads_\".\r\n\r\n    #Download File\r\n    $BlobName = \"Parameters.json\"\r\n    $localTargetDirectory = \"C:\\Downloads\"\r\n    $ContainerName  = \"vhds\"\r\n\r\n    Get-AzureStorageBlobContent -Blob $BlobName -Container $ContainerName -Destination $localTargetDirectory -Context $ctx\r\n\r\nI hope this helps simplify the automated usage of Azure Storage container. Let us know your concerns or questions if any.\r\n\r\nYou can find the **complete sample** at the below link on GitHub. Right-click and select Save As to save the file: [StorageAccountBlobManagement.ps1](https:\/\/raw.githubusercontent.com\/HarvestingClouds\/PowerShellSamples\/master\/Scripts\/StorageAccountBlobManagement.ps1)\r\n\r\n**Reference:** <a href=\"https:\/\/azure.microsoft.com\/en-us\/documentation\/articles\/storage-powershell-guide-full\/\" target=\"_blank\">Using Azure PowerShell with Azure Storage<\/a>",
		"addpost": "addpost",
		"dated": "May 18, 2016",
		"slug": "uploading-and-downloading-files-securely-from-azure-storage-blob-via-powershell",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p><strong>Azure blob storage<\/strong> can provide a very highly available way to store your files in the cloud. You can dynamically add or remove the files in an automated fashion. These files can then be used for any number of purposes. E.g. A parameter file for ARM template can be kept in Azure b...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure comes to Canada (along with Office 365)",
		"postDate": "16-05-2016",
		"tags": [
			"azure",
			"datacenter"
		],
		"category": "Azure",
		"body": "Last week marked the general availability of Azure datacenter for Canada locations. Also Office 365 has been released last week. Microsoft has set up 2 new datacenters in Canada. \r\n\r\n### Where Exactly are these datacenters located\r\n\r\n 1. **Canada Central** - The first datacenter is located in Toronto.\r\n 2. **Canada East** - The second datacenter is located in Quebec City.\r\n\r\nNow when you are creating a new resource (like a Virtual Machine) you will see these two options.\r\n\r\n![New Locations](http:\/\/HarvestingClouds.com\/images\/1463686879573e16df4f64c.png)\r\n\r\nCheck out the brief announcement video by **Janet Kennedy**, President of Microsoft Canada:\r\n<iframe src=\"https:\/\/channel9.msdn.com\/Blogs\/CANITPRO\/The-Microsoft-Canada-Cloud-is-Open-for-Business\/player\" width=\"560\" height=\"315\" allowFullScreen frameBorder=\"0\"><\/iframe>\r\n\r\n### Key Resources:\r\n\r\n - These locations are also listed in the official Microsoft Regions list here: <a href=\"https:\/\/azure.microsoft.com\/en-us\/regions\/#services?WT.mc_id=azurebg_email_Trans_1106_Tier2_Release_MOSP\" target=\"_blank\">Azure Regions<\/a>\r\n - Various resources and information for cloud in Canada are available here at <a href=\"https:\/\/www.microsoft.com\/en-ca\/sites\/datacentre\/default.aspx\" target=\"_blank\">Cloud Accelerate site for Canada<\/a>.\r\n - You can read about this announcement and upcoming features here: <a href=\"https:\/\/azure.microsoft.com\/en-us\/blog\/microsoft-cloud-accelerates-in-canada-and-expands-to-south-korea\/?WT.mc_id=azurebg_email_Trans_1106_Tier2_Release_MOSP\" target=\"_blank\">Microsoft Cloud accelerates in Canada and expands to South Korea<\/a>",
		"addpost": "addpost",
		"dated": "May 16, 2016",
		"slug": "azure-comes-to-canada-along-with-office-365",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Last week marked the general availability of Azure datacenter for Canada locations. Also Office 365 has been released last week. Microsoft has set up 2 new datacenters in Canada. <\/p>\n<h3>Where Exactly are these datacenters located<\/h3>\n<ol><li><strong>Canada Central<\/strong> - The first datacen...<\/li><\/ol>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "NEW Feature - Azure Cool Blob Storage",
		"postDate": "02-05-2016",
		"tags": [
			"announcement",
			"azure",
			"storage"
		],
		"category": "Azure",
		"body": "Have you heard about the new **Azure Cool Blob Storage**? \r\n\r\nIf you haven\u2019t heard about it, this is Microsoft's low-cost storage for **Cool** object data. \u201cExample use cases for cool storage include backups, media content, scientific data, compliance and archival data. In general, any data which lives for a longer period of time and is accessed less than once a month is a perfect candidate for cool storage.\u201d It is similar to what **Glacier storage tier** provides in Amazon Web Services.\r\n\r\n - **Pricing:** Its cost is as low as $0.01\/GB.\r\n - **Availability:** 99% (as compared to 99.9% for Hot Storage). With Read-access geo-redundant storage (or RA-GRS) the SLA is 99.9% (as compared to 99.99% for Hot).\r\n - **Deciding which AccessTier to use:** If the objects in the storage account will be more frequently accessed, then go with **Hot Tier**. Select the **Cold Tier** for infrequently accessed data.\r\n\r\nNow when you go to New -> \"Data + Storage\" -> Storage Account, and try to create a Blob Storage account then you can select from one of the options for **Access Tier** from Cold or Hot tier. \r\n\r\n![Storage Tiers][1]\r\n\r\nAlso, note that at the time of this writing, Blob storage account is **only available in these locations**: Central US, East US 2, North Central US, North Europe, West Europe, Southeast Asia, Japan East, Japan West, Central India, South India, West India.\r\n\r\n**Resources to know more:**  \r\n\r\n - <a href=\"https:\/\/azure.microsoft.com\/en-us\/blog\/introducing-azure-cool-storage\/\" target=\"_blank\">Official Announcement<\/a>\r\n - <a href=\"https:\/\/azure.microsoft.com\/en-us\/documentation\/articles\/storage-blob-storage-tiers\/\" target=\"_blank\">Getting started guide<\/a>\r\n\r\n\r\n  [1]: http:\/\/HarvestingClouds.com\/images\/146232375357294a2980ece.png",
		"addpost": "addpost",
		"dated": "May 02, 2016",
		"slug": "new-feature-azure-cool-blob-storage",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Have you heard about the new <strong>Azure Cool Blob Storage<\/strong>? <\/p>\n<p>If you haven&rsquo;t heard about it, this is Microsoft's low-cost storage for <strong>Cool<\/strong> object data. &ldquo;Example use cases for cool storage include backups, media content, scientific data, compliance and...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Taking Automatic Remediation Action on Azure VM Alert Generation",
		"postDate": "27-04-2016",
		"tags": [
			"automation",
			"azure",
			"azureautomation",
			"virtualmachine",
			"vm"
		],
		"category": "Azure",
		"body": "Using a new feature in Azure, now you can easily configure to trigger an Azure Automation Runbook when an Alert is triggered on an Azure Virtual Machine to take a remediation action. To leverage this feature all you need to do is link the alert on Azure VM to an already existing Azure Automation Runbook.\r\n\r\n > Note: This feature is supported only for the V2 Virtual Machines, i.e. the VMs created using ARM portal.\r\n\r\nTo access this feature open your Virtual Machine. Then go to the Manage alerts section in the Settings:\r\n\r\n![Setting - Manage alerts][1]\r\n\r\nThen open an existing alert or click on \"Add alert\" to create a new one. Specify the criteria for the alert. Scroll down to the bottom and you can view the new section to link the alert to an Automation Runbook.\r\n\r\n![Automation Runbook for Alert][2]\r\n\r\n###Under the hood\r\nThe alert will send data to your Runbook in a special format. Your Runbook should be expecting this. Under the hood this happens via WebHooks. The alert data is passed via a HTTP POST request. The Automation webhook service extracts the alert data from the POST request and passes it to the runbook in a parameter called **\"WebhookData\"**. The Runbook will look like below:\r\n\r\n    [OutputType(\"PSAzureOperationResponse\")]\r\n    \r\n    param ( [object] $WebhookData )\r\n    \r\n    if ($WebhookData)\r\n    {\r\n        # Get the data object from WebhookData\r\n        $WebhookBody = (ConvertFrom-Json -InputObject $WebhookData.RequestBody)\r\n\r\n        #Rest of the script comes here\r\n    }\r\n\r\n**In Nutshell**, now you can now trigger Azure Automation Runbooks to take remediation actions on Virtual Machines in case an alert is triggered. \r\n\r\n**Reference with complete Runbook sample:** [Azure Automation solution - remediate Azure VM alerts](https:\/\/azure.microsoft.com\/en-us\/documentation\/articles\/automation-azure-vm-alert-integration\/)\r\n\r\n\r\n  [1]: http:\/\/HarvestingClouds.com\/images\/14618976705722c9c653752.png\r\n  [2]: http:\/\/HarvestingClouds.com\/images\/14618990795722cf4763dce.png",
		"savedraft": "savedraft",
		"dated": "Apr 27, 2016",
		"slug": "taking-automatic-remediation-action-on-azure-vm-alert-generation",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Using a new feature in Azure, now you can easily configure to trigger an Azure Automation Runbook when an Alert is triggered on an Azure Virtual Machine to take a remediation action. To leverage this feature all you need to do is link the alert on Azure VM to an already existing Azure Automation ...<\/p>\n",
		"addpost": "addpost",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "ROADMAP - Solutions to help with Migration from Azure ASM to ARM portal",
		"postDate": "22-04-2016",
		"tags": [
			"announcement",
			"arm",
			"asm",
			"azure",
			"azureresourcemanager",
			"azureservicemanagement"
		],
		"category": "Azure",
		"body": "In additional to the tool I mentioned yesterday regarding [Migrating from Azure ASM to ARM portal](http:\/\/harvestingclouds.com\/Migrating-from-Azure-ASM-to-ARM-portal) there are various solutions in the pipeline. This post looks at the high level Roadmap for the same from Microsoft.\r\n\r\nMicrosoft has promised that they are committed to make the migration more easier from ASM (older) to ARM (newer) portal. Various solutions are already in the pipeline for this.\r\nBelow are the details and roadmap for the tentative timelines for these solutions.\r\n\r\n<table border=\"1\" cellpadding=\"0\" cellspacing=\"0\"> <tbody> <tr> <td valign=\"top\" width=\"29%\"> <p><b>Solution<\/b><\/p> <\/td> <td valign=\"top\" width=\"51%\"> <p><b>Customer Experience<\/b><\/p> <\/td> <td valign=\"top\" width=\"18%\"> <p><b>Expected availability in 2016<\/b><\/p> <\/td> <\/tr> <tr> <td valign=\"top\" width=\"29%\"> <p>Script migration<\/p> <\/td> <td valign=\"top\" width=\"51%\"> <p>VM is rebooted as it is recreated in the Resource Manager model. While the Virtual Machines for the environment are recreated, the network is disconnected.<\/p> <\/td> <td valign=\"top\" width=\"18%\"> <p align=\"center\">Q1<\/p> <\/td> <\/tr> <tr> <td valign=\"top\" width=\"29%\"> <p>Virtual Machines, no VNET<\/p> <\/td> <td valign=\"top\" width=\"51%\"> <p>As all Virtual Machines deployed in the Resource Manager model must be in a VNet, Virtual Machines will be migrated and placed in a new VNET. This will result in a change in network configuration, requiring a reboot to reconnect.<\/p> <\/td> <td valign=\"top\" width=\"18%\"> <p align=\"center\">Q2<\/p> <\/td> <\/tr> <tr> <td valign=\"top\" width=\"29%\"> <p>Virtual Machines with VNET<\/p> <\/td> <td valign=\"top\" width=\"51%\"> <p>Starting in Q2, the platform will offer Virtual Machine migration from ASM to Resource Manager model without disrupting the running Virtual Machine. This will require disconnecting any VNets connected on-premises, whether via ExpressRoute or VPN, before doing the migration.<\/p> <\/td> <td valign=\"top\" width=\"18%\"> <p align=\"center\">Q2<\/p> <\/td> <\/tr> <tr> <td valign=\"top\" width=\"29%\"> <p>Virtual Machines with basic hybrid (one connection)<\/p> <\/td> <td valign=\"top\" width=\"51%\"> <p>Starting in Q3, the platform will offer Virtual Machine migration from ASM to Resource Manager model without disrupting the running Virtual Machine and with minimal disruption to a basic hybrid connection, limited to just one connection back on-premises. More complex connections will require disconnecting before doing the migration.<\/p> <\/td> <td valign=\"top\" width=\"18%\"> <p align=\"center\">Q3<\/p> <\/td> <\/tr> <\/tbody> <\/table>\r\n\r\nReference: [Transitioning to the Resource Manager model](https:\/\/azure.microsoft.com\/en-us\/blog\/transitioning-to-the-resource-manager-model\/)",
		"addpost": "addpost",
		"dated": "Apr 22, 2016",
		"slug": "roadmap-solutions-to-help-with-migration-from-azure-asm-to-arm-portal",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>In additional to the tool I mentioned yesterday regarding <a href=\"http:\/\/harvestingclouds.com\/Migrating-from-Azure-ASM-to-ARM-portal\">Migrating from Azure ASM to ARM portal<\/a> there are various solutions in the pipeline. This post looks at the high level Roadmap for the same from Microsoft.<\/p>...\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Migrating from Azure ASM to ARM portal",
		"postDate": "21-04-2016",
		"tags": [
			"arm",
			"asm",
			"azure",
			"azureresourcemanager",
			"azureservicemanagement"
		],
		"category": "Azure",
		"body": "With co-existing Azure Service Management or ASM portal (older) and Azure Resource Manager or ARM portal (newer) there has been lots of confusions and problems for IT administrators.\r\nThe bottom line of all the discussion around the two portals is that **ARM is the future and is here to stay**. It means that you need to **plan and migrate** your resources from ASM portal to the ARM portal.\r\n\r\nThe key resource is your infrastructure which primarily consists of virtual machines. To migrate a single Virtual Machine (VM) from ASM portal to ARM portal you can leverage a set of PowerShell scripts called ASM2ARM.\r\nYou can download these scripts and check their description on [GitHub here on the **ASM2ARM** page](https:\/\/github.com\/fullscale180\/asm2arm). You can check the detailed instructions there too.\r\n\r\nTo plan this right now is very important as the transitioning to Azure Resource Manager model is already underway. Any future development and investment seems to be happening only in the newer portal only.\r\n\r\n**Reference:** [ASM2ARM scripts on GitHub](https:\/\/github.com\/fullscale180\/asm2arm)",
		"addpost": "addpost",
		"dated": "Apr 21, 2016",
		"slug": "migrating-from-azure-asm-to-arm-portal",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>With co-existing Azure Service Management or ASM portal (older) and Azure Resource Manager or ARM portal (newer) there has been lots of confusions and problems for IT administrators.\nThe bottom line of all the discussion around the two portals is that <strong>ARM is the future and is here to stay...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "PowerShell DSC - Partial Configurations",
		"postDate": "20-04-2016",
		"tags": [
			"dsc",
			"powershell"
		],
		"category": "PowerShell",
		"body": "**Partial Configurations** is a new feature in PowerShell 5.0 Desired State Configuration or DSC. It allows the configurations to be delivered in parts or fragments. These configurations can come from various sources.\r\nThe Local Configuration Manager or LCM on the target node puts these partial configurations from different sources together and after that apply the same as a single configuration.\r\n\r\nThis opens various possibilities for Enterprises to manage their infrastructure and designate the responsibility to various teams for a single node. The team expert in a particular field can focus on that feature without worrying about other features.\r\n\r\nYou can have partial configurations in following modes:\r\n\r\n 1. Push Mode\r\n 2. Pull Mode\r\n 3. Hybrid Mode (i.e. combination of Push and Pull)\r\n \r\n### Configuration for the PUSH Mode\r\n\r\nYou need to follow three steps to configure Partial configurations for the PUSH mode:\r\n\r\n - Configure the LCM, on the target node, to expect partial configurations\r\n - Push each partial configuration from different sources using **Publish-DSCConfiguration** cmdlet. Target node will automatically combine the partial configurations into single configuration.\r\n - Apply the configuration by calling the **Start-DSCConfiguration**cmdlet\r\n \r\n### Configuration for the PULL Mode\r\n\r\nThis is bit complex than the Push mode. In nutshell you only need couple of steps:\r\n\r\n - Configure the LCM, on the target node, to receive partial configurations but from PULL servers\r\n - Name and locate the configuration documents properly on the pull servers\r\n \r\nTo know more about DSC Partial configurations follow the below references:\r\n\r\n   - [Detailed Blog by AutomationNext with very valuable insights](https:\/\/automationnext.wordpress.com\/2016\/04\/19\/powershell-desired-state-configuration-partial-configurations-without-configurationid\/)\r\n   - [Official MSDN Article](https:\/\/msdn.microsoft.com\/en-us\/powershell\/dsc\/partialconfigs)",
		"addpost": "addpost",
		"dated": "Apr 20, 2016",
		"slug": "powershell-dsc-partial-configurations",
		"categoryslug": "powershell",
		"status": "publised",
		"summary": "\n<p><strong>Partial Configurations<\/strong> is a new feature in PowerShell 5.0 Desired State Configuration or DSC. It allows the configurations to be delivered in parts or fragments. These configurations can come from various sources.\nThe Local Configuration Manager or LCM on the target node puts the...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Container Service hits General Availability",
		"postDate": "19-04-2016",
		"tags": [
			"azure",
			"general"
		],
		"category": "Azure",
		"body": "Azure Container Service has finally hit General Availability today. \r\n\r\nIf you don't know already, it is the \"container hosting solution\" which is optimized for Microsoft's Azure cloud.\r\nAll the tools that you may be familiar with when working with a Container Service should work like Apache Mesos or Docker Swarm. It only uses open source components in the orchestration layers to give you portability of full applications.\r\n\r\nYou can find the announcement here: [GA for Azure Container Service](https:\/\/azure.microsoft.com\/en-us\/updates\/general-availability-azure-container-service\/)\r\n\r\nYou can learn more about the Container Service as offered by Azure on the product page here: [Azure Container Service](https:\/\/azure.microsoft.com\/en-us\/services\/container-service\/)\r\n",
		"addpost": "addpost",
		"dated": "Apr 19, 2016",
		"slug": "azure-container-service-hits-general-availability",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Azure Container Service has finally hit General Availability today. <\/p>\n<p>If you don't know already, it is the \"container hosting solution\" which is optimized for Microsoft's Azure cloud.\nAll the tools that you may be familiar with when working with a Container Service should work lik...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Azure Authentication - Authenticating any Azure API Request in your Application",
		"postDate": "15-04-2016",
		"tags": [
			".net",
			"azure",
			"csharp"
		],
		"category": "Azure",
		"body": "I have created a code sample to showcase how you can authenticate any request programatically with Azure. \r\nThis also contains **a Reusable Authentication Helper class** which you can directly use in your code.\r\n\r\n### Where is the code\r\n\r\nYou can find the complete code sample along with the reusable Azure Authentication Helper class library from this GitHub repo:\r\n[Azure Authentication Sample](https:\/\/github.com\/HarvestingClouds\/AzureAuthentication)\r\n\r\n### What are my authentication Options\r\n\r\nYou have the following options\r\n\r\n - Authenticating by **Prompting** for Credentials from end user. (This needs end user interaction)\r\n - Authenticating by **Credentials** i.e. using a password. (This does not need any end user interaction)\r\n - Authenticating by using a **Certificate** ( This also does not need any end user interaction)\r\n\r\nI have provided this functionality in 3 separate methods, in a separate class file along with it's interface. \r\nYou can follow the instructions in the ReadMe file in the GitHub repo and start using any one of the method.\r\n\r\nI hope you find this usefull and this will avoid the trouble of figuring things out, which I have already undergone. \r\n\r\nLet me know in the comments below if you have any questions or anything to add to this.",
		"addpost": "addpost",
		"dated": "Apr 15, 2016",
		"slug": "azure-authentication-authenticating-any-azure-api-request-in-your-application",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>I have created a code sample to showcase how you can authenticate any request programatically with Azure.\nThis also contains <strong>a Reusable Authentication Helper class<\/strong> which you can directly use in your code.<\/p>\n<h3>Where is the code<\/h3>\n<p>You can find the complete code sample alo...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Run Azure Automation Runbooks via PowerShell ISE",
		"postDate": "14-04-2016",
		"tags": [
			"automation",
			"azure",
			"powershell"
		],
		"category": "Azure",
		"body": "Today I came across this blog post from my friend: [Azure Automation PowerShell ISE add-on](https:\/\/scomanswers.wordpress.com\/2016\/04\/11\/azure-automation-powershell-ise-add-on\/)\r\n\r\nWhat I came to know is that now you can Run the Azure Automation Runbooks via PowerShell ISE. This solves a big pain point for all Azure developers.\r\nNow you will be able to develop and test your scripts right from the convenience of your laptop's local PowerShell ISE. \r\n\r\n### What you need to do\r\nAll you need to do is install the PowerShell Add-On using the below cmdlet:\r\n\r\n```powershell\r\nFind-Module AzureAutomationAuthoringToolkit | Install-Module -Scope CurrentUser\r\n```\r\n\r\nThen import the module using below cmdlet:\r\n\r\n```powershell\r\nImport-Module AzureAutomationAuthoringToolkit\r\n```\r\n\r\nYou can configure the Add-On using a Configuration tab in the add-on and start getting your hands dirty. \r\n\r\n### Official Information from the Add-On Help\r\n\r\n#### Capabilities\r\n\r\n - Test runbooks on your local machine and in the Azure Automation service: \r\n - Store and edit Automation Assets locally \r\n - Use Automation Activities (Get-AutomationVariable, Get-AutomationPSCredential, etc) in local PowerShell scripts \r\n - Sync changes back to your Automation Account \r\n - Run test jobs in Automation and view results \r\n\r\n#### Notes\r\nAssets\r\n\r\n - Secret values (passwords, encrypted variables) are not downloaded automatically; they need to be set manually the first time the account is synced \r\n - Values that haven't been downloaded will be highlighted \r\n - Asset values you enter locally will not get overwritten when you sync from the cloud \r\n\r\nRunbooks \r\n\r\n - Native PowerShell and PowerShell Workflow runbooks are supported \r\n\r\nCheck the screenshot regarding this information below:\r\n![Official Notes](http:\/\/HarvestingClouds.com\/images\/1461735632572050d069253.png \"Official Notes\")\r\n\r\n### How much time it would take me\r\nIn all it would take you under 10 mins to get setup and rolling.\r\n\r\n### Where is more information on this and screenshots\r\nGo to the official [Technet blog by clicking HERE.](https:\/\/blogs.technet.microsoft.com\/msoms\/2016\/04\/08\/the-way-cool-azure-automation-powershell-ise-add-on\/)\r\n\r\nStart playing around and let us know your initial impression in the comments below. If you have any doubts and I will be happy to address them.",
		"addpost": "addpost",
		"dated": "Apr 14, 2016",
		"slug": "run-azure-automation-runbooks-via-powershell-ise",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Today I came across this blog post from my friend: <a href=\"https:\/\/scomanswers.wordpress.com\/2016\/04\/11\/azure-automation-powershell-ise-add-on\/\">Azure Automation PowerShell ISE add-on<\/a><\/p>\n<p>What I came to know is that now you can Run the Azure Automation Runbooks via PowerShell ISE. This so...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Various Options Added to Buy Microsoft Azure Active Directory Basic",
		"postDate": "13-04-2016",
		"tags": [
			"azure",
			"general",
			"ad",
			"activedirectory"
		],
		"category": "Azure",
		"body": "Today Microsoft announced that they have added various options to buy Microsoft Azure Active Directory (AAD) Basic. \r\nYou can now buy it through the Direct program as well as through following options:\r\n\r\n - [Microsoft Enterprise Agreement](https:\/\/www.microsoft.com\/en-us\/licensing\/licensing-programs\/enterprise.aspx?WT.mc_id=azurebg_email_Trans_1065_Tier2_Release_MOSP)\r\n - [Open Volume License Program](https:\/\/www.microsoft.com\/en-us\/licensing\/licensing-programs\/open-license.aspx?WT.mc_id=azurebg_email_Trans_1065_Tier2_Release_MOSP)\r\n - [Microsoft Cloud Solution Provider](https:\/\/partner.microsoft.com\/en-US\/Solutions\/cloud-reseller-overview?WT.mc_id=azurebg_email_Trans_1065_Tier2_Release_MOSP)\r\n\r\nTo purchase, sign in to the [Office 365 Administration Portal](https:\/\/portal.office.com)\r\n\r\nYou can also watch the below video for details. Although the video is for AAD Premium, the steps are essentially similar for AAD Basic.\r\n<iframe src=\"https:\/\/channel9.msdn.com\/Series\/Azure-Active-Directory-Videos-Demos\/How-to-Purchase-Azure-Active-Directory-Premium-Existing-Customer\/player\" width=\"560\" height=\"315\" allowFullScreen frameBorder=\"0\"><\/iframe>\r\n\r\nYou can also engage a partner to assist you with the purchase and your Azure Active Directory related any requirements. \r\n[Infront Consulting Group](http:\/\/www.infrontconsulting.com\/) (where I currently work) is one such partner who are highly respected in market and are Microsoft Gold Certified Partner. \r\n\r\nThanks for reading! If you have any questions please ask in the comments below.",
		"addpost": "addpost",
		"dated": "Apr 13, 2016",
		"slug": "various-options-added-to-buy-microsoft-azure-active-directory-basic",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Today Microsoft announced that they have added various options to buy Microsoft Azure Active Directory (AAD) Basic.\nYou can now buy it through the Direct program as well as through following options:<\/p>\n<ul><li><a href=\"https:\/\/www.microsoft.com\/en-us\/licensing\/licensing-programs\/enterprise.asp...\"><\/a><\/li><\/ul>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Multiple Values In Grid.Mvc Single Column Filter via Checkboxes with Code Sample",
		"postDate": "12-04-2016",
		"tags": [
			"csharp",
			"gridmvc",
			"mvc",
			"webdevelopment"
		],
		"category": "Web Development",
		"body": "I have been struggling to implement multiple filters in a single column in Grid.Mvc tool. I have solved this by altering the code and updating the custom widget.\r\n**Note:** The WithMultipleFilters() option will not help you in this. That option enables multiple filters on different columns. To have multiple filters in the same column you need to update the way filtering works in the tool itself.\r\n\r\nI have used a list of checkboxes and any or all of the elements selected in this checkbox list will be used for filtering the column values.\r\n\r\nYou can find the code in my fork of the official Grid.Mvc repo at below link:\r\n<a href=\"https:\/\/github.com\/HarvestingClouds\/Grid.Mvc\" target=\"_blank\">Fork of Grid.Mvc repo with Advance Filters<\/a>\r\n\r\nI have also created a pull request for the same so that more people get benefit from this if they refer the master branch of the main repo.\r\n\r\n### What are the changes I have done?\r\nI have made changes to two files:\r\n\r\n 1. **DefaultColumnFilter.cs** file in \"**GridMvc**\" class library project under the Filters folder. I have updated the GetFilterExpression method to create multiple expressions based on the pipeline character in filter values.\r\n 2. **gridmvc.customwidgets.js** file in \"**GridMvc.Site**\" web application project\r\n\r\nBoth of these paths are shown below:\r\nLocation of DefaultColumnFilter.cs:\r\n![DefaultColumnFilter.cs](http:\/\/HarvestingClouds.com\/images\/146173541957204ffb99678.png \"DefaultColumnFilter.cs\")\r\n\r\nLocation of gridmvc.customwidgets.js:\r\n![gridmvc.customwidgets.js](http:\/\/HarvestingClouds.com\/images\/146173543057205006529e6.png \"gridmvc.customwidgets.js\")\r\n\r\nHow the end result look like:\r\n![Checkbox Filtering](http:\/\/HarvestingClouds.com\/images\/14617354255720500171fe7.png \"Checkbox Filtering\")\r\n\r\nYou can directly use the code if you want. Just honor the license of the original author.\r\n\r\nLet me know in the comments below if you have any doubts and I will be happy to address them.",
		"addpost": "addpost",
		"dated": "Apr 12, 2016",
		"slug": "multiple-values-in-gridmvc-single-column-filter-via-checkboxes-with-code-sample",
		"categoryslug": "web-development",
		"status": "publised",
		"summary": "\n<p>I have been struggling to implement multiple filters in a single column in Grid.Mvc tool. I have solved this by altering the code and updating the custom widget.\n<strong>Note:<\/strong> The WithMultipleFilters() option will not help you in this. That option enables multiple filters on different co...<\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Getting Started - Azure Site Recovery (ASR) In New Azure Portal",
		"postDate": "09-04-2016",
		"tags": [
			"arm",
			"azure"
		],
		"category": "Azure",
		"body": "Azure Site Recovery or ASR is now available in the new Azure Resource Manager or ARM portal (codename Ibiza) with modern user interface. It is in preview at this stage. But it is production ready for all the Hyper-V related scenarios.\r\n**Your older Vaults (created via Classic ASM Azure Portal) will not be available in ASR preview feature.**\r\n\r\n### What are the new features\r\n\r\nThe new features include:\r\n\r\n* All the goodness of Azure Resource Manager in ASR\r\n* Lean experience for various ASR scenarios\r\n* Enhancements to the specific Site Recovery scenarios\r\n\r\n### Lets take a quick look at some of these.\r\n\r\nIf you Browse and search for \"Recovery\" you get Recovery Services Vaults as Preview feature.\r\n![Browse and Search](http:\/\/HarvestingClouds.com\/images\/14617358075720517f78904.png \"Browse and Search\")\r\n\r\nClicking on it will open up the blade for \"Recovery Services valuts\". Notice that Microsoft has PREVIEW text in this.\r\n![alt text](http:\/\/HarvestingClouds.com\/images\/1461735702572051161683f.png \"ASR Vault\")\r\n\r\nClicking on the Add button brings up the ASR vault creation blade. Notice the locations available for vault creation here.\r\n![Vault Creation](http:\/\/HarvestingClouds.com\/images\/14617359385720520210878.png \"Vault Creation\")\r\n\r\nAfter you hit create the Vault gets deployed really quickly. I tested for East US location and it was created in under 10 secs.\r\nRefresh to view your newly created vault. Click on it to open the NEW ASR Vault features. Notice that the Backup feature is also there in the ASR vault now.\r\n![New Vault](http:\/\/HarvestingClouds.com\/images\/1461735907572051e31549a.png \"New Vault\")\r\n\r\nTo find the options for replication go to Settings -> Getting Started section -> Site Recovery -> Follow Wizard.\r\n![New Site Recovery Wizard](http:\/\/HarvestingClouds.com\/images\/1461735869572051bd2d6fa.png \"New Site Recovery Wizard\")\r\n\r\nThe Scenario Types available are only two. But all the scenarios are covered here:\r\n\r\n* From my site to Azure\r\n* From my site to another site\r\n\r\nBased on the scenario you select you are asked for different options. The options for Virtualization\/Management Server type for \"From my site to Azure\" are:\r\n\r\n* VMM\r\n* Stand alone Hyper-V hosts\r\n* vCenter\r\n* Physical machines (not virtualized)\r\n![Creation Options](http:\/\/HarvestingClouds.com\/images\/14617358385720519e578ba.png \"Creation Options\")\r\n\r\n### Backup in ASR vault\r\nAnother feature is creation of Backups from the same vault. Click on the + icon for Backup in the Vault main blade and then follow the wizard for the preview feature.\r\n![Backup In ASR](http:\/\/HarvestingClouds.com\/images\/14617357575720514d5d1d8.png \"Backup In ASR\")\r\nNotice in the screenshot above that the backup types available are:\r\n\r\n* Azure virtual machine backup\r\n* File Folder backup\r\n* System Center Data Protection Manager\r\n\r\nSelecting each option provides you with details for next steps. You can then create a backup policy and configure Items to backup.\r\n\r\nGive these features a try and let us know in comments below how you find the new features.\r\nHappy Exploring!",
		"addpost": "addpost",
		"dated": "Apr 09, 2016",
		"slug": "getting-started-azure-site-recovery-asr-in-new-azure-portal",
		"categoryslug": "azure",
		"status": "publised",
		"summary": "\n<p>Azure Site Recovery or ASR is now available in the new Azure Resource Manager or ARM portal (codename Ibiza) with modern user interface. It is in preview at this stage. But it is production ready for all the Hyper-V related scenarios.\n<strong>Your older Vaults (created via Classic ASM Azure Porta...<\/strong><\/p>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Coming Soon - Windows 10 Anniversary Update",
		"postDate": "08-04-2016",
		"tags": [
			"announcement",
			"windows10"
		],
		"category": "General",
		"body": "Windows 10 Anniversary Update is coming this summary. It will be available for free download for the following devices (which is almost every device):\r\n\r\n* PCs\r\n* Tablets\r\n* Phones\r\n* Xbox One\r\n* Microsoft HoloLens\r\n* IoT\r\n\r\n## What this means to you:\r\n\r\n* Improved Biometric Security\r\n* Microsoft Edge browser\r\n* Windows Ink (where just one click of pen will bring up all the gamut available for use with your Pen device)\r\n* Universal Windows Platform or UWP apps are coming to XBox through a Unified Windows Store. Also if you own a XBox you will be able to turn it into a dev box and do development with it\r\n* Various improvements to Cortana\r\n\r\n<a href=\"https:\/\/www.microsoft.com\/en-us\/windows\/upcoming-features\" target=\"_blank\">Check out more details here<\/a>\r\n",
		"addpost": "addpost",
		"dated": "Apr 08, 2016",
		"slug": "coming-soon-windows-10-anniversary-update",
		"categoryslug": "general",
		"status": "publised",
		"summary": "\n<p>Windows 10 Anniversary Update is coming this summary. It will be available for free download for the following devices (which is almost every device):<\/p>\n<ul><li>PCs<\/li>\n<li>Tablets<\/li>\n<li>Phones<\/li>\n<li>Xbox One<\/li>\n<li>Microsoft HoloLens<\/li>\n<li>IoT<\/li>\n<\/ul><h2>What this means to you...<\/h2>\n",
		"prevStatus": "publised"
	},
	{
		"author": "@20aman",
		"title": "Introducing Harvesting Clouds",
		"postDate": "04-01-2016",
		"tags": [
			"general"
		],
		"category": "General",
		"body": "Harvesting Clouds is a blog about all things Cloud. Be it Private Cloud or Public Cloud, I will try to cover various aspects of both.\r\n\r\n### Private Cloud\r\n\r\nMy key areas of interest in Private Cloud include the following:\r\n\r\n* PowerShell Scripting\r\n* Windows Azure Pack or WAP\r\n* Service Management Automation or SMA\r\n* Azure Stack\r\n* System Center Orchestrator\r\n* System Center VMM and other products like Service Manager, Ops Mgr, etc.\r\n\r\n### Public Cloud\r\n\r\nIn addition to the Private Cloud the areas of interest in Public Cloud are:\r\n\r\n* Microsoft Azure and Amazon Web Services - both IaaS and PaaS\r\n* Azure Automation\r\n* Desired State Configurations\r\n* Application Insights\r\n* Azure Web Apps\r\n* Web APIs\r\n* Azure Site Recovery and Backup\r\n* Migrations from Private to Public Clouds\r\n\r\n### Common Areas & Best of both worlds\r\n\r\nI have also been involved in creating Hybrid clouds leveraging the best of both worlds. I will try to share my knowledge on this with you. The key aspects in this area are:\r\n* Building Hybrid Solutions\r\n* Developing Web or Desktop Applications targetting either or both the clouds (using MVC, Dot Net)\r\n* Using TFS Online, Visual Studio, GitHub to better collaborate and work in an automated fashion\r\n* Release Manager to automate your release workflows\r\n\r\n### Primary Focus\r\n\r\nAs you must have guessed by now, the primary focus for this blog will be Microsoft Technologies. We will also explore beyond this and will be talking about various emerging open source technologies and the new Better Together world with the amalgamation of various technologies in one solution.\r\n\r\nI invite to take this journey with me!\r\nKeep learning!\r\n",
		"addpost": "addpost",
		"dated": "Apr 01, 2016",
		"slug": "introducing-harvesting-clouds",
		"categoryslug": "general",
		"status": "publised",
		"summary": "\n<p>Harvesting Clouds is a blog about all things Cloud. Be it Private Cloud or Public Cloud, I will try to cover various aspects of both.<\/p>\n<h3>Private Cloud<\/h3>\n<p>My key areas of interest in Private Cloud include the following:<\/p>\n<ul><li>PowerShell Scripting<\/li>\n<li>Windows Azure Pack or WAP...<\/li><\/ul>\n",
		"prevStatus": "publised"
	}
]